"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@langchain+google-genai@1.0.0_@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76__";
exports.ids = ["vendor-chunks/@langchain+google-genai@1.0.0_@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76__"];
exports.modules = {

/***/ "(rsc)/./node_modules/.pnpm/@langchain+google-genai@1.0.0_@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76__/node_modules/@langchain/google-genai/dist/chat_models.js":
/*!******************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+google-genai@1.0.0_@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76__/node_modules/@langchain/google-genai/dist/chat_models.js ***!
  \******************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatGoogleGenerativeAI: () => (/* binding */ ChatGoogleGenerativeAI)\n/* harmony export */ });\n/* harmony import */ var _utils_zod_to_genai_parameters_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils/zod_to_genai_parameters.js */ \"(rsc)/./node_modules/.pnpm/@langchain+google-genai@1.0.0_@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76__/node_modules/@langchain/google-genai/dist/utils/zod_to_genai_parameters.js\");\n/* harmony import */ var _utils_common_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils/common.js */ \"(rsc)/./node_modules/.pnpm/@langchain+google-genai@1.0.0_@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76__/node_modules/@langchain/google-genai/dist/utils/common.js\");\n/* harmony import */ var _output_parsers_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./output_parsers.js */ \"(rsc)/./node_modules/.pnpm/@langchain+google-genai@1.0.0_@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76__/node_modules/@langchain/google-genai/dist/output_parsers.js\");\n/* harmony import */ var _utils_tools_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils/tools.js */ \"(rsc)/./node_modules/.pnpm/@langchain+google-genai@1.0.0_@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76__/node_modules/@langchain/google-genai/dist/utils/tools.js\");\n/* harmony import */ var _google_generative_ai__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @google/generative-ai */ \"(rsc)/./node_modules/.pnpm/@google+generative-ai@0.24.1/node_modules/@google/generative-ai/dist/index.mjs\");\n/* harmony import */ var _langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @langchain/core/utils/env */ \"(rsc)/./node_modules/.pnpm/@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76_/node_modules/@langchain/core/dist/utils/env.js\");\n/* harmony import */ var _langchain_core_language_models_chat_models__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @langchain/core/language_models/chat_models */ \"(rsc)/./node_modules/.pnpm/@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76_/node_modules/@langchain/core/dist/language_models/chat_models.js\");\n/* harmony import */ var _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @langchain/core/runnables */ \"(rsc)/./node_modules/.pnpm/@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76_/node_modules/@langchain/core/dist/runnables/index.js\");\n/* harmony import */ var _langchain_core_utils_types__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @langchain/core/utils/types */ \"(rsc)/./node_modules/.pnpm/@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76_/node_modules/@langchain/core/dist/utils/types/index.js\");\n/* harmony import */ var _langchain_core_output_parsers__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @langchain/core/output_parsers */ \"(rsc)/./node_modules/.pnpm/@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76_/node_modules/@langchain/core/dist/output_parsers/index.js\");\n\n\n\n\n\n\n\n\n\n\n\n//#region src/chat_models.ts\n/**\n* Google Generative AI chat model integration.\n*\n* Setup:\n* Install `@langchain/google-genai` and set an environment variable named `GOOGLE_API_KEY`.\n*\n* ```bash\n* npm install @langchain/google-genai\n* export GOOGLE_API_KEY=\"your-api-key\"\n* ```\n*\n* ## [Constructor args](https://api.js.langchain.com/classes/langchain_google_genai.ChatGoogleGenerativeAI.html#constructor)\n*\n* ## [Runtime args](https://api.js.langchain.com/interfaces/langchain_google_genai.GoogleGenerativeAIChatCallOptions.html)\n*\n* Runtime args can be passed as the second argument to any of the base runnable methods `.invoke`. `.stream`, `.batch`, etc.\n* They can also be passed via `.withConfig`, or the second arg in `.bindTools`, like shown in the examples below:\n*\n* ```typescript\n* // When calling `.withConfig`, call options should be passed via the first argument\n* const llmWithArgsBound = llm.withConfig({\n*   stop: [\"\\n\"],\n* });\n*\n* // When calling `.bindTools`, call options should be passed via the second argument\n* const llmWithTools = llm.bindTools(\n*   [...],\n*   {\n*     stop: [\"\\n\"],\n*   }\n* );\n* ```\n*\n* ## Examples\n*\n* <details open>\n* <summary><strong>Instantiate</strong></summary>\n*\n* ```typescript\n* import { ChatGoogleGenerativeAI } from '@langchain/google-genai';\n*\n* const llm = new ChatGoogleGenerativeAI({\n*   model: \"gemini-1.5-flash\",\n*   temperature: 0,\n*   maxRetries: 2,\n*   // apiKey: \"...\",\n*   // other params...\n* });\n* ```\n* </details>\n*\n* <br />\n*\n* <details>\n* <summary><strong>Invoking</strong></summary>\n*\n* ```typescript\n* const input = `Translate \"I love programming\" into French.`;\n*\n* // Models also accept a list of chat messages or a formatted prompt\n* const result = await llm.invoke(input);\n* console.log(result);\n* ```\n*\n* ```txt\n* AIMessage {\n*   \"content\": \"There are a few ways to translate \\\"I love programming\\\" into French, depending on the level of formality and nuance you want to convey:\\n\\n**Formal:**\\n\\n* **J'aime la programmation.** (This is the most literal and formal translation.)\\n\\n**Informal:**\\n\\n* **J'adore programmer.** (This is a more enthusiastic and informal translation.)\\n* **J'aime beaucoup programmer.** (This is a slightly less enthusiastic but still informal translation.)\\n\\n**More specific:**\\n\\n* **J'aime beaucoup coder.** (This specifically refers to writing code.)\\n* **J'aime beaucoup développer des logiciels.** (This specifically refers to developing software.)\\n\\nThe best translation will depend on the context and your intended audience. \\n\",\n*   \"response_metadata\": {\n*     \"finishReason\": \"STOP\",\n*     \"index\": 0,\n*     \"safetyRatings\": [\n*       {\n*         \"category\": \"HARM_CATEGORY_SEXUALLY_EXPLICIT\",\n*         \"probability\": \"NEGLIGIBLE\"\n*       },\n*       {\n*         \"category\": \"HARM_CATEGORY_HATE_SPEECH\",\n*         \"probability\": \"NEGLIGIBLE\"\n*       },\n*       {\n*         \"category\": \"HARM_CATEGORY_HARASSMENT\",\n*         \"probability\": \"NEGLIGIBLE\"\n*       },\n*       {\n*         \"category\": \"HARM_CATEGORY_DANGEROUS_CONTENT\",\n*         \"probability\": \"NEGLIGIBLE\"\n*       }\n*     ]\n*   },\n*   \"usage_metadata\": {\n*     \"input_tokens\": 10,\n*     \"output_tokens\": 149,\n*     \"total_tokens\": 159\n*   }\n* }\n* ```\n* </details>\n*\n* <br />\n*\n* <details>\n* <summary><strong>Streaming Chunks</strong></summary>\n*\n* ```typescript\n* for await (const chunk of await llm.stream(input)) {\n*   console.log(chunk);\n* }\n* ```\n*\n* ```txt\n* AIMessageChunk {\n*   \"content\": \"There\",\n*   \"response_metadata\": {\n*     \"index\": 0\n*   }\n*   \"usage_metadata\": {\n*     \"input_tokens\": 10,\n*     \"output_tokens\": 1,\n*     \"total_tokens\": 11\n*   }\n* }\n* AIMessageChunk {\n*   \"content\": \" are a few ways to translate \\\"I love programming\\\" into French, depending on\",\n* }\n* AIMessageChunk {\n*   \"content\": \" the level of formality and nuance you want to convey:\\n\\n**Formal:**\\n\\n\",\n* }\n* AIMessageChunk {\n*   \"content\": \"* **J'aime la programmation.** (This is the most literal and formal translation.)\\n\\n**Informal:**\\n\\n* **J'adore programmer.** (This\",\n* }\n* AIMessageChunk {\n*   \"content\": \" is a more enthusiastic and informal translation.)\\n* **J'aime beaucoup programmer.** (This is a slightly less enthusiastic but still informal translation.)\\n\\n**More\",\n* }\n* AIMessageChunk {\n*   \"content\": \" specific:**\\n\\n* **J'aime beaucoup coder.** (This specifically refers to writing code.)\\n* **J'aime beaucoup développer des logiciels.** (This specifically refers to developing software.)\\n\\nThe best translation will depend on the context and\",\n* }\n* AIMessageChunk {\n*   \"content\": \" your intended audience. \\n\",\n* }\n* ```\n* </details>\n*\n* <br />\n*\n* <details>\n* <summary><strong>Aggregate Streamed Chunks</strong></summary>\n*\n* ```typescript\n* import { AIMessageChunk } from '@langchain/core/messages';\n* import { concat } from '@langchain/core/utils/stream';\n*\n* const stream = await llm.stream(input);\n* let full: AIMessageChunk | undefined;\n* for await (const chunk of stream) {\n*   full = !full ? chunk : concat(full, chunk);\n* }\n* console.log(full);\n* ```\n*\n* ```txt\n* AIMessageChunk {\n*   \"content\": \"There are a few ways to translate \\\"I love programming\\\" into French, depending on the level of formality and nuance you want to convey:\\n\\n**Formal:**\\n\\n* **J'aime la programmation.** (This is the most literal and formal translation.)\\n\\n**Informal:**\\n\\n* **J'adore programmer.** (This is a more enthusiastic and informal translation.)\\n* **J'aime beaucoup programmer.** (This is a slightly less enthusiastic but still informal translation.)\\n\\n**More specific:**\\n\\n* **J'aime beaucoup coder.** (This specifically refers to writing code.)\\n* **J'aime beaucoup développer des logiciels.** (This specifically refers to developing software.)\\n\\nThe best translation will depend on the context and your intended audience. \\n\",\n*   \"usage_metadata\": {\n*     \"input_tokens\": 10,\n*     \"output_tokens\": 277,\n*     \"total_tokens\": 287\n*   }\n* }\n* ```\n* </details>\n*\n* <br />\n*\n* <details>\n* <summary><strong>Bind tools</strong></summary>\n*\n* ```typescript\n* import { z } from 'zod';\n*\n* const GetWeather = {\n*   name: \"GetWeather\",\n*   description: \"Get the current weather in a given location\",\n*   schema: z.object({\n*     location: z.string().describe(\"The city and state, e.g. San Francisco, CA\")\n*   }),\n* }\n*\n* const GetPopulation = {\n*   name: \"GetPopulation\",\n*   description: \"Get the current population in a given location\",\n*   schema: z.object({\n*     location: z.string().describe(\"The city and state, e.g. San Francisco, CA\")\n*   }),\n* }\n*\n* const llmWithTools = llm.bindTools([GetWeather, GetPopulation]);\n* const aiMsg = await llmWithTools.invoke(\n*   \"Which city is hotter today and which is bigger: LA or NY?\"\n* );\n* console.log(aiMsg.tool_calls);\n* ```\n*\n* ```txt\n* [\n*   {\n*     name: 'GetWeather',\n*     args: { location: 'Los Angeles, CA' },\n*     type: 'tool_call'\n*   },\n*   {\n*     name: 'GetWeather',\n*     args: { location: 'New York, NY' },\n*     type: 'tool_call'\n*   },\n*   {\n*     name: 'GetPopulation',\n*     args: { location: 'Los Angeles, CA' },\n*     type: 'tool_call'\n*   },\n*   {\n*     name: 'GetPopulation',\n*     args: { location: 'New York, NY' },\n*     type: 'tool_call'\n*   }\n* ]\n* ```\n* </details>\n*\n* <br />\n*\n* <details>\n* <summary><strong>Structured Output</strong></summary>\n*\n* ```typescript\n* const Joke = z.object({\n*   setup: z.string().describe(\"The setup of the joke\"),\n*   punchline: z.string().describe(\"The punchline to the joke\"),\n*   rating: z.number().optional().describe(\"How funny the joke is, from 1 to 10\")\n* }).describe('Joke to tell user.');\n*\n* const structuredLlm = llm.withStructuredOutput(Joke, { name: \"Joke\" });\n* const jokeResult = await structuredLlm.invoke(\"Tell me a joke about cats\");\n* console.log(jokeResult);\n* ```\n*\n* ```txt\n* {\n*   setup: \"Why don\\\\'t cats play poker?\",\n*   punchline: \"Why don\\\\'t cats play poker? Because they always have an ace up their sleeve!\"\n* }\n* ```\n* </details>\n*\n* <br />\n*\n* <details>\n* <summary><strong>Multimodal</strong></summary>\n*\n* ```typescript\n* import { HumanMessage } from '@langchain/core/messages';\n*\n* const imageUrl = \"https://example.com/image.jpg\";\n* const imageData = await fetch(imageUrl).then(res => res.arrayBuffer());\n* const base64Image = Buffer.from(imageData).toString('base64');\n*\n* const message = new HumanMessage({\n*   content: [\n*     { type: \"text\", text: \"describe the weather in this image\" },\n*     {\n*       type: \"image_url\",\n*       image_url: { url: `data:image/jpeg;base64,${base64Image}` },\n*     },\n*   ]\n* });\n*\n* const imageDescriptionAiMsg = await llm.invoke([message]);\n* console.log(imageDescriptionAiMsg.content);\n* ```\n*\n* ```txt\n* The weather in the image appears to be clear and sunny. The sky is mostly blue with a few scattered white clouds, indicating fair weather. The bright sunlight is casting shadows on the green, grassy hill, suggesting it is a pleasant day with good visibility. There are no signs of rain or stormy conditions.\n* ```\n* </details>\n*\n* <br />\n*\n* <details>\n* <summary><strong>Usage Metadata</strong></summary>\n*\n* ```typescript\n* const aiMsgForMetadata = await llm.invoke(input);\n* console.log(aiMsgForMetadata.usage_metadata);\n* ```\n*\n* ```txt\n* { input_tokens: 10, output_tokens: 149, total_tokens: 159 }\n* ```\n* </details>\n*\n* <br />\n*\n* <details>\n* <summary><strong>Response Metadata</strong></summary>\n*\n* ```typescript\n* const aiMsgForResponseMetadata = await llm.invoke(input);\n* console.log(aiMsgForResponseMetadata.response_metadata);\n* ```\n*\n* ```txt\n* {\n*   finishReason: 'STOP',\n*   index: 0,\n*   safetyRatings: [\n*     {\n*       category: 'HARM_CATEGORY_SEXUALLY_EXPLICIT',\n*       probability: 'NEGLIGIBLE'\n*     },\n*     {\n*       category: 'HARM_CATEGORY_HATE_SPEECH',\n*       probability: 'NEGLIGIBLE'\n*     },\n*     { category: 'HARM_CATEGORY_HARASSMENT', probability: 'NEGLIGIBLE' },\n*     {\n*       category: 'HARM_CATEGORY_DANGEROUS_CONTENT',\n*       probability: 'NEGLIGIBLE'\n*     }\n*   ]\n* }\n* ```\n* </details>\n*\n* <br />\n*\n* <details>\n* <summary><strong>Document Messages</strong></summary>\n*\n* This example will show you how to pass documents such as PDFs to Google\n* Generative AI through messages.\n*\n* ```typescript\n* const pdfPath = \"/Users/my_user/Downloads/invoice.pdf\";\n* const pdfBase64 = await fs.readFile(pdfPath, \"base64\");\n*\n* const response = await llm.invoke([\n*   [\"system\", \"Use the provided documents to answer the question\"],\n*   [\n*     \"user\",\n*     [\n*       {\n*         type: \"application/pdf\", // If the `type` field includes a single slash (`/`), it will be treated as inline data.\n*         data: pdfBase64,\n*       },\n*       {\n*         type: \"text\",\n*         text: \"Summarize the contents of this PDF\",\n*       },\n*     ],\n*   ],\n* ]);\n*\n* console.log(response.content);\n* ```\n*\n* ```txt\n* This is a billing invoice from Twitter Developers for X API Basic Access. The transaction date is January 7, 2025,\n* and the amount is $194.34, which has been paid. The subscription period is from January 7, 2025 21:02 to February 7, 2025 00:00 (UTC).\n* The tax is $0.00, with a tax rate of 0%. The total amount is $194.34. The payment was made using a Visa card ending in 7022,\n* expiring in 12/2026. The billing address is Brace Sproul, 1234 Main Street, San Francisco, CA, US 94103. The company being billed is\n* X Corp, located at 865 FM 1209 Building 2, Bastrop, TX, US 78602. Terms and conditions apply.\n* ```\n* </details>\n*\n* <br />\n*/\nvar ChatGoogleGenerativeAI = class extends _langchain_core_language_models_chat_models__WEBPACK_IMPORTED_MODULE_6__.BaseChatModel {\n\tstatic lc_name() {\n\t\treturn \"ChatGoogleGenerativeAI\";\n\t}\n\tlc_serializable = true;\n\tget lc_secrets() {\n\t\treturn { apiKey: \"GOOGLE_API_KEY\" };\n\t}\n\tlc_namespace = [\n\t\t\"langchain\",\n\t\t\"chat_models\",\n\t\t\"google_genai\"\n\t];\n\tget lc_aliases() {\n\t\treturn { apiKey: \"google_api_key\" };\n\t}\n\tmodel;\n\ttemperature;\n\tmaxOutputTokens;\n\ttopP;\n\ttopK;\n\tstopSequences = [];\n\tsafetySettings;\n\tapiKey;\n\tstreaming = false;\n\tjson;\n\tstreamUsage = true;\n\tconvertSystemMessageToHumanContent;\n\tclient;\n\tget _isMultimodalModel() {\n\t\treturn this.model.includes(\"vision\") || this.model.startsWith(\"gemini-1.5\") || this.model.startsWith(\"gemini-2\") || this.model.startsWith(\"gemma-3-\") && !this.model.startsWith(\"gemma-3-1b\");\n\t}\n\tconstructor(fields) {\n\t\tsuper(fields);\n\t\tthis.model = fields.model.replace(/^models\\//, \"\");\n\t\tthis.maxOutputTokens = fields.maxOutputTokens ?? this.maxOutputTokens;\n\t\tif (this.maxOutputTokens && this.maxOutputTokens < 0) throw new Error(\"`maxOutputTokens` must be a positive integer\");\n\t\tthis.temperature = fields.temperature ?? this.temperature;\n\t\tif (this.temperature && (this.temperature < 0 || this.temperature > 2)) throw new Error(\"`temperature` must be in the range of [0.0,2.0]\");\n\t\tthis.topP = fields.topP ?? this.topP;\n\t\tif (this.topP && this.topP < 0) throw new Error(\"`topP` must be a positive integer\");\n\t\tif (this.topP && this.topP > 1) throw new Error(\"`topP` must be below 1.\");\n\t\tthis.topK = fields.topK ?? this.topK;\n\t\tif (this.topK && this.topK < 0) throw new Error(\"`topK` must be a positive integer\");\n\t\tthis.stopSequences = fields.stopSequences ?? this.stopSequences;\n\t\tthis.apiKey = fields.apiKey ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_5__.getEnvironmentVariable)(\"GOOGLE_API_KEY\");\n\t\tif (!this.apiKey) throw new Error(\"Please set an API key for Google GenerativeAI in the environment variable GOOGLE_API_KEY or in the `apiKey` field of the ChatGoogleGenerativeAI constructor\");\n\t\tthis.safetySettings = fields.safetySettings ?? this.safetySettings;\n\t\tif (this.safetySettings && this.safetySettings.length > 0) {\n\t\t\tconst safetySettingsSet = new Set(this.safetySettings.map((s) => s.category));\n\t\t\tif (safetySettingsSet.size !== this.safetySettings.length) throw new Error(\"The categories in `safetySettings` array must be unique\");\n\t\t}\n\t\tthis.streaming = fields.streaming ?? this.streaming;\n\t\tthis.json = fields.json;\n\t\tthis.client = new _google_generative_ai__WEBPACK_IMPORTED_MODULE_4__.GoogleGenerativeAI(this.apiKey).getGenerativeModel({\n\t\t\tmodel: this.model,\n\t\t\tsafetySettings: this.safetySettings,\n\t\t\tgenerationConfig: {\n\t\t\t\tstopSequences: this.stopSequences,\n\t\t\t\tmaxOutputTokens: this.maxOutputTokens,\n\t\t\t\ttemperature: this.temperature,\n\t\t\t\ttopP: this.topP,\n\t\t\t\ttopK: this.topK,\n\t\t\t\t...this.json ? { responseMimeType: \"application/json\" } : {}\n\t\t\t}\n\t\t}, {\n\t\t\tapiVersion: fields.apiVersion,\n\t\t\tbaseUrl: fields.baseUrl\n\t\t});\n\t\tthis.streamUsage = fields.streamUsage ?? this.streamUsage;\n\t}\n\tuseCachedContent(cachedContent, modelParams, requestOptions) {\n\t\tif (!this.apiKey) return;\n\t\tthis.client = new _google_generative_ai__WEBPACK_IMPORTED_MODULE_4__.GoogleGenerativeAI(this.apiKey).getGenerativeModelFromCachedContent(cachedContent, modelParams, requestOptions);\n\t}\n\tget useSystemInstruction() {\n\t\treturn typeof this.convertSystemMessageToHumanContent === \"boolean\" ? !this.convertSystemMessageToHumanContent : this.computeUseSystemInstruction;\n\t}\n\tget computeUseSystemInstruction() {\n\t\tif (this.model === \"gemini-1.0-pro-001\") return false;\n\t\telse if (this.model.startsWith(\"gemini-pro-vision\")) return false;\n\t\telse if (this.model.startsWith(\"gemini-1.0-pro-vision\")) return false;\n\t\telse if (this.model === \"gemini-pro\") return false;\n\t\treturn true;\n\t}\n\tgetLsParams(options) {\n\t\treturn {\n\t\t\tls_provider: \"google_genai\",\n\t\t\tls_model_name: this.model,\n\t\t\tls_model_type: \"chat\",\n\t\t\tls_temperature: this.client.generationConfig.temperature,\n\t\t\tls_max_tokens: this.client.generationConfig.maxOutputTokens,\n\t\t\tls_stop: options.stop\n\t\t};\n\t}\n\t_combineLLMOutput() {\n\t\treturn [];\n\t}\n\t_llmType() {\n\t\treturn \"googlegenerativeai\";\n\t}\n\tbindTools(tools, kwargs) {\n\t\treturn this.withConfig({\n\t\t\ttools: (0,_utils_tools_js__WEBPACK_IMPORTED_MODULE_3__.convertToolsToGenAI)(tools)?.tools,\n\t\t\t...kwargs\n\t\t});\n\t}\n\tinvocationParams(options) {\n\t\tconst toolsAndConfig = options?.tools?.length ? (0,_utils_tools_js__WEBPACK_IMPORTED_MODULE_3__.convertToolsToGenAI)(options.tools, {\n\t\t\ttoolChoice: options.tool_choice,\n\t\t\tallowedFunctionNames: options.allowedFunctionNames\n\t\t}) : void 0;\n\t\tif (options?.responseSchema) {\n\t\t\tthis.client.generationConfig.responseSchema = options.responseSchema;\n\t\t\tthis.client.generationConfig.responseMimeType = \"application/json\";\n\t\t} else {\n\t\t\tthis.client.generationConfig.responseSchema = void 0;\n\t\t\tthis.client.generationConfig.responseMimeType = this.json ? \"application/json\" : void 0;\n\t\t}\n\t\treturn {\n\t\t\t...toolsAndConfig?.tools ? { tools: toolsAndConfig.tools } : {},\n\t\t\t...toolsAndConfig?.toolConfig ? { toolConfig: toolsAndConfig.toolConfig } : {}\n\t\t};\n\t}\n\tasync _generate(messages, options, runManager) {\n\t\tconst prompt = (0,_utils_common_js__WEBPACK_IMPORTED_MODULE_1__.convertBaseMessagesToContent)(messages, this._isMultimodalModel, this.useSystemInstruction);\n\t\tlet actualPrompt = prompt;\n\t\tif (prompt[0].role === \"system\") {\n\t\t\tconst [systemInstruction] = prompt;\n\t\t\tthis.client.systemInstruction = systemInstruction;\n\t\t\tactualPrompt = prompt.slice(1);\n\t\t}\n\t\tconst parameters = this.invocationParams(options);\n\t\tif (this.streaming) {\n\t\t\tconst tokenUsage = {};\n\t\t\tconst stream = this._streamResponseChunks(messages, options, runManager);\n\t\t\tconst finalChunks = {};\n\t\t\tfor await (const chunk of stream) {\n\t\t\t\tconst index = chunk.generationInfo?.completion ?? 0;\n\t\t\t\tif (finalChunks[index] === void 0) finalChunks[index] = chunk;\n\t\t\t\telse finalChunks[index] = finalChunks[index].concat(chunk);\n\t\t\t}\n\t\t\tconst generations = Object.entries(finalChunks).sort(([aKey], [bKey]) => parseInt(aKey, 10) - parseInt(bKey, 10)).map(([_, value]) => value);\n\t\t\treturn {\n\t\t\t\tgenerations,\n\t\t\t\tllmOutput: { estimatedTokenUsage: tokenUsage }\n\t\t\t};\n\t\t}\n\t\tconst res = await this.completionWithRetry({\n\t\t\t...parameters,\n\t\t\tcontents: actualPrompt\n\t\t});\n\t\tlet usageMetadata;\n\t\tif (\"usageMetadata\" in res.response) {\n\t\t\tconst genAIUsageMetadata = res.response.usageMetadata;\n\t\t\tusageMetadata = {\n\t\t\t\tinput_tokens: genAIUsageMetadata.promptTokenCount ?? 0,\n\t\t\t\toutput_tokens: genAIUsageMetadata.candidatesTokenCount ?? 0,\n\t\t\t\ttotal_tokens: genAIUsageMetadata.totalTokenCount ?? 0\n\t\t\t};\n\t\t}\n\t\tconst generationResult = (0,_utils_common_js__WEBPACK_IMPORTED_MODULE_1__.mapGenerateContentResultToChatResult)(res.response, { usageMetadata });\n\t\tif (generationResult.generations?.length > 0) await runManager?.handleLLMNewToken(generationResult.generations[0]?.text ?? \"\");\n\t\treturn generationResult;\n\t}\n\tasync *_streamResponseChunks(messages, options, runManager) {\n\t\tconst prompt = (0,_utils_common_js__WEBPACK_IMPORTED_MODULE_1__.convertBaseMessagesToContent)(messages, this._isMultimodalModel, this.useSystemInstruction);\n\t\tlet actualPrompt = prompt;\n\t\tif (prompt[0].role === \"system\") {\n\t\t\tconst [systemInstruction] = prompt;\n\t\t\tthis.client.systemInstruction = systemInstruction;\n\t\t\tactualPrompt = prompt.slice(1);\n\t\t}\n\t\tconst parameters = this.invocationParams(options);\n\t\tconst request = {\n\t\t\t...parameters,\n\t\t\tcontents: actualPrompt\n\t\t};\n\t\tconst stream = await this.caller.callWithOptions({ signal: options?.signal }, async () => {\n\t\t\tconst { stream: stream$1 } = await this.client.generateContentStream(request);\n\t\t\treturn stream$1;\n\t\t});\n\t\tlet usageMetadata;\n\t\tlet prevPromptTokenCount = 0;\n\t\tlet prevCandidatesTokenCount = 0;\n\t\tlet prevTotalTokenCount = 0;\n\t\tlet index = 0;\n\t\tfor await (const response of stream) {\n\t\t\tif (\"usageMetadata\" in response && response.usageMetadata !== void 0 && this.streamUsage !== false && options.streamUsage !== false) {\n\t\t\t\tusageMetadata = {\n\t\t\t\t\tinput_tokens: response.usageMetadata.promptTokenCount ?? 0,\n\t\t\t\t\toutput_tokens: response.usageMetadata.candidatesTokenCount ?? 0,\n\t\t\t\t\ttotal_tokens: response.usageMetadata.totalTokenCount ?? 0\n\t\t\t\t};\n\t\t\t\tconst newPromptTokenCount = response.usageMetadata.promptTokenCount ?? 0;\n\t\t\t\tusageMetadata.input_tokens = Math.max(0, newPromptTokenCount - prevPromptTokenCount);\n\t\t\t\tprevPromptTokenCount = newPromptTokenCount;\n\t\t\t\tconst newCandidatesTokenCount = response.usageMetadata.candidatesTokenCount ?? 0;\n\t\t\t\tusageMetadata.output_tokens = Math.max(0, newCandidatesTokenCount - prevCandidatesTokenCount);\n\t\t\t\tprevCandidatesTokenCount = newCandidatesTokenCount;\n\t\t\t\tconst newTotalTokenCount = response.usageMetadata.totalTokenCount ?? 0;\n\t\t\t\tusageMetadata.total_tokens = Math.max(0, newTotalTokenCount - prevTotalTokenCount);\n\t\t\t\tprevTotalTokenCount = newTotalTokenCount;\n\t\t\t}\n\t\t\tconst chunk = (0,_utils_common_js__WEBPACK_IMPORTED_MODULE_1__.convertResponseContentToChatGenerationChunk)(response, {\n\t\t\t\tusageMetadata,\n\t\t\t\tindex\n\t\t\t});\n\t\t\tindex += 1;\n\t\t\tif (!chunk) continue;\n\t\t\tyield chunk;\n\t\t\tawait runManager?.handleLLMNewToken(chunk.text ?? \"\");\n\t\t}\n\t}\n\tasync completionWithRetry(request, options) {\n\t\treturn this.caller.callWithOptions({ signal: options?.signal }, async () => {\n\t\t\ttry {\n\t\t\t\treturn await this.client.generateContent(request);\n\t\t\t} catch (e) {\n\t\t\t\tif (e.message?.includes(\"400 Bad Request\")) e.status = 400;\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t});\n\t}\n\twithStructuredOutput(outputSchema, config) {\n\t\tconst schema = outputSchema;\n\t\tconst name = config?.name;\n\t\tconst method = config?.method;\n\t\tconst includeRaw = config?.includeRaw;\n\t\tif (method === \"jsonMode\") throw new Error(`ChatGoogleGenerativeAI only supports \"jsonSchema\" or \"functionCalling\" as a method.`);\n\t\tlet llm;\n\t\tlet outputParser;\n\t\tif (method === \"functionCalling\") {\n\t\t\tlet functionName = name ?? \"extract\";\n\t\t\tlet tools;\n\t\t\tif ((0,_langchain_core_utils_types__WEBPACK_IMPORTED_MODULE_8__.isInteropZodSchema)(schema)) {\n\t\t\t\tconst jsonSchema = (0,_utils_zod_to_genai_parameters_js__WEBPACK_IMPORTED_MODULE_0__.schemaToGenerativeAIParameters)(schema);\n\t\t\t\ttools = [{ functionDeclarations: [{\n\t\t\t\t\tname: functionName,\n\t\t\t\t\tdescription: jsonSchema.description ?? \"A function available to call.\",\n\t\t\t\t\tparameters: jsonSchema\n\t\t\t\t}] }];\n\t\t\t\toutputParser = new _output_parsers_js__WEBPACK_IMPORTED_MODULE_2__.GoogleGenerativeAIToolsOutputParser({\n\t\t\t\t\treturnSingle: true,\n\t\t\t\t\tkeyName: functionName,\n\t\t\t\t\tzodSchema: schema\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tlet geminiFunctionDefinition;\n\t\t\t\tif (typeof schema.name === \"string\" && typeof schema.parameters === \"object\" && schema.parameters != null) {\n\t\t\t\t\tgeminiFunctionDefinition = schema;\n\t\t\t\t\tgeminiFunctionDefinition.parameters = (0,_utils_zod_to_genai_parameters_js__WEBPACK_IMPORTED_MODULE_0__.removeAdditionalProperties)(schema.parameters);\n\t\t\t\t\tfunctionName = schema.name;\n\t\t\t\t} else geminiFunctionDefinition = {\n\t\t\t\t\tname: functionName,\n\t\t\t\t\tdescription: schema.description ?? \"\",\n\t\t\t\t\tparameters: (0,_utils_zod_to_genai_parameters_js__WEBPACK_IMPORTED_MODULE_0__.removeAdditionalProperties)(schema)\n\t\t\t\t};\n\t\t\t\ttools = [{ functionDeclarations: [geminiFunctionDefinition] }];\n\t\t\t\toutputParser = new _output_parsers_js__WEBPACK_IMPORTED_MODULE_2__.GoogleGenerativeAIToolsOutputParser({\n\t\t\t\t\treturnSingle: true,\n\t\t\t\t\tkeyName: functionName\n\t\t\t\t});\n\t\t\t}\n\t\t\tllm = this.bindTools(tools).withConfig({ allowedFunctionNames: [functionName] });\n\t\t} else {\n\t\t\tconst jsonSchema = (0,_utils_zod_to_genai_parameters_js__WEBPACK_IMPORTED_MODULE_0__.schemaToGenerativeAIParameters)(schema);\n\t\t\tllm = this.withConfig({ responseSchema: jsonSchema });\n\t\t\toutputParser = new _langchain_core_output_parsers__WEBPACK_IMPORTED_MODULE_9__.JsonOutputParser();\n\t\t}\n\t\tif (!includeRaw) return llm.pipe(outputParser).withConfig({ runName: \"ChatGoogleGenerativeAIStructuredOutput\" });\n\t\tconst parserAssign = _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_7__.RunnablePassthrough.assign({ parsed: (input, config$1) => outputParser.invoke(input.raw, config$1) });\n\t\tconst parserNone = _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_7__.RunnablePassthrough.assign({ parsed: () => null });\n\t\tconst parsedWithFallback = parserAssign.withFallbacks({ fallbacks: [parserNone] });\n\t\treturn _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_7__.RunnableSequence.from([{ raw: llm }, parsedWithFallback]).withConfig({ runName: \"StructuredOutputRunnable\" });\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=chat_models.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitnb29nbGUtZ2VuYWlAMS4wLjBfQGxhbmdjaGFpbitjb3JlQDEuMC4xX29wZW5haUA2LjcuMF93c0A4LjE4LjNfem9kQDMuMjUuNzZfXy9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvZGlzdC9jaGF0X21vZGVscy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFnSDtBQUNvQztBQUMxRTtBQUNuQjtBQUNJO0FBQ1E7QUFDUztBQUNNO0FBQ2pCO0FBQ0M7O0FBRWxFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHlCQUF5QjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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b3BlbnJvdXRlci1sYW5nZ3JhcGgvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitnb29nbGUtZ2VuYWlAMS4wLjBfQGxhbmdjaGFpbitjb3JlQDEuMC4xX29wZW5haUA2LjcuMF93c0A4LjE4LjNfem9kQDMuMjUuNzZfXy9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvZGlzdC9jaGF0X21vZGVscy5qcz9hOWYxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJlbW92ZUFkZGl0aW9uYWxQcm9wZXJ0aWVzLCBzY2hlbWFUb0dlbmVyYXRpdmVBSVBhcmFtZXRlcnMgfSBmcm9tIFwiLi91dGlscy96b2RfdG9fZ2VuYWlfcGFyYW1ldGVycy5qc1wiO1xuaW1wb3J0IHsgY29udmVydEJhc2VNZXNzYWdlc1RvQ29udGVudCwgY29udmVydFJlc3BvbnNlQ29udGVudFRvQ2hhdEdlbmVyYXRpb25DaHVuaywgbWFwR2VuZXJhdGVDb250ZW50UmVzdWx0VG9DaGF0UmVzdWx0IH0gZnJvbSBcIi4vdXRpbHMvY29tbW9uLmpzXCI7XG5pbXBvcnQgeyBHb29nbGVHZW5lcmF0aXZlQUlUb29sc091dHB1dFBhcnNlciB9IGZyb20gXCIuL291dHB1dF9wYXJzZXJzLmpzXCI7XG5pbXBvcnQgeyBjb252ZXJ0VG9vbHNUb0dlbkFJIH0gZnJvbSBcIi4vdXRpbHMvdG9vbHMuanNcIjtcbmltcG9ydCB7IEdvb2dsZUdlbmVyYXRpdmVBSSB9IGZyb20gXCJAZ29vZ2xlL2dlbmVyYXRpdmUtYWlcIjtcbmltcG9ydCB7IGdldEVudmlyb25tZW50VmFyaWFibGUgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL3V0aWxzL2VudlwiO1xuaW1wb3J0IHsgQmFzZUNoYXRNb2RlbCB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvbGFuZ3VhZ2VfbW9kZWxzL2NoYXRfbW9kZWxzXCI7XG5pbXBvcnQgeyBSdW5uYWJsZVBhc3N0aHJvdWdoLCBSdW5uYWJsZVNlcXVlbmNlIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9ydW5uYWJsZXNcIjtcbmltcG9ydCB7IGlzSW50ZXJvcFpvZFNjaGVtYSB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvdXRpbHMvdHlwZXNcIjtcbmltcG9ydCB7IEpzb25PdXRwdXRQYXJzZXIgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL291dHB1dF9wYXJzZXJzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvY2hhdF9tb2RlbHMudHNcbi8qKlxuKiBHb29nbGUgR2VuZXJhdGl2ZSBBSSBjaGF0IG1vZGVsIGludGVncmF0aW9uLlxuKlxuKiBTZXR1cDpcbiogSW5zdGFsbCBgQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWlgIGFuZCBzZXQgYW4gZW52aXJvbm1lbnQgdmFyaWFibGUgbmFtZWQgYEdPT0dMRV9BUElfS0VZYC5cbipcbiogYGBgYmFzaFxuKiBucG0gaW5zdGFsbCBAbGFuZ2NoYWluL2dvb2dsZS1nZW5haVxuKiBleHBvcnQgR09PR0xFX0FQSV9LRVk9XCJ5b3VyLWFwaS1rZXlcIlxuKiBgYGBcbipcbiogIyMgW0NvbnN0cnVjdG9yIGFyZ3NdKGh0dHBzOi8vYXBpLmpzLmxhbmdjaGFpbi5jb20vY2xhc3Nlcy9sYW5nY2hhaW5fZ29vZ2xlX2dlbmFpLkNoYXRHb29nbGVHZW5lcmF0aXZlQUkuaHRtbCNjb25zdHJ1Y3RvcilcbipcbiogIyMgW1J1bnRpbWUgYXJnc10oaHR0cHM6Ly9hcGkuanMubGFuZ2NoYWluLmNvbS9pbnRlcmZhY2VzL2xhbmdjaGFpbl9nb29nbGVfZ2VuYWkuR29vZ2xlR2VuZXJhdGl2ZUFJQ2hhdENhbGxPcHRpb25zLmh0bWwpXG4qXG4qIFJ1bnRpbWUgYXJncyBjYW4gYmUgcGFzc2VkIGFzIHRoZSBzZWNvbmQgYXJndW1lbnQgdG8gYW55IG9mIHRoZSBiYXNlIHJ1bm5hYmxlIG1ldGhvZHMgYC5pbnZva2VgLiBgLnN0cmVhbWAsIGAuYmF0Y2hgLCBldGMuXG4qIFRoZXkgY2FuIGFsc28gYmUgcGFzc2VkIHZpYSBgLndpdGhDb25maWdgLCBvciB0aGUgc2Vjb25kIGFyZyBpbiBgLmJpbmRUb29sc2AsIGxpa2Ugc2hvd24gaW4gdGhlIGV4YW1wbGVzIGJlbG93OlxuKlxuKiBgYGB0eXBlc2NyaXB0XG4qIC8vIFdoZW4gY2FsbGluZyBgLndpdGhDb25maWdgLCBjYWxsIG9wdGlvbnMgc2hvdWxkIGJlIHBhc3NlZCB2aWEgdGhlIGZpcnN0IGFyZ3VtZW50XG4qIGNvbnN0IGxsbVdpdGhBcmdzQm91bmQgPSBsbG0ud2l0aENvbmZpZyh7XG4qICAgc3RvcDogW1wiXFxuXCJdLFxuKiB9KTtcbipcbiogLy8gV2hlbiBjYWxsaW5nIGAuYmluZFRvb2xzYCwgY2FsbCBvcHRpb25zIHNob3VsZCBiZSBwYXNzZWQgdmlhIHRoZSBzZWNvbmQgYXJndW1lbnRcbiogY29uc3QgbGxtV2l0aFRvb2xzID0gbGxtLmJpbmRUb29scyhcbiogICBbLi4uXSxcbiogICB7XG4qICAgICBzdG9wOiBbXCJcXG5cIl0sXG4qICAgfVxuKiApO1xuKiBgYGBcbipcbiogIyMgRXhhbXBsZXNcbipcbiogPGRldGFpbHMgb3Blbj5cbiogPHN1bW1hcnk+PHN0cm9uZz5JbnN0YW50aWF0ZTwvc3Ryb25nPjwvc3VtbWFyeT5cbipcbiogYGBgdHlwZXNjcmlwdFxuKiBpbXBvcnQgeyBDaGF0R29vZ2xlR2VuZXJhdGl2ZUFJIH0gZnJvbSAnQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWknO1xuKlxuKiBjb25zdCBsbG0gPSBuZXcgQ2hhdEdvb2dsZUdlbmVyYXRpdmVBSSh7XG4qICAgbW9kZWw6IFwiZ2VtaW5pLTEuNS1mbGFzaFwiLFxuKiAgIHRlbXBlcmF0dXJlOiAwLFxuKiAgIG1heFJldHJpZXM6IDIsXG4qICAgLy8gYXBpS2V5OiBcIi4uLlwiLFxuKiAgIC8vIG90aGVyIHBhcmFtcy4uLlxuKiB9KTtcbiogYGBgXG4qIDwvZGV0YWlscz5cbipcbiogPGJyIC8+XG4qXG4qIDxkZXRhaWxzPlxuKiA8c3VtbWFyeT48c3Ryb25nPkludm9raW5nPC9zdHJvbmc+PC9zdW1tYXJ5PlxuKlxuKiBgYGB0eXBlc2NyaXB0XG4qIGNvbnN0IGlucHV0ID0gYFRyYW5zbGF0ZSBcIkkgbG92ZSBwcm9ncmFtbWluZ1wiIGludG8gRnJlbmNoLmA7XG4qXG4qIC8vIE1vZGVscyBhbHNvIGFjY2VwdCBhIGxpc3Qgb2YgY2hhdCBtZXNzYWdlcyBvciBhIGZvcm1hdHRlZCBwcm9tcHRcbiogY29uc3QgcmVzdWx0ID0gYXdhaXQgbGxtLmludm9rZShpbnB1dCk7XG4qIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4qIGBgYFxuKlxuKiBgYGB0eHRcbiogQUlNZXNzYWdlIHtcbiogICBcImNvbnRlbnRcIjogXCJUaGVyZSBhcmUgYSBmZXcgd2F5cyB0byB0cmFuc2xhdGUgXFxcIkkgbG92ZSBwcm9ncmFtbWluZ1xcXCIgaW50byBGcmVuY2gsIGRlcGVuZGluZyBvbiB0aGUgbGV2ZWwgb2YgZm9ybWFsaXR5IGFuZCBudWFuY2UgeW91IHdhbnQgdG8gY29udmV5OlxcblxcbioqRm9ybWFsOioqXFxuXFxuKiAqKkonYWltZSBsYSBwcm9ncmFtbWF0aW9uLioqIChUaGlzIGlzIHRoZSBtb3N0IGxpdGVyYWwgYW5kIGZvcm1hbCB0cmFuc2xhdGlvbi4pXFxuXFxuKipJbmZvcm1hbDoqKlxcblxcbiogKipKJ2Fkb3JlIHByb2dyYW1tZXIuKiogKFRoaXMgaXMgYSBtb3JlIGVudGh1c2lhc3RpYyBhbmQgaW5mb3JtYWwgdHJhbnNsYXRpb24uKVxcbiogKipKJ2FpbWUgYmVhdWNvdXAgcHJvZ3JhbW1lci4qKiAoVGhpcyBpcyBhIHNsaWdodGx5IGxlc3MgZW50aHVzaWFzdGljIGJ1dCBzdGlsbCBpbmZvcm1hbCB0cmFuc2xhdGlvbi4pXFxuXFxuKipNb3JlIHNwZWNpZmljOioqXFxuXFxuKiAqKkonYWltZSBiZWF1Y291cCBjb2Rlci4qKiAoVGhpcyBzcGVjaWZpY2FsbHkgcmVmZXJzIHRvIHdyaXRpbmcgY29kZS4pXFxuKiAqKkonYWltZSBiZWF1Y291cCBkw6l2ZWxvcHBlciBkZXMgbG9naWNpZWxzLioqIChUaGlzIHNwZWNpZmljYWxseSByZWZlcnMgdG8gZGV2ZWxvcGluZyBzb2Z0d2FyZS4pXFxuXFxuVGhlIGJlc3QgdHJhbnNsYXRpb24gd2lsbCBkZXBlbmQgb24gdGhlIGNvbnRleHQgYW5kIHlvdXIgaW50ZW5kZWQgYXVkaWVuY2UuIFxcblwiLFxuKiAgIFwicmVzcG9uc2VfbWV0YWRhdGFcIjoge1xuKiAgICAgXCJmaW5pc2hSZWFzb25cIjogXCJTVE9QXCIsXG4qICAgICBcImluZGV4XCI6IDAsXG4qICAgICBcInNhZmV0eVJhdGluZ3NcIjogW1xuKiAgICAgICB7XG4qICAgICAgICAgXCJjYXRlZ29yeVwiOiBcIkhBUk1fQ0FURUdPUllfU0VYVUFMTFlfRVhQTElDSVRcIixcbiogICAgICAgICBcInByb2JhYmlsaXR5XCI6IFwiTkVHTElHSUJMRVwiXG4qICAgICAgIH0sXG4qICAgICAgIHtcbiogICAgICAgICBcImNhdGVnb3J5XCI6IFwiSEFSTV9DQVRFR09SWV9IQVRFX1NQRUVDSFwiLFxuKiAgICAgICAgIFwicHJvYmFiaWxpdHlcIjogXCJORUdMSUdJQkxFXCJcbiogICAgICAgfSxcbiogICAgICAge1xuKiAgICAgICAgIFwiY2F0ZWdvcnlcIjogXCJIQVJNX0NBVEVHT1JZX0hBUkFTU01FTlRcIixcbiogICAgICAgICBcInByb2JhYmlsaXR5XCI6IFwiTkVHTElHSUJMRVwiXG4qICAgICAgIH0sXG4qICAgICAgIHtcbiogICAgICAgICBcImNhdGVnb3J5XCI6IFwiSEFSTV9DQVRFR09SWV9EQU5HRVJPVVNfQ09OVEVOVFwiLFxuKiAgICAgICAgIFwicHJvYmFiaWxpdHlcIjogXCJORUdMSUdJQkxFXCJcbiogICAgICAgfVxuKiAgICAgXVxuKiAgIH0sXG4qICAgXCJ1c2FnZV9tZXRhZGF0YVwiOiB7XG4qICAgICBcImlucHV0X3Rva2Vuc1wiOiAxMCxcbiogICAgIFwib3V0cHV0X3Rva2Vuc1wiOiAxNDksXG4qICAgICBcInRvdGFsX3Rva2Vuc1wiOiAxNTlcbiogICB9XG4qIH1cbiogYGBgXG4qIDwvZGV0YWlscz5cbipcbiogPGJyIC8+XG4qXG4qIDxkZXRhaWxzPlxuKiA8c3VtbWFyeT48c3Ryb25nPlN0cmVhbWluZyBDaHVua3M8L3N0cm9uZz48L3N1bW1hcnk+XG4qXG4qIGBgYHR5cGVzY3JpcHRcbiogZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBhd2FpdCBsbG0uc3RyZWFtKGlucHV0KSkge1xuKiAgIGNvbnNvbGUubG9nKGNodW5rKTtcbiogfVxuKiBgYGBcbipcbiogYGBgdHh0XG4qIEFJTWVzc2FnZUNodW5rIHtcbiogICBcImNvbnRlbnRcIjogXCJUaGVyZVwiLFxuKiAgIFwicmVzcG9uc2VfbWV0YWRhdGFcIjoge1xuKiAgICAgXCJpbmRleFwiOiAwXG4qICAgfVxuKiAgIFwidXNhZ2VfbWV0YWRhdGFcIjoge1xuKiAgICAgXCJpbnB1dF90b2tlbnNcIjogMTAsXG4qICAgICBcIm91dHB1dF90b2tlbnNcIjogMSxcbiogICAgIFwidG90YWxfdG9rZW5zXCI6IDExXG4qICAgfVxuKiB9XG4qIEFJTWVzc2FnZUNodW5rIHtcbiogICBcImNvbnRlbnRcIjogXCIgYXJlIGEgZmV3IHdheXMgdG8gdHJhbnNsYXRlIFxcXCJJIGxvdmUgcHJvZ3JhbW1pbmdcXFwiIGludG8gRnJlbmNoLCBkZXBlbmRpbmcgb25cIixcbiogfVxuKiBBSU1lc3NhZ2VDaHVuayB7XG4qICAgXCJjb250ZW50XCI6IFwiIHRoZSBsZXZlbCBvZiBmb3JtYWxpdHkgYW5kIG51YW5jZSB5b3Ugd2FudCB0byBjb252ZXk6XFxuXFxuKipGb3JtYWw6KipcXG5cXG5cIixcbiogfVxuKiBBSU1lc3NhZ2VDaHVuayB7XG4qICAgXCJjb250ZW50XCI6IFwiKiAqKkonYWltZSBsYSBwcm9ncmFtbWF0aW9uLioqIChUaGlzIGlzIHRoZSBtb3N0IGxpdGVyYWwgYW5kIGZvcm1hbCB0cmFuc2xhdGlvbi4pXFxuXFxuKipJbmZvcm1hbDoqKlxcblxcbiogKipKJ2Fkb3JlIHByb2dyYW1tZXIuKiogKFRoaXNcIixcbiogfVxuKiBBSU1lc3NhZ2VDaHVuayB7XG4qICAgXCJjb250ZW50XCI6IFwiIGlzIGEgbW9yZSBlbnRodXNpYXN0aWMgYW5kIGluZm9ybWFsIHRyYW5zbGF0aW9uLilcXG4qICoqSidhaW1lIGJlYXVjb3VwIHByb2dyYW1tZXIuKiogKFRoaXMgaXMgYSBzbGlnaHRseSBsZXNzIGVudGh1c2lhc3RpYyBidXQgc3RpbGwgaW5mb3JtYWwgdHJhbnNsYXRpb24uKVxcblxcbioqTW9yZVwiLFxuKiB9XG4qIEFJTWVzc2FnZUNodW5rIHtcbiogICBcImNvbnRlbnRcIjogXCIgc3BlY2lmaWM6KipcXG5cXG4qICoqSidhaW1lIGJlYXVjb3VwIGNvZGVyLioqIChUaGlzIHNwZWNpZmljYWxseSByZWZlcnMgdG8gd3JpdGluZyBjb2RlLilcXG4qICoqSidhaW1lIGJlYXVjb3VwIGTDqXZlbG9wcGVyIGRlcyBsb2dpY2llbHMuKiogKFRoaXMgc3BlY2lmaWNhbGx5IHJlZmVycyB0byBkZXZlbG9waW5nIHNvZnR3YXJlLilcXG5cXG5UaGUgYmVzdCB0cmFuc2xhdGlvbiB3aWxsIGRlcGVuZCBvbiB0aGUgY29udGV4dCBhbmRcIixcbiogfVxuKiBBSU1lc3NhZ2VDaHVuayB7XG4qICAgXCJjb250ZW50XCI6IFwiIHlvdXIgaW50ZW5kZWQgYXVkaWVuY2UuIFxcblwiLFxuKiB9XG4qIGBgYFxuKiA8L2RldGFpbHM+XG4qXG4qIDxiciAvPlxuKlxuKiA8ZGV0YWlscz5cbiogPHN1bW1hcnk+PHN0cm9uZz5BZ2dyZWdhdGUgU3RyZWFtZWQgQ2h1bmtzPC9zdHJvbmc+PC9zdW1tYXJ5PlxuKlxuKiBgYGB0eXBlc2NyaXB0XG4qIGltcG9ydCB7IEFJTWVzc2FnZUNodW5rIH0gZnJvbSAnQGxhbmdjaGFpbi9jb3JlL21lc3NhZ2VzJztcbiogaW1wb3J0IHsgY29uY2F0IH0gZnJvbSAnQGxhbmdjaGFpbi9jb3JlL3V0aWxzL3N0cmVhbSc7XG4qXG4qIGNvbnN0IHN0cmVhbSA9IGF3YWl0IGxsbS5zdHJlYW0oaW5wdXQpO1xuKiBsZXQgZnVsbDogQUlNZXNzYWdlQ2h1bmsgfCB1bmRlZmluZWQ7XG4qIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2Ygc3RyZWFtKSB7XG4qICAgZnVsbCA9ICFmdWxsID8gY2h1bmsgOiBjb25jYXQoZnVsbCwgY2h1bmspO1xuKiB9XG4qIGNvbnNvbGUubG9nKGZ1bGwpO1xuKiBgYGBcbipcbiogYGBgdHh0XG4qIEFJTWVzc2FnZUNodW5rIHtcbiogICBcImNvbnRlbnRcIjogXCJUaGVyZSBhcmUgYSBmZXcgd2F5cyB0byB0cmFuc2xhdGUgXFxcIkkgbG92ZSBwcm9ncmFtbWluZ1xcXCIgaW50byBGcmVuY2gsIGRlcGVuZGluZyBvbiB0aGUgbGV2ZWwgb2YgZm9ybWFsaXR5IGFuZCBudWFuY2UgeW91IHdhbnQgdG8gY29udmV5OlxcblxcbioqRm9ybWFsOioqXFxuXFxuKiAqKkonYWltZSBsYSBwcm9ncmFtbWF0aW9uLioqIChUaGlzIGlzIHRoZSBtb3N0IGxpdGVyYWwgYW5kIGZvcm1hbCB0cmFuc2xhdGlvbi4pXFxuXFxuKipJbmZvcm1hbDoqKlxcblxcbiogKipKJ2Fkb3JlIHByb2dyYW1tZXIuKiogKFRoaXMgaXMgYSBtb3JlIGVudGh1c2lhc3RpYyBhbmQgaW5mb3JtYWwgdHJhbnNsYXRpb24uKVxcbiogKipKJ2FpbWUgYmVhdWNvdXAgcHJvZ3JhbW1lci4qKiAoVGhpcyBpcyBhIHNsaWdodGx5IGxlc3MgZW50aHVzaWFzdGljIGJ1dCBzdGlsbCBpbmZvcm1hbCB0cmFuc2xhdGlvbi4pXFxuXFxuKipNb3JlIHNwZWNpZmljOioqXFxuXFxuKiAqKkonYWltZSBiZWF1Y291cCBjb2Rlci4qKiAoVGhpcyBzcGVjaWZpY2FsbHkgcmVmZXJzIHRvIHdyaXRpbmcgY29kZS4pXFxuKiAqKkonYWltZSBiZWF1Y291cCBkw6l2ZWxvcHBlciBkZXMgbG9naWNpZWxzLioqIChUaGlzIHNwZWNpZmljYWxseSByZWZlcnMgdG8gZGV2ZWxvcGluZyBzb2Z0d2FyZS4pXFxuXFxuVGhlIGJlc3QgdHJhbnNsYXRpb24gd2lsbCBkZXBlbmQgb24gdGhlIGNvbnRleHQgYW5kIHlvdXIgaW50ZW5kZWQgYXVkaWVuY2UuIFxcblwiLFxuKiAgIFwidXNhZ2VfbWV0YWRhdGFcIjoge1xuKiAgICAgXCJpbnB1dF90b2tlbnNcIjogMTAsXG4qICAgICBcIm91dHB1dF90b2tlbnNcIjogMjc3LFxuKiAgICAgXCJ0b3RhbF90b2tlbnNcIjogMjg3XG4qICAgfVxuKiB9XG4qIGBgYFxuKiA8L2RldGFpbHM+XG4qXG4qIDxiciAvPlxuKlxuKiA8ZGV0YWlscz5cbiogPHN1bW1hcnk+PHN0cm9uZz5CaW5kIHRvb2xzPC9zdHJvbmc+PC9zdW1tYXJ5PlxuKlxuKiBgYGB0eXBlc2NyaXB0XG4qIGltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuKlxuKiBjb25zdCBHZXRXZWF0aGVyID0ge1xuKiAgIG5hbWU6IFwiR2V0V2VhdGhlclwiLFxuKiAgIGRlc2NyaXB0aW9uOiBcIkdldCB0aGUgY3VycmVudCB3ZWF0aGVyIGluIGEgZ2l2ZW4gbG9jYXRpb25cIixcbiogICBzY2hlbWE6IHoub2JqZWN0KHtcbiogICAgIGxvY2F0aW9uOiB6LnN0cmluZygpLmRlc2NyaWJlKFwiVGhlIGNpdHkgYW5kIHN0YXRlLCBlLmcuIFNhbiBGcmFuY2lzY28sIENBXCIpXG4qICAgfSksXG4qIH1cbipcbiogY29uc3QgR2V0UG9wdWxhdGlvbiA9IHtcbiogICBuYW1lOiBcIkdldFBvcHVsYXRpb25cIixcbiogICBkZXNjcmlwdGlvbjogXCJHZXQgdGhlIGN1cnJlbnQgcG9wdWxhdGlvbiBpbiBhIGdpdmVuIGxvY2F0aW9uXCIsXG4qICAgc2NoZW1hOiB6Lm9iamVjdCh7XG4qICAgICBsb2NhdGlvbjogei5zdHJpbmcoKS5kZXNjcmliZShcIlRoZSBjaXR5IGFuZCBzdGF0ZSwgZS5nLiBTYW4gRnJhbmNpc2NvLCBDQVwiKVxuKiAgIH0pLFxuKiB9XG4qXG4qIGNvbnN0IGxsbVdpdGhUb29scyA9IGxsbS5iaW5kVG9vbHMoW0dldFdlYXRoZXIsIEdldFBvcHVsYXRpb25dKTtcbiogY29uc3QgYWlNc2cgPSBhd2FpdCBsbG1XaXRoVG9vbHMuaW52b2tlKFxuKiAgIFwiV2hpY2ggY2l0eSBpcyBob3R0ZXIgdG9kYXkgYW5kIHdoaWNoIGlzIGJpZ2dlcjogTEEgb3IgTlk/XCJcbiogKTtcbiogY29uc29sZS5sb2coYWlNc2cudG9vbF9jYWxscyk7XG4qIGBgYFxuKlxuKiBgYGB0eHRcbiogW1xuKiAgIHtcbiogICAgIG5hbWU6ICdHZXRXZWF0aGVyJyxcbiogICAgIGFyZ3M6IHsgbG9jYXRpb246ICdMb3MgQW5nZWxlcywgQ0EnIH0sXG4qICAgICB0eXBlOiAndG9vbF9jYWxsJ1xuKiAgIH0sXG4qICAge1xuKiAgICAgbmFtZTogJ0dldFdlYXRoZXInLFxuKiAgICAgYXJnczogeyBsb2NhdGlvbjogJ05ldyBZb3JrLCBOWScgfSxcbiogICAgIHR5cGU6ICd0b29sX2NhbGwnXG4qICAgfSxcbiogICB7XG4qICAgICBuYW1lOiAnR2V0UG9wdWxhdGlvbicsXG4qICAgICBhcmdzOiB7IGxvY2F0aW9uOiAnTG9zIEFuZ2VsZXMsIENBJyB9LFxuKiAgICAgdHlwZTogJ3Rvb2xfY2FsbCdcbiogICB9LFxuKiAgIHtcbiogICAgIG5hbWU6ICdHZXRQb3B1bGF0aW9uJyxcbiogICAgIGFyZ3M6IHsgbG9jYXRpb246ICdOZXcgWW9yaywgTlknIH0sXG4qICAgICB0eXBlOiAndG9vbF9jYWxsJ1xuKiAgIH1cbiogXVxuKiBgYGBcbiogPC9kZXRhaWxzPlxuKlxuKiA8YnIgLz5cbipcbiogPGRldGFpbHM+XG4qIDxzdW1tYXJ5PjxzdHJvbmc+U3RydWN0dXJlZCBPdXRwdXQ8L3N0cm9uZz48L3N1bW1hcnk+XG4qXG4qIGBgYHR5cGVzY3JpcHRcbiogY29uc3QgSm9rZSA9IHoub2JqZWN0KHtcbiogICBzZXR1cDogei5zdHJpbmcoKS5kZXNjcmliZShcIlRoZSBzZXR1cCBvZiB0aGUgam9rZVwiKSxcbiogICBwdW5jaGxpbmU6IHouc3RyaW5nKCkuZGVzY3JpYmUoXCJUaGUgcHVuY2hsaW5lIHRvIHRoZSBqb2tlXCIpLFxuKiAgIHJhdGluZzogei5udW1iZXIoKS5vcHRpb25hbCgpLmRlc2NyaWJlKFwiSG93IGZ1bm55IHRoZSBqb2tlIGlzLCBmcm9tIDEgdG8gMTBcIilcbiogfSkuZGVzY3JpYmUoJ0pva2UgdG8gdGVsbCB1c2VyLicpO1xuKlxuKiBjb25zdCBzdHJ1Y3R1cmVkTGxtID0gbGxtLndpdGhTdHJ1Y3R1cmVkT3V0cHV0KEpva2UsIHsgbmFtZTogXCJKb2tlXCIgfSk7XG4qIGNvbnN0IGpva2VSZXN1bHQgPSBhd2FpdCBzdHJ1Y3R1cmVkTGxtLmludm9rZShcIlRlbGwgbWUgYSBqb2tlIGFib3V0IGNhdHNcIik7XG4qIGNvbnNvbGUubG9nKGpva2VSZXN1bHQpO1xuKiBgYGBcbipcbiogYGBgdHh0XG4qIHtcbiogICBzZXR1cDogXCJXaHkgZG9uXFxcXCd0IGNhdHMgcGxheSBwb2tlcj9cIixcbiogICBwdW5jaGxpbmU6IFwiV2h5IGRvblxcXFwndCBjYXRzIHBsYXkgcG9rZXI/IEJlY2F1c2UgdGhleSBhbHdheXMgaGF2ZSBhbiBhY2UgdXAgdGhlaXIgc2xlZXZlIVwiXG4qIH1cbiogYGBgXG4qIDwvZGV0YWlscz5cbipcbiogPGJyIC8+XG4qXG4qIDxkZXRhaWxzPlxuKiA8c3VtbWFyeT48c3Ryb25nPk11bHRpbW9kYWw8L3N0cm9uZz48L3N1bW1hcnk+XG4qXG4qIGBgYHR5cGVzY3JpcHRcbiogaW1wb3J0IHsgSHVtYW5NZXNzYWdlIH0gZnJvbSAnQGxhbmdjaGFpbi9jb3JlL21lc3NhZ2VzJztcbipcbiogY29uc3QgaW1hZ2VVcmwgPSBcImh0dHBzOi8vZXhhbXBsZS5jb20vaW1hZ2UuanBnXCI7XG4qIGNvbnN0IGltYWdlRGF0YSA9IGF3YWl0IGZldGNoKGltYWdlVXJsKS50aGVuKHJlcyA9PiByZXMuYXJyYXlCdWZmZXIoKSk7XG4qIGNvbnN0IGJhc2U2NEltYWdlID0gQnVmZmVyLmZyb20oaW1hZ2VEYXRhKS50b1N0cmluZygnYmFzZTY0Jyk7XG4qXG4qIGNvbnN0IG1lc3NhZ2UgPSBuZXcgSHVtYW5NZXNzYWdlKHtcbiogICBjb250ZW50OiBbXG4qICAgICB7IHR5cGU6IFwidGV4dFwiLCB0ZXh0OiBcImRlc2NyaWJlIHRoZSB3ZWF0aGVyIGluIHRoaXMgaW1hZ2VcIiB9LFxuKiAgICAge1xuKiAgICAgICB0eXBlOiBcImltYWdlX3VybFwiLFxuKiAgICAgICBpbWFnZV91cmw6IHsgdXJsOiBgZGF0YTppbWFnZS9qcGVnO2Jhc2U2NCwke2Jhc2U2NEltYWdlfWAgfSxcbiogICAgIH0sXG4qICAgXVxuKiB9KTtcbipcbiogY29uc3QgaW1hZ2VEZXNjcmlwdGlvbkFpTXNnID0gYXdhaXQgbGxtLmludm9rZShbbWVzc2FnZV0pO1xuKiBjb25zb2xlLmxvZyhpbWFnZURlc2NyaXB0aW9uQWlNc2cuY29udGVudCk7XG4qIGBgYFxuKlxuKiBgYGB0eHRcbiogVGhlIHdlYXRoZXIgaW4gdGhlIGltYWdlIGFwcGVhcnMgdG8gYmUgY2xlYXIgYW5kIHN1bm55LiBUaGUgc2t5IGlzIG1vc3RseSBibHVlIHdpdGggYSBmZXcgc2NhdHRlcmVkIHdoaXRlIGNsb3VkcywgaW5kaWNhdGluZyBmYWlyIHdlYXRoZXIuIFRoZSBicmlnaHQgc3VubGlnaHQgaXMgY2FzdGluZyBzaGFkb3dzIG9uIHRoZSBncmVlbiwgZ3Jhc3N5IGhpbGwsIHN1Z2dlc3RpbmcgaXQgaXMgYSBwbGVhc2FudCBkYXkgd2l0aCBnb29kIHZpc2liaWxpdHkuIFRoZXJlIGFyZSBubyBzaWducyBvZiByYWluIG9yIHN0b3JteSBjb25kaXRpb25zLlxuKiBgYGBcbiogPC9kZXRhaWxzPlxuKlxuKiA8YnIgLz5cbipcbiogPGRldGFpbHM+XG4qIDxzdW1tYXJ5PjxzdHJvbmc+VXNhZ2UgTWV0YWRhdGE8L3N0cm9uZz48L3N1bW1hcnk+XG4qXG4qIGBgYHR5cGVzY3JpcHRcbiogY29uc3QgYWlNc2dGb3JNZXRhZGF0YSA9IGF3YWl0IGxsbS5pbnZva2UoaW5wdXQpO1xuKiBjb25zb2xlLmxvZyhhaU1zZ0Zvck1ldGFkYXRhLnVzYWdlX21ldGFkYXRhKTtcbiogYGBgXG4qXG4qIGBgYHR4dFxuKiB7IGlucHV0X3Rva2VuczogMTAsIG91dHB1dF90b2tlbnM6IDE0OSwgdG90YWxfdG9rZW5zOiAxNTkgfVxuKiBgYGBcbiogPC9kZXRhaWxzPlxuKlxuKiA8YnIgLz5cbipcbiogPGRldGFpbHM+XG4qIDxzdW1tYXJ5PjxzdHJvbmc+UmVzcG9uc2UgTWV0YWRhdGE8L3N0cm9uZz48L3N1bW1hcnk+XG4qXG4qIGBgYHR5cGVzY3JpcHRcbiogY29uc3QgYWlNc2dGb3JSZXNwb25zZU1ldGFkYXRhID0gYXdhaXQgbGxtLmludm9rZShpbnB1dCk7XG4qIGNvbnNvbGUubG9nKGFpTXNnRm9yUmVzcG9uc2VNZXRhZGF0YS5yZXNwb25zZV9tZXRhZGF0YSk7XG4qIGBgYFxuKlxuKiBgYGB0eHRcbioge1xuKiAgIGZpbmlzaFJlYXNvbjogJ1NUT1AnLFxuKiAgIGluZGV4OiAwLFxuKiAgIHNhZmV0eVJhdGluZ3M6IFtcbiogICAgIHtcbiogICAgICAgY2F0ZWdvcnk6ICdIQVJNX0NBVEVHT1JZX1NFWFVBTExZX0VYUExJQ0lUJyxcbiogICAgICAgcHJvYmFiaWxpdHk6ICdORUdMSUdJQkxFJ1xuKiAgICAgfSxcbiogICAgIHtcbiogICAgICAgY2F0ZWdvcnk6ICdIQVJNX0NBVEVHT1JZX0hBVEVfU1BFRUNIJyxcbiogICAgICAgcHJvYmFiaWxpdHk6ICdORUdMSUdJQkxFJ1xuKiAgICAgfSxcbiogICAgIHsgY2F0ZWdvcnk6ICdIQVJNX0NBVEVHT1JZX0hBUkFTU01FTlQnLCBwcm9iYWJpbGl0eTogJ05FR0xJR0lCTEUnIH0sXG4qICAgICB7XG4qICAgICAgIGNhdGVnb3J5OiAnSEFSTV9DQVRFR09SWV9EQU5HRVJPVVNfQ09OVEVOVCcsXG4qICAgICAgIHByb2JhYmlsaXR5OiAnTkVHTElHSUJMRSdcbiogICAgIH1cbiogICBdXG4qIH1cbiogYGBgXG4qIDwvZGV0YWlscz5cbipcbiogPGJyIC8+XG4qXG4qIDxkZXRhaWxzPlxuKiA8c3VtbWFyeT48c3Ryb25nPkRvY3VtZW50IE1lc3NhZ2VzPC9zdHJvbmc+PC9zdW1tYXJ5PlxuKlxuKiBUaGlzIGV4YW1wbGUgd2lsbCBzaG93IHlvdSBob3cgdG8gcGFzcyBkb2N1bWVudHMgc3VjaCBhcyBQREZzIHRvIEdvb2dsZVxuKiBHZW5lcmF0aXZlIEFJIHRocm91Z2ggbWVzc2FnZXMuXG4qXG4qIGBgYHR5cGVzY3JpcHRcbiogY29uc3QgcGRmUGF0aCA9IFwiL1VzZXJzL215X3VzZXIvRG93bmxvYWRzL2ludm9pY2UucGRmXCI7XG4qIGNvbnN0IHBkZkJhc2U2NCA9IGF3YWl0IGZzLnJlYWRGaWxlKHBkZlBhdGgsIFwiYmFzZTY0XCIpO1xuKlxuKiBjb25zdCByZXNwb25zZSA9IGF3YWl0IGxsbS5pbnZva2UoW1xuKiAgIFtcInN5c3RlbVwiLCBcIlVzZSB0aGUgcHJvdmlkZWQgZG9jdW1lbnRzIHRvIGFuc3dlciB0aGUgcXVlc3Rpb25cIl0sXG4qICAgW1xuKiAgICAgXCJ1c2VyXCIsXG4qICAgICBbXG4qICAgICAgIHtcbiogICAgICAgICB0eXBlOiBcImFwcGxpY2F0aW9uL3BkZlwiLCAvLyBJZiB0aGUgYHR5cGVgIGZpZWxkIGluY2x1ZGVzIGEgc2luZ2xlIHNsYXNoIChgL2ApLCBpdCB3aWxsIGJlIHRyZWF0ZWQgYXMgaW5saW5lIGRhdGEuXG4qICAgICAgICAgZGF0YTogcGRmQmFzZTY0LFxuKiAgICAgICB9LFxuKiAgICAgICB7XG4qICAgICAgICAgdHlwZTogXCJ0ZXh0XCIsXG4qICAgICAgICAgdGV4dDogXCJTdW1tYXJpemUgdGhlIGNvbnRlbnRzIG9mIHRoaXMgUERGXCIsXG4qICAgICAgIH0sXG4qICAgICBdLFxuKiAgIF0sXG4qIF0pO1xuKlxuKiBjb25zb2xlLmxvZyhyZXNwb25zZS5jb250ZW50KTtcbiogYGBgXG4qXG4qIGBgYHR4dFxuKiBUaGlzIGlzIGEgYmlsbGluZyBpbnZvaWNlIGZyb20gVHdpdHRlciBEZXZlbG9wZXJzIGZvciBYIEFQSSBCYXNpYyBBY2Nlc3MuIFRoZSB0cmFuc2FjdGlvbiBkYXRlIGlzIEphbnVhcnkgNywgMjAyNSxcbiogYW5kIHRoZSBhbW91bnQgaXMgJDE5NC4zNCwgd2hpY2ggaGFzIGJlZW4gcGFpZC4gVGhlIHN1YnNjcmlwdGlvbiBwZXJpb2QgaXMgZnJvbSBKYW51YXJ5IDcsIDIwMjUgMjE6MDIgdG8gRmVicnVhcnkgNywgMjAyNSAwMDowMCAoVVRDKS5cbiogVGhlIHRheCBpcyAkMC4wMCwgd2l0aCBhIHRheCByYXRlIG9mIDAlLiBUaGUgdG90YWwgYW1vdW50IGlzICQxOTQuMzQuIFRoZSBwYXltZW50IHdhcyBtYWRlIHVzaW5nIGEgVmlzYSBjYXJkIGVuZGluZyBpbiA3MDIyLFxuKiBleHBpcmluZyBpbiAxMi8yMDI2LiBUaGUgYmlsbGluZyBhZGRyZXNzIGlzIEJyYWNlIFNwcm91bCwgMTIzNCBNYWluIFN0cmVldCwgU2FuIEZyYW5jaXNjbywgQ0EsIFVTIDk0MTAzLiBUaGUgY29tcGFueSBiZWluZyBiaWxsZWQgaXNcbiogWCBDb3JwLCBsb2NhdGVkIGF0IDg2NSBGTSAxMjA5IEJ1aWxkaW5nIDIsIEJhc3Ryb3AsIFRYLCBVUyA3ODYwMi4gVGVybXMgYW5kIGNvbmRpdGlvbnMgYXBwbHkuXG4qIGBgYFxuKiA8L2RldGFpbHM+XG4qXG4qIDxiciAvPlxuKi9cbnZhciBDaGF0R29vZ2xlR2VuZXJhdGl2ZUFJID0gY2xhc3MgZXh0ZW5kcyBCYXNlQ2hhdE1vZGVsIHtcblx0c3RhdGljIGxjX25hbWUoKSB7XG5cdFx0cmV0dXJuIFwiQ2hhdEdvb2dsZUdlbmVyYXRpdmVBSVwiO1xuXHR9XG5cdGxjX3NlcmlhbGl6YWJsZSA9IHRydWU7XG5cdGdldCBsY19zZWNyZXRzKCkge1xuXHRcdHJldHVybiB7IGFwaUtleTogXCJHT09HTEVfQVBJX0tFWVwiIH07XG5cdH1cblx0bGNfbmFtZXNwYWNlID0gW1xuXHRcdFwibGFuZ2NoYWluXCIsXG5cdFx0XCJjaGF0X21vZGVsc1wiLFxuXHRcdFwiZ29vZ2xlX2dlbmFpXCJcblx0XTtcblx0Z2V0IGxjX2FsaWFzZXMoKSB7XG5cdFx0cmV0dXJuIHsgYXBpS2V5OiBcImdvb2dsZV9hcGlfa2V5XCIgfTtcblx0fVxuXHRtb2RlbDtcblx0dGVtcGVyYXR1cmU7XG5cdG1heE91dHB1dFRva2Vucztcblx0dG9wUDtcblx0dG9wSztcblx0c3RvcFNlcXVlbmNlcyA9IFtdO1xuXHRzYWZldHlTZXR0aW5ncztcblx0YXBpS2V5O1xuXHRzdHJlYW1pbmcgPSBmYWxzZTtcblx0anNvbjtcblx0c3RyZWFtVXNhZ2UgPSB0cnVlO1xuXHRjb252ZXJ0U3lzdGVtTWVzc2FnZVRvSHVtYW5Db250ZW50O1xuXHRjbGllbnQ7XG5cdGdldCBfaXNNdWx0aW1vZGFsTW9kZWwoKSB7XG5cdFx0cmV0dXJuIHRoaXMubW9kZWwuaW5jbHVkZXMoXCJ2aXNpb25cIikgfHwgdGhpcy5tb2RlbC5zdGFydHNXaXRoKFwiZ2VtaW5pLTEuNVwiKSB8fCB0aGlzLm1vZGVsLnN0YXJ0c1dpdGgoXCJnZW1pbmktMlwiKSB8fCB0aGlzLm1vZGVsLnN0YXJ0c1dpdGgoXCJnZW1tYS0zLVwiKSAmJiAhdGhpcy5tb2RlbC5zdGFydHNXaXRoKFwiZ2VtbWEtMy0xYlwiKTtcblx0fVxuXHRjb25zdHJ1Y3RvcihmaWVsZHMpIHtcblx0XHRzdXBlcihmaWVsZHMpO1xuXHRcdHRoaXMubW9kZWwgPSBmaWVsZHMubW9kZWwucmVwbGFjZSgvXm1vZGVsc1xcLy8sIFwiXCIpO1xuXHRcdHRoaXMubWF4T3V0cHV0VG9rZW5zID0gZmllbGRzLm1heE91dHB1dFRva2VucyA/PyB0aGlzLm1heE91dHB1dFRva2Vucztcblx0XHRpZiAodGhpcy5tYXhPdXRwdXRUb2tlbnMgJiYgdGhpcy5tYXhPdXRwdXRUb2tlbnMgPCAwKSB0aHJvdyBuZXcgRXJyb3IoXCJgbWF4T3V0cHV0VG9rZW5zYCBtdXN0IGJlIGEgcG9zaXRpdmUgaW50ZWdlclwiKTtcblx0XHR0aGlzLnRlbXBlcmF0dXJlID0gZmllbGRzLnRlbXBlcmF0dXJlID8/IHRoaXMudGVtcGVyYXR1cmU7XG5cdFx0aWYgKHRoaXMudGVtcGVyYXR1cmUgJiYgKHRoaXMudGVtcGVyYXR1cmUgPCAwIHx8IHRoaXMudGVtcGVyYXR1cmUgPiAyKSkgdGhyb3cgbmV3IEVycm9yKFwiYHRlbXBlcmF0dXJlYCBtdXN0IGJlIGluIHRoZSByYW5nZSBvZiBbMC4wLDIuMF1cIik7XG5cdFx0dGhpcy50b3BQID0gZmllbGRzLnRvcFAgPz8gdGhpcy50b3BQO1xuXHRcdGlmICh0aGlzLnRvcFAgJiYgdGhpcy50b3BQIDwgMCkgdGhyb3cgbmV3IEVycm9yKFwiYHRvcFBgIG11c3QgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyXCIpO1xuXHRcdGlmICh0aGlzLnRvcFAgJiYgdGhpcy50b3BQID4gMSkgdGhyb3cgbmV3IEVycm9yKFwiYHRvcFBgIG11c3QgYmUgYmVsb3cgMS5cIik7XG5cdFx0dGhpcy50b3BLID0gZmllbGRzLnRvcEsgPz8gdGhpcy50b3BLO1xuXHRcdGlmICh0aGlzLnRvcEsgJiYgdGhpcy50b3BLIDwgMCkgdGhyb3cgbmV3IEVycm9yKFwiYHRvcEtgIG11c3QgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyXCIpO1xuXHRcdHRoaXMuc3RvcFNlcXVlbmNlcyA9IGZpZWxkcy5zdG9wU2VxdWVuY2VzID8/IHRoaXMuc3RvcFNlcXVlbmNlcztcblx0XHR0aGlzLmFwaUtleSA9IGZpZWxkcy5hcGlLZXkgPz8gZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkdPT0dMRV9BUElfS0VZXCIpO1xuXHRcdGlmICghdGhpcy5hcGlLZXkpIHRocm93IG5ldyBFcnJvcihcIlBsZWFzZSBzZXQgYW4gQVBJIGtleSBmb3IgR29vZ2xlIEdlbmVyYXRpdmVBSSBpbiB0aGUgZW52aXJvbm1lbnQgdmFyaWFibGUgR09PR0xFX0FQSV9LRVkgb3IgaW4gdGhlIGBhcGlLZXlgIGZpZWxkIG9mIHRoZSBDaGF0R29vZ2xlR2VuZXJhdGl2ZUFJIGNvbnN0cnVjdG9yXCIpO1xuXHRcdHRoaXMuc2FmZXR5U2V0dGluZ3MgPSBmaWVsZHMuc2FmZXR5U2V0dGluZ3MgPz8gdGhpcy5zYWZldHlTZXR0aW5ncztcblx0XHRpZiAodGhpcy5zYWZldHlTZXR0aW5ncyAmJiB0aGlzLnNhZmV0eVNldHRpbmdzLmxlbmd0aCA+IDApIHtcblx0XHRcdGNvbnN0IHNhZmV0eVNldHRpbmdzU2V0ID0gbmV3IFNldCh0aGlzLnNhZmV0eVNldHRpbmdzLm1hcCgocykgPT4gcy5jYXRlZ29yeSkpO1xuXHRcdFx0aWYgKHNhZmV0eVNldHRpbmdzU2V0LnNpemUgIT09IHRoaXMuc2FmZXR5U2V0dGluZ3MubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgY2F0ZWdvcmllcyBpbiBgc2FmZXR5U2V0dGluZ3NgIGFycmF5IG11c3QgYmUgdW5pcXVlXCIpO1xuXHRcdH1cblx0XHR0aGlzLnN0cmVhbWluZyA9IGZpZWxkcy5zdHJlYW1pbmcgPz8gdGhpcy5zdHJlYW1pbmc7XG5cdFx0dGhpcy5qc29uID0gZmllbGRzLmpzb247XG5cdFx0dGhpcy5jbGllbnQgPSBuZXcgR29vZ2xlR2VuZXJhdGl2ZUFJKHRoaXMuYXBpS2V5KS5nZXRHZW5lcmF0aXZlTW9kZWwoe1xuXHRcdFx0bW9kZWw6IHRoaXMubW9kZWwsXG5cdFx0XHRzYWZldHlTZXR0aW5nczogdGhpcy5zYWZldHlTZXR0aW5ncyxcblx0XHRcdGdlbmVyYXRpb25Db25maWc6IHtcblx0XHRcdFx0c3RvcFNlcXVlbmNlczogdGhpcy5zdG9wU2VxdWVuY2VzLFxuXHRcdFx0XHRtYXhPdXRwdXRUb2tlbnM6IHRoaXMubWF4T3V0cHV0VG9rZW5zLFxuXHRcdFx0XHR0ZW1wZXJhdHVyZTogdGhpcy50ZW1wZXJhdHVyZSxcblx0XHRcdFx0dG9wUDogdGhpcy50b3BQLFxuXHRcdFx0XHR0b3BLOiB0aGlzLnRvcEssXG5cdFx0XHRcdC4uLnRoaXMuanNvbiA/IHsgcmVzcG9uc2VNaW1lVHlwZTogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSA6IHt9XG5cdFx0XHR9XG5cdFx0fSwge1xuXHRcdFx0YXBpVmVyc2lvbjogZmllbGRzLmFwaVZlcnNpb24sXG5cdFx0XHRiYXNlVXJsOiBmaWVsZHMuYmFzZVVybFxuXHRcdH0pO1xuXHRcdHRoaXMuc3RyZWFtVXNhZ2UgPSBmaWVsZHMuc3RyZWFtVXNhZ2UgPz8gdGhpcy5zdHJlYW1Vc2FnZTtcblx0fVxuXHR1c2VDYWNoZWRDb250ZW50KGNhY2hlZENvbnRlbnQsIG1vZGVsUGFyYW1zLCByZXF1ZXN0T3B0aW9ucykge1xuXHRcdGlmICghdGhpcy5hcGlLZXkpIHJldHVybjtcblx0XHR0aGlzLmNsaWVudCA9IG5ldyBHb29nbGVHZW5lcmF0aXZlQUkodGhpcy5hcGlLZXkpLmdldEdlbmVyYXRpdmVNb2RlbEZyb21DYWNoZWRDb250ZW50KGNhY2hlZENvbnRlbnQsIG1vZGVsUGFyYW1zLCByZXF1ZXN0T3B0aW9ucyk7XG5cdH1cblx0Z2V0IHVzZVN5c3RlbUluc3RydWN0aW9uKCkge1xuXHRcdHJldHVybiB0eXBlb2YgdGhpcy5jb252ZXJ0U3lzdGVtTWVzc2FnZVRvSHVtYW5Db250ZW50ID09PSBcImJvb2xlYW5cIiA/ICF0aGlzLmNvbnZlcnRTeXN0ZW1NZXNzYWdlVG9IdW1hbkNvbnRlbnQgOiB0aGlzLmNvbXB1dGVVc2VTeXN0ZW1JbnN0cnVjdGlvbjtcblx0fVxuXHRnZXQgY29tcHV0ZVVzZVN5c3RlbUluc3RydWN0aW9uKCkge1xuXHRcdGlmICh0aGlzLm1vZGVsID09PSBcImdlbWluaS0xLjAtcHJvLTAwMVwiKSByZXR1cm4gZmFsc2U7XG5cdFx0ZWxzZSBpZiAodGhpcy5tb2RlbC5zdGFydHNXaXRoKFwiZ2VtaW5pLXByby12aXNpb25cIikpIHJldHVybiBmYWxzZTtcblx0XHRlbHNlIGlmICh0aGlzLm1vZGVsLnN0YXJ0c1dpdGgoXCJnZW1pbmktMS4wLXByby12aXNpb25cIikpIHJldHVybiBmYWxzZTtcblx0XHRlbHNlIGlmICh0aGlzLm1vZGVsID09PSBcImdlbWluaS1wcm9cIikgcmV0dXJuIGZhbHNlO1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cdGdldExzUGFyYW1zKG9wdGlvbnMpIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0bHNfcHJvdmlkZXI6IFwiZ29vZ2xlX2dlbmFpXCIsXG5cdFx0XHRsc19tb2RlbF9uYW1lOiB0aGlzLm1vZGVsLFxuXHRcdFx0bHNfbW9kZWxfdHlwZTogXCJjaGF0XCIsXG5cdFx0XHRsc190ZW1wZXJhdHVyZTogdGhpcy5jbGllbnQuZ2VuZXJhdGlvbkNvbmZpZy50ZW1wZXJhdHVyZSxcblx0XHRcdGxzX21heF90b2tlbnM6IHRoaXMuY2xpZW50LmdlbmVyYXRpb25Db25maWcubWF4T3V0cHV0VG9rZW5zLFxuXHRcdFx0bHNfc3RvcDogb3B0aW9ucy5zdG9wXG5cdFx0fTtcblx0fVxuXHRfY29tYmluZUxMTU91dHB1dCgpIHtcblx0XHRyZXR1cm4gW107XG5cdH1cblx0X2xsbVR5cGUoKSB7XG5cdFx0cmV0dXJuIFwiZ29vZ2xlZ2VuZXJhdGl2ZWFpXCI7XG5cdH1cblx0YmluZFRvb2xzKHRvb2xzLCBrd2FyZ3MpIHtcblx0XHRyZXR1cm4gdGhpcy53aXRoQ29uZmlnKHtcblx0XHRcdHRvb2xzOiBjb252ZXJ0VG9vbHNUb0dlbkFJKHRvb2xzKT8udG9vbHMsXG5cdFx0XHQuLi5rd2FyZ3Ncblx0XHR9KTtcblx0fVxuXHRpbnZvY2F0aW9uUGFyYW1zKG9wdGlvbnMpIHtcblx0XHRjb25zdCB0b29sc0FuZENvbmZpZyA9IG9wdGlvbnM/LnRvb2xzPy5sZW5ndGggPyBjb252ZXJ0VG9vbHNUb0dlbkFJKG9wdGlvbnMudG9vbHMsIHtcblx0XHRcdHRvb2xDaG9pY2U6IG9wdGlvbnMudG9vbF9jaG9pY2UsXG5cdFx0XHRhbGxvd2VkRnVuY3Rpb25OYW1lczogb3B0aW9ucy5hbGxvd2VkRnVuY3Rpb25OYW1lc1xuXHRcdH0pIDogdm9pZCAwO1xuXHRcdGlmIChvcHRpb25zPy5yZXNwb25zZVNjaGVtYSkge1xuXHRcdFx0dGhpcy5jbGllbnQuZ2VuZXJhdGlvbkNvbmZpZy5yZXNwb25zZVNjaGVtYSA9IG9wdGlvbnMucmVzcG9uc2VTY2hlbWE7XG5cdFx0XHR0aGlzLmNsaWVudC5nZW5lcmF0aW9uQ29uZmlnLnJlc3BvbnNlTWltZVR5cGUgPSBcImFwcGxpY2F0aW9uL2pzb25cIjtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5jbGllbnQuZ2VuZXJhdGlvbkNvbmZpZy5yZXNwb25zZVNjaGVtYSA9IHZvaWQgMDtcblx0XHRcdHRoaXMuY2xpZW50LmdlbmVyYXRpb25Db25maWcucmVzcG9uc2VNaW1lVHlwZSA9IHRoaXMuanNvbiA/IFwiYXBwbGljYXRpb24vanNvblwiIDogdm9pZCAwO1xuXHRcdH1cblx0XHRyZXR1cm4ge1xuXHRcdFx0Li4udG9vbHNBbmRDb25maWc/LnRvb2xzID8geyB0b29sczogdG9vbHNBbmRDb25maWcudG9vbHMgfSA6IHt9LFxuXHRcdFx0Li4udG9vbHNBbmRDb25maWc/LnRvb2xDb25maWcgPyB7IHRvb2xDb25maWc6IHRvb2xzQW5kQ29uZmlnLnRvb2xDb25maWcgfSA6IHt9XG5cdFx0fTtcblx0fVxuXHRhc3luYyBfZ2VuZXJhdGUobWVzc2FnZXMsIG9wdGlvbnMsIHJ1bk1hbmFnZXIpIHtcblx0XHRjb25zdCBwcm9tcHQgPSBjb252ZXJ0QmFzZU1lc3NhZ2VzVG9Db250ZW50KG1lc3NhZ2VzLCB0aGlzLl9pc011bHRpbW9kYWxNb2RlbCwgdGhpcy51c2VTeXN0ZW1JbnN0cnVjdGlvbik7XG5cdFx0bGV0IGFjdHVhbFByb21wdCA9IHByb21wdDtcblx0XHRpZiAocHJvbXB0WzBdLnJvbGUgPT09IFwic3lzdGVtXCIpIHtcblx0XHRcdGNvbnN0IFtzeXN0ZW1JbnN0cnVjdGlvbl0gPSBwcm9tcHQ7XG5cdFx0XHR0aGlzLmNsaWVudC5zeXN0ZW1JbnN0cnVjdGlvbiA9IHN5c3RlbUluc3RydWN0aW9uO1xuXHRcdFx0YWN0dWFsUHJvbXB0ID0gcHJvbXB0LnNsaWNlKDEpO1xuXHRcdH1cblx0XHRjb25zdCBwYXJhbWV0ZXJzID0gdGhpcy5pbnZvY2F0aW9uUGFyYW1zKG9wdGlvbnMpO1xuXHRcdGlmICh0aGlzLnN0cmVhbWluZykge1xuXHRcdFx0Y29uc3QgdG9rZW5Vc2FnZSA9IHt9O1xuXHRcdFx0Y29uc3Qgc3RyZWFtID0gdGhpcy5fc3RyZWFtUmVzcG9uc2VDaHVua3MobWVzc2FnZXMsIG9wdGlvbnMsIHJ1bk1hbmFnZXIpO1xuXHRcdFx0Y29uc3QgZmluYWxDaHVua3MgPSB7fTtcblx0XHRcdGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2Ygc3RyZWFtKSB7XG5cdFx0XHRcdGNvbnN0IGluZGV4ID0gY2h1bmsuZ2VuZXJhdGlvbkluZm8/LmNvbXBsZXRpb24gPz8gMDtcblx0XHRcdFx0aWYgKGZpbmFsQ2h1bmtzW2luZGV4XSA9PT0gdm9pZCAwKSBmaW5hbENodW5rc1tpbmRleF0gPSBjaHVuaztcblx0XHRcdFx0ZWxzZSBmaW5hbENodW5rc1tpbmRleF0gPSBmaW5hbENodW5rc1tpbmRleF0uY29uY2F0KGNodW5rKTtcblx0XHRcdH1cblx0XHRcdGNvbnN0IGdlbmVyYXRpb25zID0gT2JqZWN0LmVudHJpZXMoZmluYWxDaHVua3MpLnNvcnQoKFthS2V5XSwgW2JLZXldKSA9PiBwYXJzZUludChhS2V5LCAxMCkgLSBwYXJzZUludChiS2V5LCAxMCkpLm1hcCgoW18sIHZhbHVlXSkgPT4gdmFsdWUpO1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0Z2VuZXJhdGlvbnMsXG5cdFx0XHRcdGxsbU91dHB1dDogeyBlc3RpbWF0ZWRUb2tlblVzYWdlOiB0b2tlblVzYWdlIH1cblx0XHRcdH07XG5cdFx0fVxuXHRcdGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuY29tcGxldGlvbldpdGhSZXRyeSh7XG5cdFx0XHQuLi5wYXJhbWV0ZXJzLFxuXHRcdFx0Y29udGVudHM6IGFjdHVhbFByb21wdFxuXHRcdH0pO1xuXHRcdGxldCB1c2FnZU1ldGFkYXRhO1xuXHRcdGlmIChcInVzYWdlTWV0YWRhdGFcIiBpbiByZXMucmVzcG9uc2UpIHtcblx0XHRcdGNvbnN0IGdlbkFJVXNhZ2VNZXRhZGF0YSA9IHJlcy5yZXNwb25zZS51c2FnZU1ldGFkYXRhO1xuXHRcdFx0dXNhZ2VNZXRhZGF0YSA9IHtcblx0XHRcdFx0aW5wdXRfdG9rZW5zOiBnZW5BSVVzYWdlTWV0YWRhdGEucHJvbXB0VG9rZW5Db3VudCA/PyAwLFxuXHRcdFx0XHRvdXRwdXRfdG9rZW5zOiBnZW5BSVVzYWdlTWV0YWRhdGEuY2FuZGlkYXRlc1Rva2VuQ291bnQgPz8gMCxcblx0XHRcdFx0dG90YWxfdG9rZW5zOiBnZW5BSVVzYWdlTWV0YWRhdGEudG90YWxUb2tlbkNvdW50ID8/IDBcblx0XHRcdH07XG5cdFx0fVxuXHRcdGNvbnN0IGdlbmVyYXRpb25SZXN1bHQgPSBtYXBHZW5lcmF0ZUNvbnRlbnRSZXN1bHRUb0NoYXRSZXN1bHQocmVzLnJlc3BvbnNlLCB7IHVzYWdlTWV0YWRhdGEgfSk7XG5cdFx0aWYgKGdlbmVyYXRpb25SZXN1bHQuZ2VuZXJhdGlvbnM/Lmxlbmd0aCA+IDApIGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZUxMTU5ld1Rva2VuKGdlbmVyYXRpb25SZXN1bHQuZ2VuZXJhdGlvbnNbMF0/LnRleHQgPz8gXCJcIik7XG5cdFx0cmV0dXJuIGdlbmVyYXRpb25SZXN1bHQ7XG5cdH1cblx0YXN5bmMgKl9zdHJlYW1SZXNwb25zZUNodW5rcyhtZXNzYWdlcywgb3B0aW9ucywgcnVuTWFuYWdlcikge1xuXHRcdGNvbnN0IHByb21wdCA9IGNvbnZlcnRCYXNlTWVzc2FnZXNUb0NvbnRlbnQobWVzc2FnZXMsIHRoaXMuX2lzTXVsdGltb2RhbE1vZGVsLCB0aGlzLnVzZVN5c3RlbUluc3RydWN0aW9uKTtcblx0XHRsZXQgYWN0dWFsUHJvbXB0ID0gcHJvbXB0O1xuXHRcdGlmIChwcm9tcHRbMF0ucm9sZSA9PT0gXCJzeXN0ZW1cIikge1xuXHRcdFx0Y29uc3QgW3N5c3RlbUluc3RydWN0aW9uXSA9IHByb21wdDtcblx0XHRcdHRoaXMuY2xpZW50LnN5c3RlbUluc3RydWN0aW9uID0gc3lzdGVtSW5zdHJ1Y3Rpb247XG5cdFx0XHRhY3R1YWxQcm9tcHQgPSBwcm9tcHQuc2xpY2UoMSk7XG5cdFx0fVxuXHRcdGNvbnN0IHBhcmFtZXRlcnMgPSB0aGlzLmludm9jYXRpb25QYXJhbXMob3B0aW9ucyk7XG5cdFx0Y29uc3QgcmVxdWVzdCA9IHtcblx0XHRcdC4uLnBhcmFtZXRlcnMsXG5cdFx0XHRjb250ZW50czogYWN0dWFsUHJvbXB0XG5cdFx0fTtcblx0XHRjb25zdCBzdHJlYW0gPSBhd2FpdCB0aGlzLmNhbGxlci5jYWxsV2l0aE9wdGlvbnMoeyBzaWduYWw6IG9wdGlvbnM/LnNpZ25hbCB9LCBhc3luYyAoKSA9PiB7XG5cdFx0XHRjb25zdCB7IHN0cmVhbTogc3RyZWFtJDEgfSA9IGF3YWl0IHRoaXMuY2xpZW50LmdlbmVyYXRlQ29udGVudFN0cmVhbShyZXF1ZXN0KTtcblx0XHRcdHJldHVybiBzdHJlYW0kMTtcblx0XHR9KTtcblx0XHRsZXQgdXNhZ2VNZXRhZGF0YTtcblx0XHRsZXQgcHJldlByb21wdFRva2VuQ291bnQgPSAwO1xuXHRcdGxldCBwcmV2Q2FuZGlkYXRlc1Rva2VuQ291bnQgPSAwO1xuXHRcdGxldCBwcmV2VG90YWxUb2tlbkNvdW50ID0gMDtcblx0XHRsZXQgaW5kZXggPSAwO1xuXHRcdGZvciBhd2FpdCAoY29uc3QgcmVzcG9uc2Ugb2Ygc3RyZWFtKSB7XG5cdFx0XHRpZiAoXCJ1c2FnZU1ldGFkYXRhXCIgaW4gcmVzcG9uc2UgJiYgcmVzcG9uc2UudXNhZ2VNZXRhZGF0YSAhPT0gdm9pZCAwICYmIHRoaXMuc3RyZWFtVXNhZ2UgIT09IGZhbHNlICYmIG9wdGlvbnMuc3RyZWFtVXNhZ2UgIT09IGZhbHNlKSB7XG5cdFx0XHRcdHVzYWdlTWV0YWRhdGEgPSB7XG5cdFx0XHRcdFx0aW5wdXRfdG9rZW5zOiByZXNwb25zZS51c2FnZU1ldGFkYXRhLnByb21wdFRva2VuQ291bnQgPz8gMCxcblx0XHRcdFx0XHRvdXRwdXRfdG9rZW5zOiByZXNwb25zZS51c2FnZU1ldGFkYXRhLmNhbmRpZGF0ZXNUb2tlbkNvdW50ID8/IDAsXG5cdFx0XHRcdFx0dG90YWxfdG9rZW5zOiByZXNwb25zZS51c2FnZU1ldGFkYXRhLnRvdGFsVG9rZW5Db3VudCA/PyAwXG5cdFx0XHRcdH07XG5cdFx0XHRcdGNvbnN0IG5ld1Byb21wdFRva2VuQ291bnQgPSByZXNwb25zZS51c2FnZU1ldGFkYXRhLnByb21wdFRva2VuQ291bnQgPz8gMDtcblx0XHRcdFx0dXNhZ2VNZXRhZGF0YS5pbnB1dF90b2tlbnMgPSBNYXRoLm1heCgwLCBuZXdQcm9tcHRUb2tlbkNvdW50IC0gcHJldlByb21wdFRva2VuQ291bnQpO1xuXHRcdFx0XHRwcmV2UHJvbXB0VG9rZW5Db3VudCA9IG5ld1Byb21wdFRva2VuQ291bnQ7XG5cdFx0XHRcdGNvbnN0IG5ld0NhbmRpZGF0ZXNUb2tlbkNvdW50ID0gcmVzcG9uc2UudXNhZ2VNZXRhZGF0YS5jYW5kaWRhdGVzVG9rZW5Db3VudCA/PyAwO1xuXHRcdFx0XHR1c2FnZU1ldGFkYXRhLm91dHB1dF90b2tlbnMgPSBNYXRoLm1heCgwLCBuZXdDYW5kaWRhdGVzVG9rZW5Db3VudCAtIHByZXZDYW5kaWRhdGVzVG9rZW5Db3VudCk7XG5cdFx0XHRcdHByZXZDYW5kaWRhdGVzVG9rZW5Db3VudCA9IG5ld0NhbmRpZGF0ZXNUb2tlbkNvdW50O1xuXHRcdFx0XHRjb25zdCBuZXdUb3RhbFRva2VuQ291bnQgPSByZXNwb25zZS51c2FnZU1ldGFkYXRhLnRvdGFsVG9rZW5Db3VudCA/PyAwO1xuXHRcdFx0XHR1c2FnZU1ldGFkYXRhLnRvdGFsX3Rva2VucyA9IE1hdGgubWF4KDAsIG5ld1RvdGFsVG9rZW5Db3VudCAtIHByZXZUb3RhbFRva2VuQ291bnQpO1xuXHRcdFx0XHRwcmV2VG90YWxUb2tlbkNvdW50ID0gbmV3VG90YWxUb2tlbkNvdW50O1xuXHRcdFx0fVxuXHRcdFx0Y29uc3QgY2h1bmsgPSBjb252ZXJ0UmVzcG9uc2VDb250ZW50VG9DaGF0R2VuZXJhdGlvbkNodW5rKHJlc3BvbnNlLCB7XG5cdFx0XHRcdHVzYWdlTWV0YWRhdGEsXG5cdFx0XHRcdGluZGV4XG5cdFx0XHR9KTtcblx0XHRcdGluZGV4ICs9IDE7XG5cdFx0XHRpZiAoIWNodW5rKSBjb250aW51ZTtcblx0XHRcdHlpZWxkIGNodW5rO1xuXHRcdFx0YXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlTExNTmV3VG9rZW4oY2h1bmsudGV4dCA/PyBcIlwiKTtcblx0XHR9XG5cdH1cblx0YXN5bmMgY29tcGxldGlvbldpdGhSZXRyeShyZXF1ZXN0LCBvcHRpb25zKSB7XG5cdFx0cmV0dXJuIHRoaXMuY2FsbGVyLmNhbGxXaXRoT3B0aW9ucyh7IHNpZ25hbDogb3B0aW9ucz8uc2lnbmFsIH0sIGFzeW5jICgpID0+IHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdHJldHVybiBhd2FpdCB0aGlzLmNsaWVudC5nZW5lcmF0ZUNvbnRlbnQocmVxdWVzdCk7XG5cdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdGlmIChlLm1lc3NhZ2U/LmluY2x1ZGVzKFwiNDAwIEJhZCBSZXF1ZXN0XCIpKSBlLnN0YXR1cyA9IDQwMDtcblx0XHRcdFx0dGhyb3cgZTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXHR3aXRoU3RydWN0dXJlZE91dHB1dChvdXRwdXRTY2hlbWEsIGNvbmZpZykge1xuXHRcdGNvbnN0IHNjaGVtYSA9IG91dHB1dFNjaGVtYTtcblx0XHRjb25zdCBuYW1lID0gY29uZmlnPy5uYW1lO1xuXHRcdGNvbnN0IG1ldGhvZCA9IGNvbmZpZz8ubWV0aG9kO1xuXHRcdGNvbnN0IGluY2x1ZGVSYXcgPSBjb25maWc/LmluY2x1ZGVSYXc7XG5cdFx0aWYgKG1ldGhvZCA9PT0gXCJqc29uTW9kZVwiKSB0aHJvdyBuZXcgRXJyb3IoYENoYXRHb29nbGVHZW5lcmF0aXZlQUkgb25seSBzdXBwb3J0cyBcImpzb25TY2hlbWFcIiBvciBcImZ1bmN0aW9uQ2FsbGluZ1wiIGFzIGEgbWV0aG9kLmApO1xuXHRcdGxldCBsbG07XG5cdFx0bGV0IG91dHB1dFBhcnNlcjtcblx0XHRpZiAobWV0aG9kID09PSBcImZ1bmN0aW9uQ2FsbGluZ1wiKSB7XG5cdFx0XHRsZXQgZnVuY3Rpb25OYW1lID0gbmFtZSA/PyBcImV4dHJhY3RcIjtcblx0XHRcdGxldCB0b29scztcblx0XHRcdGlmIChpc0ludGVyb3Bab2RTY2hlbWEoc2NoZW1hKSkge1xuXHRcdFx0XHRjb25zdCBqc29uU2NoZW1hID0gc2NoZW1hVG9HZW5lcmF0aXZlQUlQYXJhbWV0ZXJzKHNjaGVtYSk7XG5cdFx0XHRcdHRvb2xzID0gW3sgZnVuY3Rpb25EZWNsYXJhdGlvbnM6IFt7XG5cdFx0XHRcdFx0bmFtZTogZnVuY3Rpb25OYW1lLFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBqc29uU2NoZW1hLmRlc2NyaXB0aW9uID8/IFwiQSBmdW5jdGlvbiBhdmFpbGFibGUgdG8gY2FsbC5cIixcblx0XHRcdFx0XHRwYXJhbWV0ZXJzOiBqc29uU2NoZW1hXG5cdFx0XHRcdH1dIH1dO1xuXHRcdFx0XHRvdXRwdXRQYXJzZXIgPSBuZXcgR29vZ2xlR2VuZXJhdGl2ZUFJVG9vbHNPdXRwdXRQYXJzZXIoe1xuXHRcdFx0XHRcdHJldHVyblNpbmdsZTogdHJ1ZSxcblx0XHRcdFx0XHRrZXlOYW1lOiBmdW5jdGlvbk5hbWUsXG5cdFx0XHRcdFx0em9kU2NoZW1hOiBzY2hlbWFcblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRsZXQgZ2VtaW5pRnVuY3Rpb25EZWZpbml0aW9uO1xuXHRcdFx0XHRpZiAodHlwZW9mIHNjaGVtYS5uYW1lID09PSBcInN0cmluZ1wiICYmIHR5cGVvZiBzY2hlbWEucGFyYW1ldGVycyA9PT0gXCJvYmplY3RcIiAmJiBzY2hlbWEucGFyYW1ldGVycyAhPSBudWxsKSB7XG5cdFx0XHRcdFx0Z2VtaW5pRnVuY3Rpb25EZWZpbml0aW9uID0gc2NoZW1hO1xuXHRcdFx0XHRcdGdlbWluaUZ1bmN0aW9uRGVmaW5pdGlvbi5wYXJhbWV0ZXJzID0gcmVtb3ZlQWRkaXRpb25hbFByb3BlcnRpZXMoc2NoZW1hLnBhcmFtZXRlcnMpO1xuXHRcdFx0XHRcdGZ1bmN0aW9uTmFtZSA9IHNjaGVtYS5uYW1lO1xuXHRcdFx0XHR9IGVsc2UgZ2VtaW5pRnVuY3Rpb25EZWZpbml0aW9uID0ge1xuXHRcdFx0XHRcdG5hbWU6IGZ1bmN0aW9uTmFtZSxcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogc2NoZW1hLmRlc2NyaXB0aW9uID8/IFwiXCIsXG5cdFx0XHRcdFx0cGFyYW1ldGVyczogcmVtb3ZlQWRkaXRpb25hbFByb3BlcnRpZXMoc2NoZW1hKVxuXHRcdFx0XHR9O1xuXHRcdFx0XHR0b29scyA9IFt7IGZ1bmN0aW9uRGVjbGFyYXRpb25zOiBbZ2VtaW5pRnVuY3Rpb25EZWZpbml0aW9uXSB9XTtcblx0XHRcdFx0b3V0cHV0UGFyc2VyID0gbmV3IEdvb2dsZUdlbmVyYXRpdmVBSVRvb2xzT3V0cHV0UGFyc2VyKHtcblx0XHRcdFx0XHRyZXR1cm5TaW5nbGU6IHRydWUsXG5cdFx0XHRcdFx0a2V5TmFtZTogZnVuY3Rpb25OYW1lXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdFx0bGxtID0gdGhpcy5iaW5kVG9vbHModG9vbHMpLndpdGhDb25maWcoeyBhbGxvd2VkRnVuY3Rpb25OYW1lczogW2Z1bmN0aW9uTmFtZV0gfSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnN0IGpzb25TY2hlbWEgPSBzY2hlbWFUb0dlbmVyYXRpdmVBSVBhcmFtZXRlcnMoc2NoZW1hKTtcblx0XHRcdGxsbSA9IHRoaXMud2l0aENvbmZpZyh7IHJlc3BvbnNlU2NoZW1hOiBqc29uU2NoZW1hIH0pO1xuXHRcdFx0b3V0cHV0UGFyc2VyID0gbmV3IEpzb25PdXRwdXRQYXJzZXIoKTtcblx0XHR9XG5cdFx0aWYgKCFpbmNsdWRlUmF3KSByZXR1cm4gbGxtLnBpcGUob3V0cHV0UGFyc2VyKS53aXRoQ29uZmlnKHsgcnVuTmFtZTogXCJDaGF0R29vZ2xlR2VuZXJhdGl2ZUFJU3RydWN0dXJlZE91dHB1dFwiIH0pO1xuXHRcdGNvbnN0IHBhcnNlckFzc2lnbiA9IFJ1bm5hYmxlUGFzc3Rocm91Z2guYXNzaWduKHsgcGFyc2VkOiAoaW5wdXQsIGNvbmZpZyQxKSA9PiBvdXRwdXRQYXJzZXIuaW52b2tlKGlucHV0LnJhdywgY29uZmlnJDEpIH0pO1xuXHRcdGNvbnN0IHBhcnNlck5vbmUgPSBSdW5uYWJsZVBhc3N0aHJvdWdoLmFzc2lnbih7IHBhcnNlZDogKCkgPT4gbnVsbCB9KTtcblx0XHRjb25zdCBwYXJzZWRXaXRoRmFsbGJhY2sgPSBwYXJzZXJBc3NpZ24ud2l0aEZhbGxiYWNrcyh7IGZhbGxiYWNrczogW3BhcnNlck5vbmVdIH0pO1xuXHRcdHJldHVybiBSdW5uYWJsZVNlcXVlbmNlLmZyb20oW3sgcmF3OiBsbG0gfSwgcGFyc2VkV2l0aEZhbGxiYWNrXSkud2l0aENvbmZpZyh7IHJ1bk5hbWU6IFwiU3RydWN0dXJlZE91dHB1dFJ1bm5hYmxlXCIgfSk7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgQ2hhdEdvb2dsZUdlbmVyYXRpdmVBSSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2hhdF9tb2RlbHMuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+google-genai@1.0.0_@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76__/node_modules/@langchain/google-genai/dist/chat_models.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+google-genai@1.0.0_@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76__/node_modules/@langchain/google-genai/dist/embeddings.js":
/*!*****************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+google-genai@1.0.0_@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76__/node_modules/@langchain/google-genai/dist/embeddings.js ***!
  \*****************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GoogleGenerativeAIEmbeddings: () => (/* binding */ GoogleGenerativeAIEmbeddings)\n/* harmony export */ });\n/* harmony import */ var _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @google/generative-ai */ \"(rsc)/./node_modules/.pnpm/@google+generative-ai@0.24.1/node_modules/@google/generative-ai/dist/index.mjs\");\n/* harmony import */ var _langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/core/utils/env */ \"(rsc)/./node_modules/.pnpm/@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76_/node_modules/@langchain/core/dist/utils/env.js\");\n/* harmony import */ var _langchain_core_embeddings__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @langchain/core/embeddings */ \"(rsc)/./node_modules/.pnpm/@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76_/node_modules/@langchain/core/dist/embeddings.js\");\n/* harmony import */ var _langchain_core_utils_chunk_array__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @langchain/core/utils/chunk_array */ \"(rsc)/./node_modules/.pnpm/@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76_/node_modules/@langchain/core/dist/utils/chunk_array.js\");\n\n\n\n\n\n//#region src/embeddings.ts\n/**\n* Class that extends the Embeddings class and provides methods for\n* generating embeddings using the Google Palm API.\n* @example\n* ```typescript\n* const model = new GoogleGenerativeAIEmbeddings({\n*   apiKey: \"<YOUR API KEY>\",\n*   modelName: \"embedding-001\",\n* });\n*\n* // Embed a single query\n* const res = await model.embedQuery(\n*   \"What would be a good company name for a company that makes colorful socks?\"\n* );\n* console.log({ res });\n*\n* // Embed multiple documents\n* const documentRes = await model.embedDocuments([\"Hello world\", \"Bye bye\"]);\n* console.log({ documentRes });\n* ```\n*/\nvar GoogleGenerativeAIEmbeddings = class extends _langchain_core_embeddings__WEBPACK_IMPORTED_MODULE_2__.Embeddings {\n\tapiKey;\n\tmodelName = \"embedding-001\";\n\tmodel = \"embedding-001\";\n\ttaskType;\n\ttitle;\n\tstripNewLines = true;\n\tmaxBatchSize = 100;\n\tclient;\n\tconstructor(fields) {\n\t\tsuper(fields ?? {});\n\t\tthis.modelName = fields?.model?.replace(/^models\\//, \"\") ?? fields?.modelName?.replace(/^models\\//, \"\") ?? this.modelName;\n\t\tthis.model = this.modelName;\n\t\tthis.taskType = fields?.taskType ?? this.taskType;\n\t\tthis.title = fields?.title ?? this.title;\n\t\tif (this.title && this.taskType !== \"RETRIEVAL_DOCUMENT\") throw new Error(\"title can only be sepcified with TaskType.RETRIEVAL_DOCUMENT\");\n\t\tthis.apiKey = fields?.apiKey ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_1__.getEnvironmentVariable)(\"GOOGLE_API_KEY\");\n\t\tif (!this.apiKey) throw new Error(\"Please set an API key for Google GenerativeAI in the environmentb variable GOOGLE_API_KEY or in the `apiKey` field of the GoogleGenerativeAIEmbeddings constructor\");\n\t\tthis.client = new _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__.GoogleGenerativeAI(this.apiKey).getGenerativeModel({ model: this.model }, { baseUrl: fields?.baseUrl });\n\t}\n\t_convertToContent(text) {\n\t\tconst cleanedText = this.stripNewLines ? text.replace(/\\n/g, \" \") : text;\n\t\treturn {\n\t\t\tcontent: {\n\t\t\t\trole: \"user\",\n\t\t\t\tparts: [{ text: cleanedText }]\n\t\t\t},\n\t\t\ttaskType: this.taskType,\n\t\t\ttitle: this.title\n\t\t};\n\t}\n\tasync _embedQueryContent(text) {\n\t\tconst req = this._convertToContent(text);\n\t\tconst res = await this.client.embedContent(req);\n\t\treturn res.embedding.values ?? [];\n\t}\n\tasync _embedDocumentsContent(documents) {\n\t\tconst batchEmbedChunks = (0,_langchain_core_utils_chunk_array__WEBPACK_IMPORTED_MODULE_3__.chunkArray)(documents, this.maxBatchSize);\n\t\tconst batchEmbedRequests = batchEmbedChunks.map((chunk) => ({ requests: chunk.map((doc) => this._convertToContent(doc)) }));\n\t\tconst responses = await Promise.allSettled(batchEmbedRequests.map((req) => this.client.batchEmbedContents(req)));\n\t\tconst embeddings = responses.flatMap((res, idx) => {\n\t\t\tif (res.status === \"fulfilled\") return res.value.embeddings.map((e) => e.values || []);\n\t\t\telse return Array(batchEmbedChunks[idx].length).fill([]);\n\t\t});\n\t\treturn embeddings;\n\t}\n\t/**\n\t* Method that takes a document as input and returns a promise that\n\t* resolves to an embedding for the document. It calls the _embedText\n\t* method with the document as the input.\n\t* @param document Document for which to generate an embedding.\n\t* @returns Promise that resolves to an embedding for the input document.\n\t*/\n\tembedQuery(document) {\n\t\treturn this.caller.call(this._embedQueryContent.bind(this), document);\n\t}\n\t/**\n\t* Method that takes an array of documents as input and returns a promise\n\t* that resolves to a 2D array of embeddings for each document. It calls\n\t* the _embedText method for each document in the array.\n\t* @param documents Array of documents for which to generate embeddings.\n\t* @returns Promise that resolves to a 2D array of embeddings for each input document.\n\t*/\n\tembedDocuments(documents) {\n\t\treturn this.caller.call(this._embedDocumentsContent.bind(this), documents);\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=embeddings.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitnb29nbGUtZ2VuYWlAMS4wLjBfQGxhbmdjaGFpbitjb3JlQDEuMC4xX29wZW5haUA2LjcuMF93c0A4LjE4LjNfem9kQDMuMjUuNzZfXy9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvZGlzdC9lbWJlZGRpbmdzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQTJEO0FBQ1E7QUFDWDtBQUNPOztBQUUvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixLQUFLO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixhQUFhO0FBQzdCO0FBQ0E7QUFDQSxpREFBaUQsa0VBQVU7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsaUZBQXNCO0FBQ3hEO0FBQ0Esb0JBQW9CLHFFQUFrQixtQ0FBbUMsbUJBQW1CLElBQUksMEJBQTBCO0FBQzFIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsbUJBQW1CO0FBQ2pDLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQiw2RUFBVTtBQUNyQyxnRUFBZ0UsMkRBQTJEO0FBQzNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDd0M7QUFDeEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVucm91dGVyLWxhbmdncmFwaC8uL25vZGVfbW9kdWxlcy8ucG5wbS9AbGFuZ2NoYWluK2dvb2dsZS1nZW5haUAxLjAuMF9AbGFuZ2NoYWluK2NvcmVAMS4wLjFfb3BlbmFpQDYuNy4wX3dzQDguMTguM196b2RAMy4yNS43Nl9fL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2dvb2dsZS1nZW5haS9kaXN0L2VtYmVkZGluZ3MuanM/OWE1NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHb29nbGVHZW5lcmF0aXZlQUkgfSBmcm9tIFwiQGdvb2dsZS9nZW5lcmF0aXZlLWFpXCI7XG5pbXBvcnQgeyBnZXRFbnZpcm9ubWVudFZhcmlhYmxlIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS91dGlscy9lbnZcIjtcbmltcG9ydCB7IEVtYmVkZGluZ3MgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL2VtYmVkZGluZ3NcIjtcbmltcG9ydCB7IGNodW5rQXJyYXkgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL3V0aWxzL2NodW5rX2FycmF5XCI7XG5cbi8vI3JlZ2lvbiBzcmMvZW1iZWRkaW5ncy50c1xuLyoqXG4qIENsYXNzIHRoYXQgZXh0ZW5kcyB0aGUgRW1iZWRkaW5ncyBjbGFzcyBhbmQgcHJvdmlkZXMgbWV0aG9kcyBmb3JcbiogZ2VuZXJhdGluZyBlbWJlZGRpbmdzIHVzaW5nIHRoZSBHb29nbGUgUGFsbSBBUEkuXG4qIEBleGFtcGxlXG4qIGBgYHR5cGVzY3JpcHRcbiogY29uc3QgbW9kZWwgPSBuZXcgR29vZ2xlR2VuZXJhdGl2ZUFJRW1iZWRkaW5ncyh7XG4qICAgYXBpS2V5OiBcIjxZT1VSIEFQSSBLRVk+XCIsXG4qICAgbW9kZWxOYW1lOiBcImVtYmVkZGluZy0wMDFcIixcbiogfSk7XG4qXG4qIC8vIEVtYmVkIGEgc2luZ2xlIHF1ZXJ5XG4qIGNvbnN0IHJlcyA9IGF3YWl0IG1vZGVsLmVtYmVkUXVlcnkoXG4qICAgXCJXaGF0IHdvdWxkIGJlIGEgZ29vZCBjb21wYW55IG5hbWUgZm9yIGEgY29tcGFueSB0aGF0IG1ha2VzIGNvbG9yZnVsIHNvY2tzP1wiXG4qICk7XG4qIGNvbnNvbGUubG9nKHsgcmVzIH0pO1xuKlxuKiAvLyBFbWJlZCBtdWx0aXBsZSBkb2N1bWVudHNcbiogY29uc3QgZG9jdW1lbnRSZXMgPSBhd2FpdCBtb2RlbC5lbWJlZERvY3VtZW50cyhbXCJIZWxsbyB3b3JsZFwiLCBcIkJ5ZSBieWVcIl0pO1xuKiBjb25zb2xlLmxvZyh7IGRvY3VtZW50UmVzIH0pO1xuKiBgYGBcbiovXG52YXIgR29vZ2xlR2VuZXJhdGl2ZUFJRW1iZWRkaW5ncyA9IGNsYXNzIGV4dGVuZHMgRW1iZWRkaW5ncyB7XG5cdGFwaUtleTtcblx0bW9kZWxOYW1lID0gXCJlbWJlZGRpbmctMDAxXCI7XG5cdG1vZGVsID0gXCJlbWJlZGRpbmctMDAxXCI7XG5cdHRhc2tUeXBlO1xuXHR0aXRsZTtcblx0c3RyaXBOZXdMaW5lcyA9IHRydWU7XG5cdG1heEJhdGNoU2l6ZSA9IDEwMDtcblx0Y2xpZW50O1xuXHRjb25zdHJ1Y3RvcihmaWVsZHMpIHtcblx0XHRzdXBlcihmaWVsZHMgPz8ge30pO1xuXHRcdHRoaXMubW9kZWxOYW1lID0gZmllbGRzPy5tb2RlbD8ucmVwbGFjZSgvXm1vZGVsc1xcLy8sIFwiXCIpID8/IGZpZWxkcz8ubW9kZWxOYW1lPy5yZXBsYWNlKC9ebW9kZWxzXFwvLywgXCJcIikgPz8gdGhpcy5tb2RlbE5hbWU7XG5cdFx0dGhpcy5tb2RlbCA9IHRoaXMubW9kZWxOYW1lO1xuXHRcdHRoaXMudGFza1R5cGUgPSBmaWVsZHM/LnRhc2tUeXBlID8/IHRoaXMudGFza1R5cGU7XG5cdFx0dGhpcy50aXRsZSA9IGZpZWxkcz8udGl0bGUgPz8gdGhpcy50aXRsZTtcblx0XHRpZiAodGhpcy50aXRsZSAmJiB0aGlzLnRhc2tUeXBlICE9PSBcIlJFVFJJRVZBTF9ET0NVTUVOVFwiKSB0aHJvdyBuZXcgRXJyb3IoXCJ0aXRsZSBjYW4gb25seSBiZSBzZXBjaWZpZWQgd2l0aCBUYXNrVHlwZS5SRVRSSUVWQUxfRE9DVU1FTlRcIik7XG5cdFx0dGhpcy5hcGlLZXkgPSBmaWVsZHM/LmFwaUtleSA/PyBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiR09PR0xFX0FQSV9LRVlcIik7XG5cdFx0aWYgKCF0aGlzLmFwaUtleSkgdGhyb3cgbmV3IEVycm9yKFwiUGxlYXNlIHNldCBhbiBBUEkga2V5IGZvciBHb29nbGUgR2VuZXJhdGl2ZUFJIGluIHRoZSBlbnZpcm9ubWVudGIgdmFyaWFibGUgR09PR0xFX0FQSV9LRVkgb3IgaW4gdGhlIGBhcGlLZXlgIGZpZWxkIG9mIHRoZSBHb29nbGVHZW5lcmF0aXZlQUlFbWJlZGRpbmdzIGNvbnN0cnVjdG9yXCIpO1xuXHRcdHRoaXMuY2xpZW50ID0gbmV3IEdvb2dsZUdlbmVyYXRpdmVBSSh0aGlzLmFwaUtleSkuZ2V0R2VuZXJhdGl2ZU1vZGVsKHsgbW9kZWw6IHRoaXMubW9kZWwgfSwgeyBiYXNlVXJsOiBmaWVsZHM/LmJhc2VVcmwgfSk7XG5cdH1cblx0X2NvbnZlcnRUb0NvbnRlbnQodGV4dCkge1xuXHRcdGNvbnN0IGNsZWFuZWRUZXh0ID0gdGhpcy5zdHJpcE5ld0xpbmVzID8gdGV4dC5yZXBsYWNlKC9cXG4vZywgXCIgXCIpIDogdGV4dDtcblx0XHRyZXR1cm4ge1xuXHRcdFx0Y29udGVudDoge1xuXHRcdFx0XHRyb2xlOiBcInVzZXJcIixcblx0XHRcdFx0cGFydHM6IFt7IHRleHQ6IGNsZWFuZWRUZXh0IH1dXG5cdFx0XHR9LFxuXHRcdFx0dGFza1R5cGU6IHRoaXMudGFza1R5cGUsXG5cdFx0XHR0aXRsZTogdGhpcy50aXRsZVxuXHRcdH07XG5cdH1cblx0YXN5bmMgX2VtYmVkUXVlcnlDb250ZW50KHRleHQpIHtcblx0XHRjb25zdCByZXEgPSB0aGlzLl9jb252ZXJ0VG9Db250ZW50KHRleHQpO1xuXHRcdGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuY2xpZW50LmVtYmVkQ29udGVudChyZXEpO1xuXHRcdHJldHVybiByZXMuZW1iZWRkaW5nLnZhbHVlcyA/PyBbXTtcblx0fVxuXHRhc3luYyBfZW1iZWREb2N1bWVudHNDb250ZW50KGRvY3VtZW50cykge1xuXHRcdGNvbnN0IGJhdGNoRW1iZWRDaHVua3MgPSBjaHVua0FycmF5KGRvY3VtZW50cywgdGhpcy5tYXhCYXRjaFNpemUpO1xuXHRcdGNvbnN0IGJhdGNoRW1iZWRSZXF1ZXN0cyA9IGJhdGNoRW1iZWRDaHVua3MubWFwKChjaHVuaykgPT4gKHsgcmVxdWVzdHM6IGNodW5rLm1hcCgoZG9jKSA9PiB0aGlzLl9jb252ZXJ0VG9Db250ZW50KGRvYykpIH0pKTtcblx0XHRjb25zdCByZXNwb25zZXMgPSBhd2FpdCBQcm9taXNlLmFsbFNldHRsZWQoYmF0Y2hFbWJlZFJlcXVlc3RzLm1hcCgocmVxKSA9PiB0aGlzLmNsaWVudC5iYXRjaEVtYmVkQ29udGVudHMocmVxKSkpO1xuXHRcdGNvbnN0IGVtYmVkZGluZ3MgPSByZXNwb25zZXMuZmxhdE1hcCgocmVzLCBpZHgpID0+IHtcblx0XHRcdGlmIChyZXMuc3RhdHVzID09PSBcImZ1bGZpbGxlZFwiKSByZXR1cm4gcmVzLnZhbHVlLmVtYmVkZGluZ3MubWFwKChlKSA9PiBlLnZhbHVlcyB8fCBbXSk7XG5cdFx0XHRlbHNlIHJldHVybiBBcnJheShiYXRjaEVtYmVkQ2h1bmtzW2lkeF0ubGVuZ3RoKS5maWxsKFtdKTtcblx0XHR9KTtcblx0XHRyZXR1cm4gZW1iZWRkaW5ncztcblx0fVxuXHQvKipcblx0KiBNZXRob2QgdGhhdCB0YWtlcyBhIGRvY3VtZW50IGFzIGlucHV0IGFuZCByZXR1cm5zIGEgcHJvbWlzZSB0aGF0XG5cdCogcmVzb2x2ZXMgdG8gYW4gZW1iZWRkaW5nIGZvciB0aGUgZG9jdW1lbnQuIEl0IGNhbGxzIHRoZSBfZW1iZWRUZXh0XG5cdCogbWV0aG9kIHdpdGggdGhlIGRvY3VtZW50IGFzIHRoZSBpbnB1dC5cblx0KiBAcGFyYW0gZG9jdW1lbnQgRG9jdW1lbnQgZm9yIHdoaWNoIHRvIGdlbmVyYXRlIGFuIGVtYmVkZGluZy5cblx0KiBAcmV0dXJucyBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYW4gZW1iZWRkaW5nIGZvciB0aGUgaW5wdXQgZG9jdW1lbnQuXG5cdCovXG5cdGVtYmVkUXVlcnkoZG9jdW1lbnQpIHtcblx0XHRyZXR1cm4gdGhpcy5jYWxsZXIuY2FsbCh0aGlzLl9lbWJlZFF1ZXJ5Q29udGVudC5iaW5kKHRoaXMpLCBkb2N1bWVudCk7XG5cdH1cblx0LyoqXG5cdCogTWV0aG9kIHRoYXQgdGFrZXMgYW4gYXJyYXkgb2YgZG9jdW1lbnRzIGFzIGlucHV0IGFuZCByZXR1cm5zIGEgcHJvbWlzZVxuXHQqIHRoYXQgcmVzb2x2ZXMgdG8gYSAyRCBhcnJheSBvZiBlbWJlZGRpbmdzIGZvciBlYWNoIGRvY3VtZW50LiBJdCBjYWxsc1xuXHQqIHRoZSBfZW1iZWRUZXh0IG1ldGhvZCBmb3IgZWFjaCBkb2N1bWVudCBpbiB0aGUgYXJyYXkuXG5cdCogQHBhcmFtIGRvY3VtZW50cyBBcnJheSBvZiBkb2N1bWVudHMgZm9yIHdoaWNoIHRvIGdlbmVyYXRlIGVtYmVkZGluZ3MuXG5cdCogQHJldHVybnMgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGEgMkQgYXJyYXkgb2YgZW1iZWRkaW5ncyBmb3IgZWFjaCBpbnB1dCBkb2N1bWVudC5cblx0Ki9cblx0ZW1iZWREb2N1bWVudHMoZG9jdW1lbnRzKSB7XG5cdFx0cmV0dXJuIHRoaXMuY2FsbGVyLmNhbGwodGhpcy5fZW1iZWREb2N1bWVudHNDb250ZW50LmJpbmQodGhpcyksIGRvY3VtZW50cyk7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgR29vZ2xlR2VuZXJhdGl2ZUFJRW1iZWRkaW5ncyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZW1iZWRkaW5ncy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+google-genai@1.0.0_@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76__/node_modules/@langchain/google-genai/dist/embeddings.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+google-genai@1.0.0_@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76__/node_modules/@langchain/google-genai/dist/index.js":
/*!************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+google-genai@1.0.0_@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76__/node_modules/@langchain/google-genai/dist/index.js ***!
  \************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatGoogleGenerativeAI: () => (/* reexport safe */ _chat_models_js__WEBPACK_IMPORTED_MODULE_0__.ChatGoogleGenerativeAI),\n/* harmony export */   GoogleGenerativeAIEmbeddings: () => (/* reexport safe */ _embeddings_js__WEBPACK_IMPORTED_MODULE_1__.GoogleGenerativeAIEmbeddings)\n/* harmony export */ });\n/* harmony import */ var _chat_models_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chat_models.js */ \"(rsc)/./node_modules/.pnpm/@langchain+google-genai@1.0.0_@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76__/node_modules/@langchain/google-genai/dist/chat_models.js\");\n/* harmony import */ var _embeddings_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./embeddings.js */ \"(rsc)/./node_modules/.pnpm/@langchain+google-genai@1.0.0_@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76__/node_modules/@langchain/google-genai/dist/embeddings.js\");\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitnb29nbGUtZ2VuYWlAMS4wLjBfQGxhbmdjaGFpbitjb3JlQDEuMC4xX29wZW5haUA2LjcuMF93c0A4LjE4LjNfem9kQDMuMjUuNzZfXy9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvZGlzdC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQTBEO0FBQ0siLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVucm91dGVyLWxhbmdncmFwaC8uL25vZGVfbW9kdWxlcy8ucG5wbS9AbGFuZ2NoYWluK2dvb2dsZS1nZW5haUAxLjAuMF9AbGFuZ2NoYWluK2NvcmVAMS4wLjFfb3BlbmFpQDYuNy4wX3dzQDguMTguM196b2RAMy4yNS43Nl9fL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2dvb2dsZS1nZW5haS9kaXN0L2luZGV4LmpzPzI2NTIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2hhdEdvb2dsZUdlbmVyYXRpdmVBSSB9IGZyb20gXCIuL2NoYXRfbW9kZWxzLmpzXCI7XG5pbXBvcnQgeyBHb29nbGVHZW5lcmF0aXZlQUlFbWJlZGRpbmdzIH0gZnJvbSBcIi4vZW1iZWRkaW5ncy5qc1wiO1xuXG5leHBvcnQgeyBDaGF0R29vZ2xlR2VuZXJhdGl2ZUFJLCBHb29nbGVHZW5lcmF0aXZlQUlFbWJlZGRpbmdzIH07Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+google-genai@1.0.0_@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76__/node_modules/@langchain/google-genai/dist/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+google-genai@1.0.0_@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76__/node_modules/@langchain/google-genai/dist/output_parsers.js":
/*!*********************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+google-genai@1.0.0_@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76__/node_modules/@langchain/google-genai/dist/output_parsers.js ***!
  \*********************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GoogleGenerativeAIToolsOutputParser: () => (/* binding */ GoogleGenerativeAIToolsOutputParser)\n/* harmony export */ });\n/* harmony import */ var _langchain_core_utils_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/utils/types */ \"(rsc)/./node_modules/.pnpm/@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76_/node_modules/@langchain/core/dist/utils/types/index.js\");\n/* harmony import */ var _langchain_core_output_parsers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/core/output_parsers */ \"(rsc)/./node_modules/.pnpm/@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76_/node_modules/@langchain/core/dist/output_parsers/index.js\");\n\n\n\n//#region src/output_parsers.ts\nvar GoogleGenerativeAIToolsOutputParser = class extends _langchain_core_output_parsers__WEBPACK_IMPORTED_MODULE_1__.BaseLLMOutputParser {\n\tstatic lc_name() {\n\t\treturn \"GoogleGenerativeAIToolsOutputParser\";\n\t}\n\tlc_namespace = [\n\t\t\"langchain\",\n\t\t\"google_genai\",\n\t\t\"output_parsers\"\n\t];\n\treturnId = false;\n\t/** The type of tool calls to return. */\n\tkeyName;\n\t/** Whether to return only the first tool call. */\n\treturnSingle = false;\n\tzodSchema;\n\tconstructor(params) {\n\t\tsuper(params);\n\t\tthis.keyName = params.keyName;\n\t\tthis.returnSingle = params.returnSingle ?? this.returnSingle;\n\t\tthis.zodSchema = params.zodSchema;\n\t}\n\tasync _validateResult(result) {\n\t\tif (this.zodSchema === void 0) return result;\n\t\tconst zodParsedResult = await (0,_langchain_core_utils_types__WEBPACK_IMPORTED_MODULE_0__.interopSafeParseAsync)(this.zodSchema, result);\n\t\tif (zodParsedResult.success) return zodParsedResult.data;\n\t\telse throw new _langchain_core_output_parsers__WEBPACK_IMPORTED_MODULE_1__.OutputParserException(`Failed to parse. Text: \"${JSON.stringify(result, null, 2)}\". Error: ${JSON.stringify(zodParsedResult.error.issues)}`, JSON.stringify(result, null, 2));\n\t}\n\tasync parseResult(generations) {\n\t\tconst tools = generations.flatMap((generation) => {\n\t\t\tconst { message } = generation;\n\t\t\tif (!(\"tool_calls\" in message) || !Array.isArray(message.tool_calls)) return [];\n\t\t\treturn message.tool_calls;\n\t\t});\n\t\tif (tools[0] === void 0) throw new Error(\"No parseable tool calls provided to GoogleGenerativeAIToolsOutputParser.\");\n\t\tconst [tool] = tools;\n\t\tconst validatedResult = await this._validateResult(tool.args);\n\t\treturn validatedResult;\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=output_parsers.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitnb29nbGUtZ2VuYWlAMS4wLjBfQGxhbmdjaGFpbitjb3JlQDEuMC4xX29wZW5haUA2LjcuMF93c0A4LjE4LjNfem9kQDMuMjUuNzZfXy9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvZGlzdC9vdXRwdXRfcGFyc2Vycy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBb0U7QUFDd0I7O0FBRTVGO0FBQ0Esd0RBQXdELCtFQUFtQjtBQUMzRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxrRkFBcUI7QUFDckQ7QUFDQSxpQkFBaUIsaUZBQXFCLDRCQUE0QixnQ0FBZ0MsWUFBWSw2Q0FBNkM7QUFDM0o7QUFDQTtBQUNBO0FBQ0EsV0FBVyxVQUFVO0FBQ3JCO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQytDO0FBQy9DIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3BlbnJvdXRlci1sYW5nZ3JhcGgvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitnb29nbGUtZ2VuYWlAMS4wLjBfQGxhbmdjaGFpbitjb3JlQDEuMC4xX29wZW5haUA2LjcuMF93c0A4LjE4LjNfem9kQDMuMjUuNzZfXy9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvZGlzdC9vdXRwdXRfcGFyc2Vycy5qcz9mYTg2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGludGVyb3BTYWZlUGFyc2VBc3luYyB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvdXRpbHMvdHlwZXNcIjtcbmltcG9ydCB7IEJhc2VMTE1PdXRwdXRQYXJzZXIsIE91dHB1dFBhcnNlckV4Y2VwdGlvbiB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvb3V0cHV0X3BhcnNlcnNcIjtcblxuLy8jcmVnaW9uIHNyYy9vdXRwdXRfcGFyc2Vycy50c1xudmFyIEdvb2dsZUdlbmVyYXRpdmVBSVRvb2xzT3V0cHV0UGFyc2VyID0gY2xhc3MgZXh0ZW5kcyBCYXNlTExNT3V0cHV0UGFyc2VyIHtcblx0c3RhdGljIGxjX25hbWUoKSB7XG5cdFx0cmV0dXJuIFwiR29vZ2xlR2VuZXJhdGl2ZUFJVG9vbHNPdXRwdXRQYXJzZXJcIjtcblx0fVxuXHRsY19uYW1lc3BhY2UgPSBbXG5cdFx0XCJsYW5nY2hhaW5cIixcblx0XHRcImdvb2dsZV9nZW5haVwiLFxuXHRcdFwib3V0cHV0X3BhcnNlcnNcIlxuXHRdO1xuXHRyZXR1cm5JZCA9IGZhbHNlO1xuXHQvKiogVGhlIHR5cGUgb2YgdG9vbCBjYWxscyB0byByZXR1cm4uICovXG5cdGtleU5hbWU7XG5cdC8qKiBXaGV0aGVyIHRvIHJldHVybiBvbmx5IHRoZSBmaXJzdCB0b29sIGNhbGwuICovXG5cdHJldHVyblNpbmdsZSA9IGZhbHNlO1xuXHR6b2RTY2hlbWE7XG5cdGNvbnN0cnVjdG9yKHBhcmFtcykge1xuXHRcdHN1cGVyKHBhcmFtcyk7XG5cdFx0dGhpcy5rZXlOYW1lID0gcGFyYW1zLmtleU5hbWU7XG5cdFx0dGhpcy5yZXR1cm5TaW5nbGUgPSBwYXJhbXMucmV0dXJuU2luZ2xlID8/IHRoaXMucmV0dXJuU2luZ2xlO1xuXHRcdHRoaXMuem9kU2NoZW1hID0gcGFyYW1zLnpvZFNjaGVtYTtcblx0fVxuXHRhc3luYyBfdmFsaWRhdGVSZXN1bHQocmVzdWx0KSB7XG5cdFx0aWYgKHRoaXMuem9kU2NoZW1hID09PSB2b2lkIDApIHJldHVybiByZXN1bHQ7XG5cdFx0Y29uc3Qgem9kUGFyc2VkUmVzdWx0ID0gYXdhaXQgaW50ZXJvcFNhZmVQYXJzZUFzeW5jKHRoaXMuem9kU2NoZW1hLCByZXN1bHQpO1xuXHRcdGlmICh6b2RQYXJzZWRSZXN1bHQuc3VjY2VzcykgcmV0dXJuIHpvZFBhcnNlZFJlc3VsdC5kYXRhO1xuXHRcdGVsc2UgdGhyb3cgbmV3IE91dHB1dFBhcnNlckV4Y2VwdGlvbihgRmFpbGVkIHRvIHBhcnNlLiBUZXh0OiBcIiR7SlNPTi5zdHJpbmdpZnkocmVzdWx0LCBudWxsLCAyKX1cIi4gRXJyb3I6ICR7SlNPTi5zdHJpbmdpZnkoem9kUGFyc2VkUmVzdWx0LmVycm9yLmlzc3Vlcyl9YCwgSlNPTi5zdHJpbmdpZnkocmVzdWx0LCBudWxsLCAyKSk7XG5cdH1cblx0YXN5bmMgcGFyc2VSZXN1bHQoZ2VuZXJhdGlvbnMpIHtcblx0XHRjb25zdCB0b29scyA9IGdlbmVyYXRpb25zLmZsYXRNYXAoKGdlbmVyYXRpb24pID0+IHtcblx0XHRcdGNvbnN0IHsgbWVzc2FnZSB9ID0gZ2VuZXJhdGlvbjtcblx0XHRcdGlmICghKFwidG9vbF9jYWxsc1wiIGluIG1lc3NhZ2UpIHx8ICFBcnJheS5pc0FycmF5KG1lc3NhZ2UudG9vbF9jYWxscykpIHJldHVybiBbXTtcblx0XHRcdHJldHVybiBtZXNzYWdlLnRvb2xfY2FsbHM7XG5cdFx0fSk7XG5cdFx0aWYgKHRvb2xzWzBdID09PSB2b2lkIDApIHRocm93IG5ldyBFcnJvcihcIk5vIHBhcnNlYWJsZSB0b29sIGNhbGxzIHByb3ZpZGVkIHRvIEdvb2dsZUdlbmVyYXRpdmVBSVRvb2xzT3V0cHV0UGFyc2VyLlwiKTtcblx0XHRjb25zdCBbdG9vbF0gPSB0b29scztcblx0XHRjb25zdCB2YWxpZGF0ZWRSZXN1bHQgPSBhd2FpdCB0aGlzLl92YWxpZGF0ZVJlc3VsdCh0b29sLmFyZ3MpO1xuXHRcdHJldHVybiB2YWxpZGF0ZWRSZXN1bHQ7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgR29vZ2xlR2VuZXJhdGl2ZUFJVG9vbHNPdXRwdXRQYXJzZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW91dHB1dF9wYXJzZXJzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+google-genai@1.0.0_@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76__/node_modules/@langchain/google-genai/dist/output_parsers.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+google-genai@1.0.0_@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76__/node_modules/@langchain/google-genai/dist/utils/common.js":
/*!*******************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+google-genai@1.0.0_@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76__/node_modules/@langchain/google-genai/dist/utils/common.js ***!
  \*******************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   convertBaseMessagesToContent: () => (/* binding */ convertBaseMessagesToContent),\n/* harmony export */   convertResponseContentToChatGenerationChunk: () => (/* binding */ convertResponseContentToChatGenerationChunk),\n/* harmony export */   convertToGenerativeAITools: () => (/* binding */ convertToGenerativeAITools),\n/* harmony export */   mapGenerateContentResultToChatResult: () => (/* binding */ mapGenerateContentResultToChatResult)\n/* harmony export */ });\n/* harmony import */ var _zod_to_genai_parameters_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./zod_to_genai_parameters.js */ \"(rsc)/./node_modules/.pnpm/@langchain+google-genai@1.0.0_@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76__/node_modules/@langchain/google-genai/dist/utils/zod_to_genai_parameters.js\");\n/* harmony import */ var _langchain_core_messages__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/core/messages */ \"(rsc)/./node_modules/.pnpm/@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76_/node_modules/@langchain/core/dist/messages/index.js\");\n/* harmony import */ var _langchain_core_outputs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @langchain/core/outputs */ \"(rsc)/./node_modules/.pnpm/@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76_/node_modules/@langchain/core/dist/outputs.js\");\n/* harmony import */ var _langchain_core_utils_function_calling__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @langchain/core/utils/function_calling */ \"(rsc)/./node_modules/.pnpm/@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76_/node_modules/@langchain/core/dist/utils/function_calling.js\");\n/* harmony import */ var _langchain_core_language_models_base__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @langchain/core/language_models/base */ \"(rsc)/./node_modules/.pnpm/@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76_/node_modules/@langchain/core/dist/language_models/base.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/.pnpm/uuid@11.1.0/node_modules/uuid/dist/esm/v4.js\");\n\n\n\n\n\n\n\n//#region src/utils/common.ts\nfunction getMessageAuthor(message) {\n\tconst type = message._getType();\n\tif (_langchain_core_messages__WEBPACK_IMPORTED_MODULE_1__.ChatMessage.isInstance(message)) return message.role;\n\tif (type === \"tool\") return type;\n\treturn message.name ?? type;\n}\n/**\n* Maps a message type to a Google Generative AI chat author.\n* @param message The message to map.\n* @param model The model to use for mapping.\n* @returns The message type mapped to a Google Generative AI chat author.\n*/\nfunction convertAuthorToRole(author) {\n\tswitch (author) {\n\t\tcase \"supervisor\":\n\t\tcase \"ai\":\n\t\tcase \"model\": return \"model\";\n\t\tcase \"system\": return \"system\";\n\t\tcase \"human\": return \"user\";\n\t\tcase \"tool\":\n\t\tcase \"function\": return \"function\";\n\t\tdefault: throw new Error(`Unknown / unsupported author: ${author}`);\n\t}\n}\nfunction messageContentMedia(content) {\n\tif (\"mimeType\" in content && \"data\" in content) return { inlineData: {\n\t\tmimeType: content.mimeType,\n\t\tdata: content.data\n\t} };\n\tif (\"mimeType\" in content && \"fileUri\" in content) return { fileData: {\n\t\tmimeType: content.mimeType,\n\t\tfileUri: content.fileUri\n\t} };\n\tthrow new Error(\"Invalid media content\");\n}\nfunction inferToolNameFromPreviousMessages(message, previousMessages) {\n\treturn previousMessages.map((msg) => {\n\t\tif ((0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_1__.isAIMessage)(msg)) return msg.tool_calls ?? [];\n\t\treturn [];\n\t}).flat().find((toolCall) => {\n\t\treturn toolCall.id === message.tool_call_id;\n\t})?.name;\n}\nfunction _getStandardContentBlockConverter(isMultimodalModel) {\n\tconst standardContentBlockConverter = {\n\t\tproviderName: \"Google Gemini\",\n\t\tfromStandardTextBlock(block) {\n\t\t\treturn { text: block.text };\n\t\t},\n\t\tfromStandardImageBlock(block) {\n\t\t\tif (!isMultimodalModel) throw new Error(\"This model does not support images\");\n\t\t\tif (block.source_type === \"url\") {\n\t\t\t\tconst data = (0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_1__.parseBase64DataUrl)({ dataUrl: block.url });\n\t\t\t\tif (data) return { inlineData: {\n\t\t\t\t\tmimeType: data.mime_type,\n\t\t\t\t\tdata: data.data\n\t\t\t\t} };\n\t\t\t\telse return { fileData: {\n\t\t\t\t\tmimeType: block.mime_type ?? \"\",\n\t\t\t\t\tfileUri: block.url\n\t\t\t\t} };\n\t\t\t}\n\t\t\tif (block.source_type === \"base64\") return { inlineData: {\n\t\t\t\tmimeType: block.mime_type ?? \"\",\n\t\t\t\tdata: block.data\n\t\t\t} };\n\t\t\tthrow new Error(`Unsupported source type: ${block.source_type}`);\n\t\t},\n\t\tfromStandardAudioBlock(block) {\n\t\t\tif (!isMultimodalModel) throw new Error(\"This model does not support audio\");\n\t\t\tif (block.source_type === \"url\") {\n\t\t\t\tconst data = (0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_1__.parseBase64DataUrl)({ dataUrl: block.url });\n\t\t\t\tif (data) return { inlineData: {\n\t\t\t\t\tmimeType: data.mime_type,\n\t\t\t\t\tdata: data.data\n\t\t\t\t} };\n\t\t\t\telse return { fileData: {\n\t\t\t\t\tmimeType: block.mime_type ?? \"\",\n\t\t\t\t\tfileUri: block.url\n\t\t\t\t} };\n\t\t\t}\n\t\t\tif (block.source_type === \"base64\") return { inlineData: {\n\t\t\t\tmimeType: block.mime_type ?? \"\",\n\t\t\t\tdata: block.data\n\t\t\t} };\n\t\t\tthrow new Error(`Unsupported source type: ${block.source_type}`);\n\t\t},\n\t\tfromStandardFileBlock(block) {\n\t\t\tif (!isMultimodalModel) throw new Error(\"This model does not support files\");\n\t\t\tif (block.source_type === \"text\") return { text: block.text };\n\t\t\tif (block.source_type === \"url\") {\n\t\t\t\tconst data = (0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_1__.parseBase64DataUrl)({ dataUrl: block.url });\n\t\t\t\tif (data) return { inlineData: {\n\t\t\t\t\tmimeType: data.mime_type,\n\t\t\t\t\tdata: data.data\n\t\t\t\t} };\n\t\t\t\telse return { fileData: {\n\t\t\t\t\tmimeType: block.mime_type ?? \"\",\n\t\t\t\t\tfileUri: block.url\n\t\t\t\t} };\n\t\t\t}\n\t\t\tif (block.source_type === \"base64\") return { inlineData: {\n\t\t\t\tmimeType: block.mime_type ?? \"\",\n\t\t\t\tdata: block.data\n\t\t\t} };\n\t\t\tthrow new Error(`Unsupported source type: ${block.source_type}`);\n\t\t}\n\t};\n\treturn standardContentBlockConverter;\n}\nfunction _convertLangChainContentToPart(content, isMultimodalModel) {\n\tif ((0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_1__.isDataContentBlock)(content)) return (0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_1__.convertToProviderContentBlock)(content, _getStandardContentBlockConverter(isMultimodalModel));\n\tif (content.type === \"text\") return { text: content.text };\n\telse if (content.type === \"executableCode\") return { executableCode: content.executableCode };\n\telse if (content.type === \"codeExecutionResult\") return { codeExecutionResult: content.codeExecutionResult };\n\telse if (content.type === \"image_url\") {\n\t\tif (!isMultimodalModel) throw new Error(`This model does not support images`);\n\t\tlet source;\n\t\tif (typeof content.image_url === \"string\") source = content.image_url;\n\t\telse if (typeof content.image_url === \"object\" && \"url\" in content.image_url) source = content.image_url.url;\n\t\telse throw new Error(\"Please provide image as base64 encoded data URL\");\n\t\tconst [dm, data] = source.split(\",\");\n\t\tif (!dm.startsWith(\"data:\")) throw new Error(\"Please provide image as base64 encoded data URL\");\n\t\tconst [mimeType, encoding] = dm.replace(/^data:/, \"\").split(\";\");\n\t\tif (encoding !== \"base64\") throw new Error(\"Please provide image as base64 encoded data URL\");\n\t\treturn { inlineData: {\n\t\t\tdata,\n\t\t\tmimeType\n\t\t} };\n\t} else if (content.type === \"media\") return messageContentMedia(content);\n\telse if (content.type === \"tool_use\") return { functionCall: {\n\t\tname: content.name,\n\t\targs: content.input\n\t} };\n\telse if (content.type?.includes(\"/\") && content.type.split(\"/\").length === 2 && \"data\" in content && typeof content.data === \"string\") return { inlineData: {\n\t\tmimeType: content.type,\n\t\tdata: content.data\n\t} };\n\telse if (\"functionCall\" in content) return void 0;\n\telse if (\"type\" in content) throw new Error(`Unknown content type ${content.type}`);\n\telse throw new Error(`Unknown content ${JSON.stringify(content)}`);\n}\nfunction convertMessageContentToParts(message, isMultimodalModel, previousMessages) {\n\tif ((0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_1__.isToolMessage)(message)) {\n\t\tconst messageName = message.name ?? inferToolNameFromPreviousMessages(message, previousMessages);\n\t\tif (messageName === void 0) throw new Error(`Google requires a tool name for each tool call response, and we could not infer a called tool name for ToolMessage \"${message.id}\" from your passed messages. Please populate a \"name\" field on that ToolMessage explicitly.`);\n\t\tconst result = Array.isArray(message.content) ? message.content.map((c) => _convertLangChainContentToPart(c, isMultimodalModel)).filter((p) => p !== void 0) : message.content;\n\t\tif (message.status === \"error\") return [{ functionResponse: {\n\t\t\tname: messageName,\n\t\t\tresponse: { error: { details: result } }\n\t\t} }];\n\t\treturn [{ functionResponse: {\n\t\t\tname: messageName,\n\t\t\tresponse: { result }\n\t\t} }];\n\t}\n\tlet functionCalls = [];\n\tconst messageParts = [];\n\tif (typeof message.content === \"string\" && message.content) messageParts.push({ text: message.content });\n\tif (Array.isArray(message.content)) messageParts.push(...message.content.map((c) => _convertLangChainContentToPart(c, isMultimodalModel)).filter((p) => p !== void 0));\n\tif ((0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_1__.isAIMessage)(message) && message.tool_calls?.length) functionCalls = message.tool_calls.map((tc) => {\n\t\treturn { functionCall: {\n\t\t\tname: tc.name,\n\t\t\targs: tc.args\n\t\t} };\n\t});\n\treturn [...messageParts, ...functionCalls];\n}\nfunction convertBaseMessagesToContent(messages, isMultimodalModel, convertSystemMessageToHumanContent = false) {\n\treturn messages.reduce((acc, message, index) => {\n\t\tif (!(0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_1__.isBaseMessage)(message)) throw new Error(\"Unsupported message input\");\n\t\tconst author = getMessageAuthor(message);\n\t\tif (author === \"system\" && index !== 0) throw new Error(\"System message should be the first one\");\n\t\tconst role = convertAuthorToRole(author);\n\t\tconst prevContent = acc.content[acc.content.length];\n\t\tif (!acc.mergeWithPreviousContent && prevContent && prevContent.role === role) throw new Error(\"Google Generative AI requires alternate messages between authors\");\n\t\tconst parts = convertMessageContentToParts(message, isMultimodalModel, messages.slice(0, index));\n\t\tif (acc.mergeWithPreviousContent) {\n\t\t\tconst prevContent$1 = acc.content[acc.content.length - 1];\n\t\t\tif (!prevContent$1) throw new Error(\"There was a problem parsing your system message. Please try a prompt without one.\");\n\t\t\tprevContent$1.parts.push(...parts);\n\t\t\treturn {\n\t\t\t\tmergeWithPreviousContent: false,\n\t\t\t\tcontent: acc.content\n\t\t\t};\n\t\t}\n\t\tlet actualRole = role;\n\t\tif (actualRole === \"function\" || actualRole === \"system\" && !convertSystemMessageToHumanContent) actualRole = \"user\";\n\t\tconst content = {\n\t\t\trole: actualRole,\n\t\t\tparts\n\t\t};\n\t\treturn {\n\t\t\tmergeWithPreviousContent: author === \"system\" && !convertSystemMessageToHumanContent,\n\t\t\tcontent: [...acc.content, content]\n\t\t};\n\t}, {\n\t\tcontent: [],\n\t\tmergeWithPreviousContent: false\n\t}).content;\n}\nfunction mapGenerateContentResultToChatResult(response, extra) {\n\tif (!response.candidates || response.candidates.length === 0 || !response.candidates[0]) return {\n\t\tgenerations: [],\n\t\tllmOutput: { filters: response.promptFeedback }\n\t};\n\tconst functionCalls = response.functionCalls();\n\tconst [candidate] = response.candidates;\n\tconst { content: candidateContent,...generationInfo } = candidate;\n\tlet content;\n\tif (Array.isArray(candidateContent?.parts) && candidateContent.parts.length === 1 && candidateContent.parts[0].text) content = candidateContent.parts[0].text;\n\telse if (Array.isArray(candidateContent?.parts) && candidateContent.parts.length > 0) content = candidateContent.parts.map((p) => {\n\t\tif (\"text\" in p) return {\n\t\t\ttype: \"text\",\n\t\t\ttext: p.text\n\t\t};\n\t\telse if (\"inlineData\" in p) return {\n\t\t\ttype: \"inlineData\",\n\t\t\tinlineData: p.inlineData\n\t\t};\n\t\telse if (\"functionCall\" in p) return {\n\t\t\ttype: \"functionCall\",\n\t\t\tfunctionCall: p.functionCall\n\t\t};\n\t\telse if (\"functionResponse\" in p) return {\n\t\t\ttype: \"functionResponse\",\n\t\t\tfunctionResponse: p.functionResponse\n\t\t};\n\t\telse if (\"fileData\" in p) return {\n\t\t\ttype: \"fileData\",\n\t\t\tfileData: p.fileData\n\t\t};\n\t\telse if (\"executableCode\" in p) return {\n\t\t\ttype: \"executableCode\",\n\t\t\texecutableCode: p.executableCode\n\t\t};\n\t\telse if (\"codeExecutionResult\" in p) return {\n\t\t\ttype: \"codeExecutionResult\",\n\t\t\tcodeExecutionResult: p.codeExecutionResult\n\t\t};\n\t\treturn p;\n\t});\n\telse content = [];\n\tlet text = \"\";\n\tif (typeof content === \"string\") text = content;\n\telse if (Array.isArray(content) && content.length > 0) {\n\t\tconst block = content.find((b) => \"text\" in b);\n\t\ttext = block?.text ?? text;\n\t}\n\tconst generation = {\n\t\ttext,\n\t\tmessage: new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_1__.AIMessage({\n\t\t\tcontent: content ?? \"\",\n\t\t\ttool_calls: functionCalls?.map((fc) => {\n\t\t\t\treturn {\n\t\t\t\t\t...fc,\n\t\t\t\t\ttype: \"tool_call\",\n\t\t\t\t\tid: \"id\" in fc && typeof fc.id === \"string\" ? fc.id : (0,uuid__WEBPACK_IMPORTED_MODULE_5__[\"default\"])()\n\t\t\t\t};\n\t\t\t}),\n\t\t\tadditional_kwargs: { ...generationInfo },\n\t\t\tusage_metadata: extra?.usageMetadata\n\t\t}),\n\t\tgenerationInfo\n\t};\n\treturn {\n\t\tgenerations: [generation],\n\t\tllmOutput: { tokenUsage: {\n\t\t\tpromptTokens: extra?.usageMetadata?.input_tokens,\n\t\t\tcompletionTokens: extra?.usageMetadata?.output_tokens,\n\t\t\ttotalTokens: extra?.usageMetadata?.total_tokens\n\t\t} }\n\t};\n}\nfunction convertResponseContentToChatGenerationChunk(response, extra) {\n\tif (!response.candidates || response.candidates.length === 0) return null;\n\tconst functionCalls = response.functionCalls();\n\tconst [candidate] = response.candidates;\n\tconst { content: candidateContent,...generationInfo } = candidate;\n\tlet content;\n\tif (Array.isArray(candidateContent?.parts) && candidateContent.parts.every((p) => \"text\" in p)) content = candidateContent.parts.map((p) => p.text).join(\"\");\n\telse if (Array.isArray(candidateContent?.parts)) content = candidateContent.parts.map((p) => {\n\t\tif (\"text\" in p) return {\n\t\t\ttype: \"text\",\n\t\t\ttext: p.text\n\t\t};\n\t\telse if (\"inlineData\" in p) return {\n\t\t\ttype: \"inlineData\",\n\t\t\tinlineData: p.inlineData\n\t\t};\n\t\telse if (\"functionCall\" in p) return {\n\t\t\ttype: \"functionCall\",\n\t\t\tfunctionCall: p.functionCall\n\t\t};\n\t\telse if (\"functionResponse\" in p) return {\n\t\t\ttype: \"functionResponse\",\n\t\t\tfunctionResponse: p.functionResponse\n\t\t};\n\t\telse if (\"fileData\" in p) return {\n\t\t\ttype: \"fileData\",\n\t\t\tfileData: p.fileData\n\t\t};\n\t\telse if (\"executableCode\" in p) return {\n\t\t\ttype: \"executableCode\",\n\t\t\texecutableCode: p.executableCode\n\t\t};\n\t\telse if (\"codeExecutionResult\" in p) return {\n\t\t\ttype: \"codeExecutionResult\",\n\t\t\tcodeExecutionResult: p.codeExecutionResult\n\t\t};\n\t\treturn p;\n\t});\n\telse content = [];\n\tlet text = \"\";\n\tif (content && typeof content === \"string\") text = content;\n\telse if (Array.isArray(content)) {\n\t\tconst block = content.find((b) => \"text\" in b);\n\t\ttext = block?.text ?? \"\";\n\t}\n\tconst toolCallChunks = [];\n\tif (functionCalls) toolCallChunks.push(...functionCalls.map((fc) => ({\n\t\t...fc,\n\t\targs: JSON.stringify(fc.args),\n\t\tindex: extra.index,\n\t\ttype: \"tool_call_chunk\",\n\t\tid: \"id\" in fc && typeof fc.id === \"string\" ? fc.id : (0,uuid__WEBPACK_IMPORTED_MODULE_5__[\"default\"])()\n\t})));\n\treturn new _langchain_core_outputs__WEBPACK_IMPORTED_MODULE_2__.ChatGenerationChunk({\n\t\ttext,\n\t\tmessage: new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_1__.AIMessageChunk({\n\t\t\tcontent: content || \"\",\n\t\t\tname: !candidateContent ? void 0 : candidateContent.role,\n\t\t\ttool_call_chunks: toolCallChunks,\n\t\t\tadditional_kwargs: {},\n\t\t\tresponse_metadata: { model_provider: \"google-genai\" },\n\t\t\tusage_metadata: extra.usageMetadata\n\t\t}),\n\t\tgenerationInfo\n\t});\n}\nfunction convertToGenerativeAITools(tools) {\n\tif (tools.every((tool) => \"functionDeclarations\" in tool && Array.isArray(tool.functionDeclarations))) return tools;\n\treturn [{ functionDeclarations: tools.map((tool) => {\n\t\tif ((0,_langchain_core_utils_function_calling__WEBPACK_IMPORTED_MODULE_3__.isLangChainTool)(tool)) {\n\t\t\tconst jsonSchema = (0,_zod_to_genai_parameters_js__WEBPACK_IMPORTED_MODULE_0__.schemaToGenerativeAIParameters)(tool.schema);\n\t\t\tif (jsonSchema.type === \"object\" && \"properties\" in jsonSchema && Object.keys(jsonSchema.properties).length === 0) return {\n\t\t\t\tname: tool.name,\n\t\t\t\tdescription: tool.description\n\t\t\t};\n\t\t\treturn {\n\t\t\t\tname: tool.name,\n\t\t\t\tdescription: tool.description,\n\t\t\t\tparameters: jsonSchema\n\t\t\t};\n\t\t}\n\t\tif ((0,_langchain_core_language_models_base__WEBPACK_IMPORTED_MODULE_4__.isOpenAITool)(tool)) return {\n\t\t\tname: tool.function.name,\n\t\t\tdescription: tool.function.description ?? `A function available to call.`,\n\t\t\tparameters: (0,_zod_to_genai_parameters_js__WEBPACK_IMPORTED_MODULE_0__.jsonSchemaToGeminiParameters)(tool.function.parameters)\n\t\t};\n\t\treturn tool;\n\t}) }];\n}\n\n//#endregion\n\n//# sourceMappingURL=common.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitnb29nbGUtZ2VuYWlAMS4wLjBfQGxhbmdjaGFpbitjb3JlQDEuMC4xX29wZW5haUA2LjcuMF93c0A4LjE4LjNfem9kQDMuMjUuNzZfXy9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvZGlzdC91dGlscy9jb21tb24uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUE0RztBQUN3RjtBQUN0STtBQUNXO0FBQ0w7QUFDMUM7O0FBRTFCO0FBQ0E7QUFDQTtBQUNBLEtBQUssaUVBQVc7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNERBQTRELE9BQU87QUFDbkU7QUFDQTtBQUNBO0FBQ0EsMERBQTBEO0FBQzFEO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RDtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0scUVBQVc7QUFDakI7QUFDQSxFQUFFO0FBQ0Y7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLDRFQUFrQixHQUFHLG9CQUFvQjtBQUMxRCx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdEO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxrQkFBa0I7QUFDakUsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiw0RUFBa0IsR0FBRyxvQkFBb0I7QUFDMUQsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRDtBQUNoRDtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0Msa0JBQWtC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ckIsc0JBQXNCLDJGQUE4QjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sa0ZBQVk7QUFDbEI7QUFDQTtBQUNBLGVBQWUseUZBQTRCO0FBQzNDO0FBQ0E7QUFDQSxFQUFFLEdBQUc7QUFDTDs7QUFFQTtBQUN1SjtBQUN2SiIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW5yb3V0ZXItbGFuZ2dyYXBoLy4vbm9kZV9tb2R1bGVzLy5wbnBtL0BsYW5nY2hhaW4rZ29vZ2xlLWdlbmFpQDEuMC4wX0BsYW5nY2hhaW4rY29yZUAxLjAuMV9vcGVuYWlANi43LjBfd3NAOC4xOC4zX3pvZEAzLjI1Ljc2X18vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vZ29vZ2xlLWdlbmFpL2Rpc3QvdXRpbHMvY29tbW9uLmpzPzI0NzciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsganNvblNjaGVtYVRvR2VtaW5pUGFyYW1ldGVycywgc2NoZW1hVG9HZW5lcmF0aXZlQUlQYXJhbWV0ZXJzIH0gZnJvbSBcIi4vem9kX3RvX2dlbmFpX3BhcmFtZXRlcnMuanNcIjtcbmltcG9ydCB7IEFJTWVzc2FnZSwgQUlNZXNzYWdlQ2h1bmssIENoYXRNZXNzYWdlLCBjb252ZXJ0VG9Qcm92aWRlckNvbnRlbnRCbG9jaywgaXNBSU1lc3NhZ2UsIGlzQmFzZU1lc3NhZ2UsIGlzRGF0YUNvbnRlbnRCbG9jaywgaXNUb29sTWVzc2FnZSwgcGFyc2VCYXNlNjREYXRhVXJsIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9tZXNzYWdlc1wiO1xuaW1wb3J0IHsgQ2hhdEdlbmVyYXRpb25DaHVuayB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvb3V0cHV0c1wiO1xuaW1wb3J0IHsgaXNMYW5nQ2hhaW5Ub29sIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS91dGlscy9mdW5jdGlvbl9jYWxsaW5nXCI7XG5pbXBvcnQgeyBpc09wZW5BSVRvb2wgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL2xhbmd1YWdlX21vZGVscy9iYXNlXCI7XG5pbXBvcnQgeyB2NCB9IGZyb20gXCJ1dWlkXCI7XG5cbi8vI3JlZ2lvbiBzcmMvdXRpbHMvY29tbW9uLnRzXG5mdW5jdGlvbiBnZXRNZXNzYWdlQXV0aG9yKG1lc3NhZ2UpIHtcblx0Y29uc3QgdHlwZSA9IG1lc3NhZ2UuX2dldFR5cGUoKTtcblx0aWYgKENoYXRNZXNzYWdlLmlzSW5zdGFuY2UobWVzc2FnZSkpIHJldHVybiBtZXNzYWdlLnJvbGU7XG5cdGlmICh0eXBlID09PSBcInRvb2xcIikgcmV0dXJuIHR5cGU7XG5cdHJldHVybiBtZXNzYWdlLm5hbWUgPz8gdHlwZTtcbn1cbi8qKlxuKiBNYXBzIGEgbWVzc2FnZSB0eXBlIHRvIGEgR29vZ2xlIEdlbmVyYXRpdmUgQUkgY2hhdCBhdXRob3IuXG4qIEBwYXJhbSBtZXNzYWdlIFRoZSBtZXNzYWdlIHRvIG1hcC5cbiogQHBhcmFtIG1vZGVsIFRoZSBtb2RlbCB0byB1c2UgZm9yIG1hcHBpbmcuXG4qIEByZXR1cm5zIFRoZSBtZXNzYWdlIHR5cGUgbWFwcGVkIHRvIGEgR29vZ2xlIEdlbmVyYXRpdmUgQUkgY2hhdCBhdXRob3IuXG4qL1xuZnVuY3Rpb24gY29udmVydEF1dGhvclRvUm9sZShhdXRob3IpIHtcblx0c3dpdGNoIChhdXRob3IpIHtcblx0XHRjYXNlIFwic3VwZXJ2aXNvclwiOlxuXHRcdGNhc2UgXCJhaVwiOlxuXHRcdGNhc2UgXCJtb2RlbFwiOiByZXR1cm4gXCJtb2RlbFwiO1xuXHRcdGNhc2UgXCJzeXN0ZW1cIjogcmV0dXJuIFwic3lzdGVtXCI7XG5cdFx0Y2FzZSBcImh1bWFuXCI6IHJldHVybiBcInVzZXJcIjtcblx0XHRjYXNlIFwidG9vbFwiOlxuXHRcdGNhc2UgXCJmdW5jdGlvblwiOiByZXR1cm4gXCJmdW5jdGlvblwiO1xuXHRcdGRlZmF1bHQ6IHRocm93IG5ldyBFcnJvcihgVW5rbm93biAvIHVuc3VwcG9ydGVkIGF1dGhvcjogJHthdXRob3J9YCk7XG5cdH1cbn1cbmZ1bmN0aW9uIG1lc3NhZ2VDb250ZW50TWVkaWEoY29udGVudCkge1xuXHRpZiAoXCJtaW1lVHlwZVwiIGluIGNvbnRlbnQgJiYgXCJkYXRhXCIgaW4gY29udGVudCkgcmV0dXJuIHsgaW5saW5lRGF0YToge1xuXHRcdG1pbWVUeXBlOiBjb250ZW50Lm1pbWVUeXBlLFxuXHRcdGRhdGE6IGNvbnRlbnQuZGF0YVxuXHR9IH07XG5cdGlmIChcIm1pbWVUeXBlXCIgaW4gY29udGVudCAmJiBcImZpbGVVcmlcIiBpbiBjb250ZW50KSByZXR1cm4geyBmaWxlRGF0YToge1xuXHRcdG1pbWVUeXBlOiBjb250ZW50Lm1pbWVUeXBlLFxuXHRcdGZpbGVVcmk6IGNvbnRlbnQuZmlsZVVyaVxuXHR9IH07XG5cdHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgbWVkaWEgY29udGVudFwiKTtcbn1cbmZ1bmN0aW9uIGluZmVyVG9vbE5hbWVGcm9tUHJldmlvdXNNZXNzYWdlcyhtZXNzYWdlLCBwcmV2aW91c01lc3NhZ2VzKSB7XG5cdHJldHVybiBwcmV2aW91c01lc3NhZ2VzLm1hcCgobXNnKSA9PiB7XG5cdFx0aWYgKGlzQUlNZXNzYWdlKG1zZykpIHJldHVybiBtc2cudG9vbF9jYWxscyA/PyBbXTtcblx0XHRyZXR1cm4gW107XG5cdH0pLmZsYXQoKS5maW5kKCh0b29sQ2FsbCkgPT4ge1xuXHRcdHJldHVybiB0b29sQ2FsbC5pZCA9PT0gbWVzc2FnZS50b29sX2NhbGxfaWQ7XG5cdH0pPy5uYW1lO1xufVxuZnVuY3Rpb24gX2dldFN0YW5kYXJkQ29udGVudEJsb2NrQ29udmVydGVyKGlzTXVsdGltb2RhbE1vZGVsKSB7XG5cdGNvbnN0IHN0YW5kYXJkQ29udGVudEJsb2NrQ29udmVydGVyID0ge1xuXHRcdHByb3ZpZGVyTmFtZTogXCJHb29nbGUgR2VtaW5pXCIsXG5cdFx0ZnJvbVN0YW5kYXJkVGV4dEJsb2NrKGJsb2NrKSB7XG5cdFx0XHRyZXR1cm4geyB0ZXh0OiBibG9jay50ZXh0IH07XG5cdFx0fSxcblx0XHRmcm9tU3RhbmRhcmRJbWFnZUJsb2NrKGJsb2NrKSB7XG5cdFx0XHRpZiAoIWlzTXVsdGltb2RhbE1vZGVsKSB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIG1vZGVsIGRvZXMgbm90IHN1cHBvcnQgaW1hZ2VzXCIpO1xuXHRcdFx0aWYgKGJsb2NrLnNvdXJjZV90eXBlID09PSBcInVybFwiKSB7XG5cdFx0XHRcdGNvbnN0IGRhdGEgPSBwYXJzZUJhc2U2NERhdGFVcmwoeyBkYXRhVXJsOiBibG9jay51cmwgfSk7XG5cdFx0XHRcdGlmIChkYXRhKSByZXR1cm4geyBpbmxpbmVEYXRhOiB7XG5cdFx0XHRcdFx0bWltZVR5cGU6IGRhdGEubWltZV90eXBlLFxuXHRcdFx0XHRcdGRhdGE6IGRhdGEuZGF0YVxuXHRcdFx0XHR9IH07XG5cdFx0XHRcdGVsc2UgcmV0dXJuIHsgZmlsZURhdGE6IHtcblx0XHRcdFx0XHRtaW1lVHlwZTogYmxvY2subWltZV90eXBlID8/IFwiXCIsXG5cdFx0XHRcdFx0ZmlsZVVyaTogYmxvY2sudXJsXG5cdFx0XHRcdH0gfTtcblx0XHRcdH1cblx0XHRcdGlmIChibG9jay5zb3VyY2VfdHlwZSA9PT0gXCJiYXNlNjRcIikgcmV0dXJuIHsgaW5saW5lRGF0YToge1xuXHRcdFx0XHRtaW1lVHlwZTogYmxvY2subWltZV90eXBlID8/IFwiXCIsXG5cdFx0XHRcdGRhdGE6IGJsb2NrLmRhdGFcblx0XHRcdH0gfTtcblx0XHRcdHRocm93IG5ldyBFcnJvcihgVW5zdXBwb3J0ZWQgc291cmNlIHR5cGU6ICR7YmxvY2suc291cmNlX3R5cGV9YCk7XG5cdFx0fSxcblx0XHRmcm9tU3RhbmRhcmRBdWRpb0Jsb2NrKGJsb2NrKSB7XG5cdFx0XHRpZiAoIWlzTXVsdGltb2RhbE1vZGVsKSB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIG1vZGVsIGRvZXMgbm90IHN1cHBvcnQgYXVkaW9cIik7XG5cdFx0XHRpZiAoYmxvY2suc291cmNlX3R5cGUgPT09IFwidXJsXCIpIHtcblx0XHRcdFx0Y29uc3QgZGF0YSA9IHBhcnNlQmFzZTY0RGF0YVVybCh7IGRhdGFVcmw6IGJsb2NrLnVybCB9KTtcblx0XHRcdFx0aWYgKGRhdGEpIHJldHVybiB7IGlubGluZURhdGE6IHtcblx0XHRcdFx0XHRtaW1lVHlwZTogZGF0YS5taW1lX3R5cGUsXG5cdFx0XHRcdFx0ZGF0YTogZGF0YS5kYXRhXG5cdFx0XHRcdH0gfTtcblx0XHRcdFx0ZWxzZSByZXR1cm4geyBmaWxlRGF0YToge1xuXHRcdFx0XHRcdG1pbWVUeXBlOiBibG9jay5taW1lX3R5cGUgPz8gXCJcIixcblx0XHRcdFx0XHRmaWxlVXJpOiBibG9jay51cmxcblx0XHRcdFx0fSB9O1xuXHRcdFx0fVxuXHRcdFx0aWYgKGJsb2NrLnNvdXJjZV90eXBlID09PSBcImJhc2U2NFwiKSByZXR1cm4geyBpbmxpbmVEYXRhOiB7XG5cdFx0XHRcdG1pbWVUeXBlOiBibG9jay5taW1lX3R5cGUgPz8gXCJcIixcblx0XHRcdFx0ZGF0YTogYmxvY2suZGF0YVxuXHRcdFx0fSB9O1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCBzb3VyY2UgdHlwZTogJHtibG9jay5zb3VyY2VfdHlwZX1gKTtcblx0XHR9LFxuXHRcdGZyb21TdGFuZGFyZEZpbGVCbG9jayhibG9jaykge1xuXHRcdFx0aWYgKCFpc011bHRpbW9kYWxNb2RlbCkgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBtb2RlbCBkb2VzIG5vdCBzdXBwb3J0IGZpbGVzXCIpO1xuXHRcdFx0aWYgKGJsb2NrLnNvdXJjZV90eXBlID09PSBcInRleHRcIikgcmV0dXJuIHsgdGV4dDogYmxvY2sudGV4dCB9O1xuXHRcdFx0aWYgKGJsb2NrLnNvdXJjZV90eXBlID09PSBcInVybFwiKSB7XG5cdFx0XHRcdGNvbnN0IGRhdGEgPSBwYXJzZUJhc2U2NERhdGFVcmwoeyBkYXRhVXJsOiBibG9jay51cmwgfSk7XG5cdFx0XHRcdGlmIChkYXRhKSByZXR1cm4geyBpbmxpbmVEYXRhOiB7XG5cdFx0XHRcdFx0bWltZVR5cGU6IGRhdGEubWltZV90eXBlLFxuXHRcdFx0XHRcdGRhdGE6IGRhdGEuZGF0YVxuXHRcdFx0XHR9IH07XG5cdFx0XHRcdGVsc2UgcmV0dXJuIHsgZmlsZURhdGE6IHtcblx0XHRcdFx0XHRtaW1lVHlwZTogYmxvY2subWltZV90eXBlID8/IFwiXCIsXG5cdFx0XHRcdFx0ZmlsZVVyaTogYmxvY2sudXJsXG5cdFx0XHRcdH0gfTtcblx0XHRcdH1cblx0XHRcdGlmIChibG9jay5zb3VyY2VfdHlwZSA9PT0gXCJiYXNlNjRcIikgcmV0dXJuIHsgaW5saW5lRGF0YToge1xuXHRcdFx0XHRtaW1lVHlwZTogYmxvY2subWltZV90eXBlID8/IFwiXCIsXG5cdFx0XHRcdGRhdGE6IGJsb2NrLmRhdGFcblx0XHRcdH0gfTtcblx0XHRcdHRocm93IG5ldyBFcnJvcihgVW5zdXBwb3J0ZWQgc291cmNlIHR5cGU6ICR7YmxvY2suc291cmNlX3R5cGV9YCk7XG5cdFx0fVxuXHR9O1xuXHRyZXR1cm4gc3RhbmRhcmRDb250ZW50QmxvY2tDb252ZXJ0ZXI7XG59XG5mdW5jdGlvbiBfY29udmVydExhbmdDaGFpbkNvbnRlbnRUb1BhcnQoY29udGVudCwgaXNNdWx0aW1vZGFsTW9kZWwpIHtcblx0aWYgKGlzRGF0YUNvbnRlbnRCbG9jayhjb250ZW50KSkgcmV0dXJuIGNvbnZlcnRUb1Byb3ZpZGVyQ29udGVudEJsb2NrKGNvbnRlbnQsIF9nZXRTdGFuZGFyZENvbnRlbnRCbG9ja0NvbnZlcnRlcihpc011bHRpbW9kYWxNb2RlbCkpO1xuXHRpZiAoY29udGVudC50eXBlID09PSBcInRleHRcIikgcmV0dXJuIHsgdGV4dDogY29udGVudC50ZXh0IH07XG5cdGVsc2UgaWYgKGNvbnRlbnQudHlwZSA9PT0gXCJleGVjdXRhYmxlQ29kZVwiKSByZXR1cm4geyBleGVjdXRhYmxlQ29kZTogY29udGVudC5leGVjdXRhYmxlQ29kZSB9O1xuXHRlbHNlIGlmIChjb250ZW50LnR5cGUgPT09IFwiY29kZUV4ZWN1dGlvblJlc3VsdFwiKSByZXR1cm4geyBjb2RlRXhlY3V0aW9uUmVzdWx0OiBjb250ZW50LmNvZGVFeGVjdXRpb25SZXN1bHQgfTtcblx0ZWxzZSBpZiAoY29udGVudC50eXBlID09PSBcImltYWdlX3VybFwiKSB7XG5cdFx0aWYgKCFpc011bHRpbW9kYWxNb2RlbCkgdGhyb3cgbmV3IEVycm9yKGBUaGlzIG1vZGVsIGRvZXMgbm90IHN1cHBvcnQgaW1hZ2VzYCk7XG5cdFx0bGV0IHNvdXJjZTtcblx0XHRpZiAodHlwZW9mIGNvbnRlbnQuaW1hZ2VfdXJsID09PSBcInN0cmluZ1wiKSBzb3VyY2UgPSBjb250ZW50LmltYWdlX3VybDtcblx0XHRlbHNlIGlmICh0eXBlb2YgY29udGVudC5pbWFnZV91cmwgPT09IFwib2JqZWN0XCIgJiYgXCJ1cmxcIiBpbiBjb250ZW50LmltYWdlX3VybCkgc291cmNlID0gY29udGVudC5pbWFnZV91cmwudXJsO1xuXHRcdGVsc2UgdGhyb3cgbmV3IEVycm9yKFwiUGxlYXNlIHByb3ZpZGUgaW1hZ2UgYXMgYmFzZTY0IGVuY29kZWQgZGF0YSBVUkxcIik7XG5cdFx0Y29uc3QgW2RtLCBkYXRhXSA9IHNvdXJjZS5zcGxpdChcIixcIik7XG5cdFx0aWYgKCFkbS5zdGFydHNXaXRoKFwiZGF0YTpcIikpIHRocm93IG5ldyBFcnJvcihcIlBsZWFzZSBwcm92aWRlIGltYWdlIGFzIGJhc2U2NCBlbmNvZGVkIGRhdGEgVVJMXCIpO1xuXHRcdGNvbnN0IFttaW1lVHlwZSwgZW5jb2RpbmddID0gZG0ucmVwbGFjZSgvXmRhdGE6LywgXCJcIikuc3BsaXQoXCI7XCIpO1xuXHRcdGlmIChlbmNvZGluZyAhPT0gXCJiYXNlNjRcIikgdGhyb3cgbmV3IEVycm9yKFwiUGxlYXNlIHByb3ZpZGUgaW1hZ2UgYXMgYmFzZTY0IGVuY29kZWQgZGF0YSBVUkxcIik7XG5cdFx0cmV0dXJuIHsgaW5saW5lRGF0YToge1xuXHRcdFx0ZGF0YSxcblx0XHRcdG1pbWVUeXBlXG5cdFx0fSB9O1xuXHR9IGVsc2UgaWYgKGNvbnRlbnQudHlwZSA9PT0gXCJtZWRpYVwiKSByZXR1cm4gbWVzc2FnZUNvbnRlbnRNZWRpYShjb250ZW50KTtcblx0ZWxzZSBpZiAoY29udGVudC50eXBlID09PSBcInRvb2xfdXNlXCIpIHJldHVybiB7IGZ1bmN0aW9uQ2FsbDoge1xuXHRcdG5hbWU6IGNvbnRlbnQubmFtZSxcblx0XHRhcmdzOiBjb250ZW50LmlucHV0XG5cdH0gfTtcblx0ZWxzZSBpZiAoY29udGVudC50eXBlPy5pbmNsdWRlcyhcIi9cIikgJiYgY29udGVudC50eXBlLnNwbGl0KFwiL1wiKS5sZW5ndGggPT09IDIgJiYgXCJkYXRhXCIgaW4gY29udGVudCAmJiB0eXBlb2YgY29udGVudC5kYXRhID09PSBcInN0cmluZ1wiKSByZXR1cm4geyBpbmxpbmVEYXRhOiB7XG5cdFx0bWltZVR5cGU6IGNvbnRlbnQudHlwZSxcblx0XHRkYXRhOiBjb250ZW50LmRhdGFcblx0fSB9O1xuXHRlbHNlIGlmIChcImZ1bmN0aW9uQ2FsbFwiIGluIGNvbnRlbnQpIHJldHVybiB2b2lkIDA7XG5cdGVsc2UgaWYgKFwidHlwZVwiIGluIGNvbnRlbnQpIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBjb250ZW50IHR5cGUgJHtjb250ZW50LnR5cGV9YCk7XG5cdGVsc2UgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIGNvbnRlbnQgJHtKU09OLnN0cmluZ2lmeShjb250ZW50KX1gKTtcbn1cbmZ1bmN0aW9uIGNvbnZlcnRNZXNzYWdlQ29udGVudFRvUGFydHMobWVzc2FnZSwgaXNNdWx0aW1vZGFsTW9kZWwsIHByZXZpb3VzTWVzc2FnZXMpIHtcblx0aWYgKGlzVG9vbE1lc3NhZ2UobWVzc2FnZSkpIHtcblx0XHRjb25zdCBtZXNzYWdlTmFtZSA9IG1lc3NhZ2UubmFtZSA/PyBpbmZlclRvb2xOYW1lRnJvbVByZXZpb3VzTWVzc2FnZXMobWVzc2FnZSwgcHJldmlvdXNNZXNzYWdlcyk7XG5cdFx0aWYgKG1lc3NhZ2VOYW1lID09PSB2b2lkIDApIHRocm93IG5ldyBFcnJvcihgR29vZ2xlIHJlcXVpcmVzIGEgdG9vbCBuYW1lIGZvciBlYWNoIHRvb2wgY2FsbCByZXNwb25zZSwgYW5kIHdlIGNvdWxkIG5vdCBpbmZlciBhIGNhbGxlZCB0b29sIG5hbWUgZm9yIFRvb2xNZXNzYWdlIFwiJHttZXNzYWdlLmlkfVwiIGZyb20geW91ciBwYXNzZWQgbWVzc2FnZXMuIFBsZWFzZSBwb3B1bGF0ZSBhIFwibmFtZVwiIGZpZWxkIG9uIHRoYXQgVG9vbE1lc3NhZ2UgZXhwbGljaXRseS5gKTtcblx0XHRjb25zdCByZXN1bHQgPSBBcnJheS5pc0FycmF5KG1lc3NhZ2UuY29udGVudCkgPyBtZXNzYWdlLmNvbnRlbnQubWFwKChjKSA9PiBfY29udmVydExhbmdDaGFpbkNvbnRlbnRUb1BhcnQoYywgaXNNdWx0aW1vZGFsTW9kZWwpKS5maWx0ZXIoKHApID0+IHAgIT09IHZvaWQgMCkgOiBtZXNzYWdlLmNvbnRlbnQ7XG5cdFx0aWYgKG1lc3NhZ2Uuc3RhdHVzID09PSBcImVycm9yXCIpIHJldHVybiBbeyBmdW5jdGlvblJlc3BvbnNlOiB7XG5cdFx0XHRuYW1lOiBtZXNzYWdlTmFtZSxcblx0XHRcdHJlc3BvbnNlOiB7IGVycm9yOiB7IGRldGFpbHM6IHJlc3VsdCB9IH1cblx0XHR9IH1dO1xuXHRcdHJldHVybiBbeyBmdW5jdGlvblJlc3BvbnNlOiB7XG5cdFx0XHRuYW1lOiBtZXNzYWdlTmFtZSxcblx0XHRcdHJlc3BvbnNlOiB7IHJlc3VsdCB9XG5cdFx0fSB9XTtcblx0fVxuXHRsZXQgZnVuY3Rpb25DYWxscyA9IFtdO1xuXHRjb25zdCBtZXNzYWdlUGFydHMgPSBbXTtcblx0aWYgKHR5cGVvZiBtZXNzYWdlLmNvbnRlbnQgPT09IFwic3RyaW5nXCIgJiYgbWVzc2FnZS5jb250ZW50KSBtZXNzYWdlUGFydHMucHVzaCh7IHRleHQ6IG1lc3NhZ2UuY29udGVudCB9KTtcblx0aWYgKEFycmF5LmlzQXJyYXkobWVzc2FnZS5jb250ZW50KSkgbWVzc2FnZVBhcnRzLnB1c2goLi4ubWVzc2FnZS5jb250ZW50Lm1hcCgoYykgPT4gX2NvbnZlcnRMYW5nQ2hhaW5Db250ZW50VG9QYXJ0KGMsIGlzTXVsdGltb2RhbE1vZGVsKSkuZmlsdGVyKChwKSA9PiBwICE9PSB2b2lkIDApKTtcblx0aWYgKGlzQUlNZXNzYWdlKG1lc3NhZ2UpICYmIG1lc3NhZ2UudG9vbF9jYWxscz8ubGVuZ3RoKSBmdW5jdGlvbkNhbGxzID0gbWVzc2FnZS50b29sX2NhbGxzLm1hcCgodGMpID0+IHtcblx0XHRyZXR1cm4geyBmdW5jdGlvbkNhbGw6IHtcblx0XHRcdG5hbWU6IHRjLm5hbWUsXG5cdFx0XHRhcmdzOiB0Yy5hcmdzXG5cdFx0fSB9O1xuXHR9KTtcblx0cmV0dXJuIFsuLi5tZXNzYWdlUGFydHMsIC4uLmZ1bmN0aW9uQ2FsbHNdO1xufVxuZnVuY3Rpb24gY29udmVydEJhc2VNZXNzYWdlc1RvQ29udGVudChtZXNzYWdlcywgaXNNdWx0aW1vZGFsTW9kZWwsIGNvbnZlcnRTeXN0ZW1NZXNzYWdlVG9IdW1hbkNvbnRlbnQgPSBmYWxzZSkge1xuXHRyZXR1cm4gbWVzc2FnZXMucmVkdWNlKChhY2MsIG1lc3NhZ2UsIGluZGV4KSA9PiB7XG5cdFx0aWYgKCFpc0Jhc2VNZXNzYWdlKG1lc3NhZ2UpKSB0aHJvdyBuZXcgRXJyb3IoXCJVbnN1cHBvcnRlZCBtZXNzYWdlIGlucHV0XCIpO1xuXHRcdGNvbnN0IGF1dGhvciA9IGdldE1lc3NhZ2VBdXRob3IobWVzc2FnZSk7XG5cdFx0aWYgKGF1dGhvciA9PT0gXCJzeXN0ZW1cIiAmJiBpbmRleCAhPT0gMCkgdGhyb3cgbmV3IEVycm9yKFwiU3lzdGVtIG1lc3NhZ2Ugc2hvdWxkIGJlIHRoZSBmaXJzdCBvbmVcIik7XG5cdFx0Y29uc3Qgcm9sZSA9IGNvbnZlcnRBdXRob3JUb1JvbGUoYXV0aG9yKTtcblx0XHRjb25zdCBwcmV2Q29udGVudCA9IGFjYy5jb250ZW50W2FjYy5jb250ZW50Lmxlbmd0aF07XG5cdFx0aWYgKCFhY2MubWVyZ2VXaXRoUHJldmlvdXNDb250ZW50ICYmIHByZXZDb250ZW50ICYmIHByZXZDb250ZW50LnJvbGUgPT09IHJvbGUpIHRocm93IG5ldyBFcnJvcihcIkdvb2dsZSBHZW5lcmF0aXZlIEFJIHJlcXVpcmVzIGFsdGVybmF0ZSBtZXNzYWdlcyBiZXR3ZWVuIGF1dGhvcnNcIik7XG5cdFx0Y29uc3QgcGFydHMgPSBjb252ZXJ0TWVzc2FnZUNvbnRlbnRUb1BhcnRzKG1lc3NhZ2UsIGlzTXVsdGltb2RhbE1vZGVsLCBtZXNzYWdlcy5zbGljZSgwLCBpbmRleCkpO1xuXHRcdGlmIChhY2MubWVyZ2VXaXRoUHJldmlvdXNDb250ZW50KSB7XG5cdFx0XHRjb25zdCBwcmV2Q29udGVudCQxID0gYWNjLmNvbnRlbnRbYWNjLmNvbnRlbnQubGVuZ3RoIC0gMV07XG5cdFx0XHRpZiAoIXByZXZDb250ZW50JDEpIHRocm93IG5ldyBFcnJvcihcIlRoZXJlIHdhcyBhIHByb2JsZW0gcGFyc2luZyB5b3VyIHN5c3RlbSBtZXNzYWdlLiBQbGVhc2UgdHJ5IGEgcHJvbXB0IHdpdGhvdXQgb25lLlwiKTtcblx0XHRcdHByZXZDb250ZW50JDEucGFydHMucHVzaCguLi5wYXJ0cyk7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRtZXJnZVdpdGhQcmV2aW91c0NvbnRlbnQ6IGZhbHNlLFxuXHRcdFx0XHRjb250ZW50OiBhY2MuY29udGVudFxuXHRcdFx0fTtcblx0XHR9XG5cdFx0bGV0IGFjdHVhbFJvbGUgPSByb2xlO1xuXHRcdGlmIChhY3R1YWxSb2xlID09PSBcImZ1bmN0aW9uXCIgfHwgYWN0dWFsUm9sZSA9PT0gXCJzeXN0ZW1cIiAmJiAhY29udmVydFN5c3RlbU1lc3NhZ2VUb0h1bWFuQ29udGVudCkgYWN0dWFsUm9sZSA9IFwidXNlclwiO1xuXHRcdGNvbnN0IGNvbnRlbnQgPSB7XG5cdFx0XHRyb2xlOiBhY3R1YWxSb2xlLFxuXHRcdFx0cGFydHNcblx0XHR9O1xuXHRcdHJldHVybiB7XG5cdFx0XHRtZXJnZVdpdGhQcmV2aW91c0NvbnRlbnQ6IGF1dGhvciA9PT0gXCJzeXN0ZW1cIiAmJiAhY29udmVydFN5c3RlbU1lc3NhZ2VUb0h1bWFuQ29udGVudCxcblx0XHRcdGNvbnRlbnQ6IFsuLi5hY2MuY29udGVudCwgY29udGVudF1cblx0XHR9O1xuXHR9LCB7XG5cdFx0Y29udGVudDogW10sXG5cdFx0bWVyZ2VXaXRoUHJldmlvdXNDb250ZW50OiBmYWxzZVxuXHR9KS5jb250ZW50O1xufVxuZnVuY3Rpb24gbWFwR2VuZXJhdGVDb250ZW50UmVzdWx0VG9DaGF0UmVzdWx0KHJlc3BvbnNlLCBleHRyYSkge1xuXHRpZiAoIXJlc3BvbnNlLmNhbmRpZGF0ZXMgfHwgcmVzcG9uc2UuY2FuZGlkYXRlcy5sZW5ndGggPT09IDAgfHwgIXJlc3BvbnNlLmNhbmRpZGF0ZXNbMF0pIHJldHVybiB7XG5cdFx0Z2VuZXJhdGlvbnM6IFtdLFxuXHRcdGxsbU91dHB1dDogeyBmaWx0ZXJzOiByZXNwb25zZS5wcm9tcHRGZWVkYmFjayB9XG5cdH07XG5cdGNvbnN0IGZ1bmN0aW9uQ2FsbHMgPSByZXNwb25zZS5mdW5jdGlvbkNhbGxzKCk7XG5cdGNvbnN0IFtjYW5kaWRhdGVdID0gcmVzcG9uc2UuY2FuZGlkYXRlcztcblx0Y29uc3QgeyBjb250ZW50OiBjYW5kaWRhdGVDb250ZW50LC4uLmdlbmVyYXRpb25JbmZvIH0gPSBjYW5kaWRhdGU7XG5cdGxldCBjb250ZW50O1xuXHRpZiAoQXJyYXkuaXNBcnJheShjYW5kaWRhdGVDb250ZW50Py5wYXJ0cykgJiYgY2FuZGlkYXRlQ29udGVudC5wYXJ0cy5sZW5ndGggPT09IDEgJiYgY2FuZGlkYXRlQ29udGVudC5wYXJ0c1swXS50ZXh0KSBjb250ZW50ID0gY2FuZGlkYXRlQ29udGVudC5wYXJ0c1swXS50ZXh0O1xuXHRlbHNlIGlmIChBcnJheS5pc0FycmF5KGNhbmRpZGF0ZUNvbnRlbnQ/LnBhcnRzKSAmJiBjYW5kaWRhdGVDb250ZW50LnBhcnRzLmxlbmd0aCA+IDApIGNvbnRlbnQgPSBjYW5kaWRhdGVDb250ZW50LnBhcnRzLm1hcCgocCkgPT4ge1xuXHRcdGlmIChcInRleHRcIiBpbiBwKSByZXR1cm4ge1xuXHRcdFx0dHlwZTogXCJ0ZXh0XCIsXG5cdFx0XHR0ZXh0OiBwLnRleHRcblx0XHR9O1xuXHRcdGVsc2UgaWYgKFwiaW5saW5lRGF0YVwiIGluIHApIHJldHVybiB7XG5cdFx0XHR0eXBlOiBcImlubGluZURhdGFcIixcblx0XHRcdGlubGluZURhdGE6IHAuaW5saW5lRGF0YVxuXHRcdH07XG5cdFx0ZWxzZSBpZiAoXCJmdW5jdGlvbkNhbGxcIiBpbiBwKSByZXR1cm4ge1xuXHRcdFx0dHlwZTogXCJmdW5jdGlvbkNhbGxcIixcblx0XHRcdGZ1bmN0aW9uQ2FsbDogcC5mdW5jdGlvbkNhbGxcblx0XHR9O1xuXHRcdGVsc2UgaWYgKFwiZnVuY3Rpb25SZXNwb25zZVwiIGluIHApIHJldHVybiB7XG5cdFx0XHR0eXBlOiBcImZ1bmN0aW9uUmVzcG9uc2VcIixcblx0XHRcdGZ1bmN0aW9uUmVzcG9uc2U6IHAuZnVuY3Rpb25SZXNwb25zZVxuXHRcdH07XG5cdFx0ZWxzZSBpZiAoXCJmaWxlRGF0YVwiIGluIHApIHJldHVybiB7XG5cdFx0XHR0eXBlOiBcImZpbGVEYXRhXCIsXG5cdFx0XHRmaWxlRGF0YTogcC5maWxlRGF0YVxuXHRcdH07XG5cdFx0ZWxzZSBpZiAoXCJleGVjdXRhYmxlQ29kZVwiIGluIHApIHJldHVybiB7XG5cdFx0XHR0eXBlOiBcImV4ZWN1dGFibGVDb2RlXCIsXG5cdFx0XHRleGVjdXRhYmxlQ29kZTogcC5leGVjdXRhYmxlQ29kZVxuXHRcdH07XG5cdFx0ZWxzZSBpZiAoXCJjb2RlRXhlY3V0aW9uUmVzdWx0XCIgaW4gcCkgcmV0dXJuIHtcblx0XHRcdHR5cGU6IFwiY29kZUV4ZWN1dGlvblJlc3VsdFwiLFxuXHRcdFx0Y29kZUV4ZWN1dGlvblJlc3VsdDogcC5jb2RlRXhlY3V0aW9uUmVzdWx0XG5cdFx0fTtcblx0XHRyZXR1cm4gcDtcblx0fSk7XG5cdGVsc2UgY29udGVudCA9IFtdO1xuXHRsZXQgdGV4dCA9IFwiXCI7XG5cdGlmICh0eXBlb2YgY29udGVudCA9PT0gXCJzdHJpbmdcIikgdGV4dCA9IGNvbnRlbnQ7XG5cdGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoY29udGVudCkgJiYgY29udGVudC5sZW5ndGggPiAwKSB7XG5cdFx0Y29uc3QgYmxvY2sgPSBjb250ZW50LmZpbmQoKGIpID0+IFwidGV4dFwiIGluIGIpO1xuXHRcdHRleHQgPSBibG9jaz8udGV4dCA/PyB0ZXh0O1xuXHR9XG5cdGNvbnN0IGdlbmVyYXRpb24gPSB7XG5cdFx0dGV4dCxcblx0XHRtZXNzYWdlOiBuZXcgQUlNZXNzYWdlKHtcblx0XHRcdGNvbnRlbnQ6IGNvbnRlbnQgPz8gXCJcIixcblx0XHRcdHRvb2xfY2FsbHM6IGZ1bmN0aW9uQ2FsbHM/Lm1hcCgoZmMpID0+IHtcblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHQuLi5mYyxcblx0XHRcdFx0XHR0eXBlOiBcInRvb2xfY2FsbFwiLFxuXHRcdFx0XHRcdGlkOiBcImlkXCIgaW4gZmMgJiYgdHlwZW9mIGZjLmlkID09PSBcInN0cmluZ1wiID8gZmMuaWQgOiB2NCgpXG5cdFx0XHRcdH07XG5cdFx0XHR9KSxcblx0XHRcdGFkZGl0aW9uYWxfa3dhcmdzOiB7IC4uLmdlbmVyYXRpb25JbmZvIH0sXG5cdFx0XHR1c2FnZV9tZXRhZGF0YTogZXh0cmE/LnVzYWdlTWV0YWRhdGFcblx0XHR9KSxcblx0XHRnZW5lcmF0aW9uSW5mb1xuXHR9O1xuXHRyZXR1cm4ge1xuXHRcdGdlbmVyYXRpb25zOiBbZ2VuZXJhdGlvbl0sXG5cdFx0bGxtT3V0cHV0OiB7IHRva2VuVXNhZ2U6IHtcblx0XHRcdHByb21wdFRva2VuczogZXh0cmE/LnVzYWdlTWV0YWRhdGE/LmlucHV0X3Rva2Vucyxcblx0XHRcdGNvbXBsZXRpb25Ub2tlbnM6IGV4dHJhPy51c2FnZU1ldGFkYXRhPy5vdXRwdXRfdG9rZW5zLFxuXHRcdFx0dG90YWxUb2tlbnM6IGV4dHJhPy51c2FnZU1ldGFkYXRhPy50b3RhbF90b2tlbnNcblx0XHR9IH1cblx0fTtcbn1cbmZ1bmN0aW9uIGNvbnZlcnRSZXNwb25zZUNvbnRlbnRUb0NoYXRHZW5lcmF0aW9uQ2h1bmsocmVzcG9uc2UsIGV4dHJhKSB7XG5cdGlmICghcmVzcG9uc2UuY2FuZGlkYXRlcyB8fCByZXNwb25zZS5jYW5kaWRhdGVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGw7XG5cdGNvbnN0IGZ1bmN0aW9uQ2FsbHMgPSByZXNwb25zZS5mdW5jdGlvbkNhbGxzKCk7XG5cdGNvbnN0IFtjYW5kaWRhdGVdID0gcmVzcG9uc2UuY2FuZGlkYXRlcztcblx0Y29uc3QgeyBjb250ZW50OiBjYW5kaWRhdGVDb250ZW50LC4uLmdlbmVyYXRpb25JbmZvIH0gPSBjYW5kaWRhdGU7XG5cdGxldCBjb250ZW50O1xuXHRpZiAoQXJyYXkuaXNBcnJheShjYW5kaWRhdGVDb250ZW50Py5wYXJ0cykgJiYgY2FuZGlkYXRlQ29udGVudC5wYXJ0cy5ldmVyeSgocCkgPT4gXCJ0ZXh0XCIgaW4gcCkpIGNvbnRlbnQgPSBjYW5kaWRhdGVDb250ZW50LnBhcnRzLm1hcCgocCkgPT4gcC50ZXh0KS5qb2luKFwiXCIpO1xuXHRlbHNlIGlmIChBcnJheS5pc0FycmF5KGNhbmRpZGF0ZUNvbnRlbnQ/LnBhcnRzKSkgY29udGVudCA9IGNhbmRpZGF0ZUNvbnRlbnQucGFydHMubWFwKChwKSA9PiB7XG5cdFx0aWYgKFwidGV4dFwiIGluIHApIHJldHVybiB7XG5cdFx0XHR0eXBlOiBcInRleHRcIixcblx0XHRcdHRleHQ6IHAudGV4dFxuXHRcdH07XG5cdFx0ZWxzZSBpZiAoXCJpbmxpbmVEYXRhXCIgaW4gcCkgcmV0dXJuIHtcblx0XHRcdHR5cGU6IFwiaW5saW5lRGF0YVwiLFxuXHRcdFx0aW5saW5lRGF0YTogcC5pbmxpbmVEYXRhXG5cdFx0fTtcblx0XHRlbHNlIGlmIChcImZ1bmN0aW9uQ2FsbFwiIGluIHApIHJldHVybiB7XG5cdFx0XHR0eXBlOiBcImZ1bmN0aW9uQ2FsbFwiLFxuXHRcdFx0ZnVuY3Rpb25DYWxsOiBwLmZ1bmN0aW9uQ2FsbFxuXHRcdH07XG5cdFx0ZWxzZSBpZiAoXCJmdW5jdGlvblJlc3BvbnNlXCIgaW4gcCkgcmV0dXJuIHtcblx0XHRcdHR5cGU6IFwiZnVuY3Rpb25SZXNwb25zZVwiLFxuXHRcdFx0ZnVuY3Rpb25SZXNwb25zZTogcC5mdW5jdGlvblJlc3BvbnNlXG5cdFx0fTtcblx0XHRlbHNlIGlmIChcImZpbGVEYXRhXCIgaW4gcCkgcmV0dXJuIHtcblx0XHRcdHR5cGU6IFwiZmlsZURhdGFcIixcblx0XHRcdGZpbGVEYXRhOiBwLmZpbGVEYXRhXG5cdFx0fTtcblx0XHRlbHNlIGlmIChcImV4ZWN1dGFibGVDb2RlXCIgaW4gcCkgcmV0dXJuIHtcblx0XHRcdHR5cGU6IFwiZXhlY3V0YWJsZUNvZGVcIixcblx0XHRcdGV4ZWN1dGFibGVDb2RlOiBwLmV4ZWN1dGFibGVDb2RlXG5cdFx0fTtcblx0XHRlbHNlIGlmIChcImNvZGVFeGVjdXRpb25SZXN1bHRcIiBpbiBwKSByZXR1cm4ge1xuXHRcdFx0dHlwZTogXCJjb2RlRXhlY3V0aW9uUmVzdWx0XCIsXG5cdFx0XHRjb2RlRXhlY3V0aW9uUmVzdWx0OiBwLmNvZGVFeGVjdXRpb25SZXN1bHRcblx0XHR9O1xuXHRcdHJldHVybiBwO1xuXHR9KTtcblx0ZWxzZSBjb250ZW50ID0gW107XG5cdGxldCB0ZXh0ID0gXCJcIjtcblx0aWYgKGNvbnRlbnQgJiYgdHlwZW9mIGNvbnRlbnQgPT09IFwic3RyaW5nXCIpIHRleHQgPSBjb250ZW50O1xuXHRlbHNlIGlmIChBcnJheS5pc0FycmF5KGNvbnRlbnQpKSB7XG5cdFx0Y29uc3QgYmxvY2sgPSBjb250ZW50LmZpbmQoKGIpID0+IFwidGV4dFwiIGluIGIpO1xuXHRcdHRleHQgPSBibG9jaz8udGV4dCA/PyBcIlwiO1xuXHR9XG5cdGNvbnN0IHRvb2xDYWxsQ2h1bmtzID0gW107XG5cdGlmIChmdW5jdGlvbkNhbGxzKSB0b29sQ2FsbENodW5rcy5wdXNoKC4uLmZ1bmN0aW9uQ2FsbHMubWFwKChmYykgPT4gKHtcblx0XHQuLi5mYyxcblx0XHRhcmdzOiBKU09OLnN0cmluZ2lmeShmYy5hcmdzKSxcblx0XHRpbmRleDogZXh0cmEuaW5kZXgsXG5cdFx0dHlwZTogXCJ0b29sX2NhbGxfY2h1bmtcIixcblx0XHRpZDogXCJpZFwiIGluIGZjICYmIHR5cGVvZiBmYy5pZCA9PT0gXCJzdHJpbmdcIiA/IGZjLmlkIDogdjQoKVxuXHR9KSkpO1xuXHRyZXR1cm4gbmV3IENoYXRHZW5lcmF0aW9uQ2h1bmsoe1xuXHRcdHRleHQsXG5cdFx0bWVzc2FnZTogbmV3IEFJTWVzc2FnZUNodW5rKHtcblx0XHRcdGNvbnRlbnQ6IGNvbnRlbnQgfHwgXCJcIixcblx0XHRcdG5hbWU6ICFjYW5kaWRhdGVDb250ZW50ID8gdm9pZCAwIDogY2FuZGlkYXRlQ29udGVudC5yb2xlLFxuXHRcdFx0dG9vbF9jYWxsX2NodW5rczogdG9vbENhbGxDaHVua3MsXG5cdFx0XHRhZGRpdGlvbmFsX2t3YXJnczoge30sXG5cdFx0XHRyZXNwb25zZV9tZXRhZGF0YTogeyBtb2RlbF9wcm92aWRlcjogXCJnb29nbGUtZ2VuYWlcIiB9LFxuXHRcdFx0dXNhZ2VfbWV0YWRhdGE6IGV4dHJhLnVzYWdlTWV0YWRhdGFcblx0XHR9KSxcblx0XHRnZW5lcmF0aW9uSW5mb1xuXHR9KTtcbn1cbmZ1bmN0aW9uIGNvbnZlcnRUb0dlbmVyYXRpdmVBSVRvb2xzKHRvb2xzKSB7XG5cdGlmICh0b29scy5ldmVyeSgodG9vbCkgPT4gXCJmdW5jdGlvbkRlY2xhcmF0aW9uc1wiIGluIHRvb2wgJiYgQXJyYXkuaXNBcnJheSh0b29sLmZ1bmN0aW9uRGVjbGFyYXRpb25zKSkpIHJldHVybiB0b29scztcblx0cmV0dXJuIFt7IGZ1bmN0aW9uRGVjbGFyYXRpb25zOiB0b29scy5tYXAoKHRvb2wpID0+IHtcblx0XHRpZiAoaXNMYW5nQ2hhaW5Ub29sKHRvb2wpKSB7XG5cdFx0XHRjb25zdCBqc29uU2NoZW1hID0gc2NoZW1hVG9HZW5lcmF0aXZlQUlQYXJhbWV0ZXJzKHRvb2wuc2NoZW1hKTtcblx0XHRcdGlmIChqc29uU2NoZW1hLnR5cGUgPT09IFwib2JqZWN0XCIgJiYgXCJwcm9wZXJ0aWVzXCIgaW4ganNvblNjaGVtYSAmJiBPYmplY3Qua2V5cyhqc29uU2NoZW1hLnByb3BlcnRpZXMpLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHtcblx0XHRcdFx0bmFtZTogdG9vbC5uYW1lLFxuXHRcdFx0XHRkZXNjcmlwdGlvbjogdG9vbC5kZXNjcmlwdGlvblxuXHRcdFx0fTtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdG5hbWU6IHRvb2wubmFtZSxcblx0XHRcdFx0ZGVzY3JpcHRpb246IHRvb2wuZGVzY3JpcHRpb24sXG5cdFx0XHRcdHBhcmFtZXRlcnM6IGpzb25TY2hlbWFcblx0XHRcdH07XG5cdFx0fVxuXHRcdGlmIChpc09wZW5BSVRvb2wodG9vbCkpIHJldHVybiB7XG5cdFx0XHRuYW1lOiB0b29sLmZ1bmN0aW9uLm5hbWUsXG5cdFx0XHRkZXNjcmlwdGlvbjogdG9vbC5mdW5jdGlvbi5kZXNjcmlwdGlvbiA/PyBgQSBmdW5jdGlvbiBhdmFpbGFibGUgdG8gY2FsbC5gLFxuXHRcdFx0cGFyYW1ldGVyczoganNvblNjaGVtYVRvR2VtaW5pUGFyYW1ldGVycyh0b29sLmZ1bmN0aW9uLnBhcmFtZXRlcnMpXG5cdFx0fTtcblx0XHRyZXR1cm4gdG9vbDtcblx0fSkgfV07XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgY29udmVydEJhc2VNZXNzYWdlc1RvQ29udGVudCwgY29udmVydFJlc3BvbnNlQ29udGVudFRvQ2hhdEdlbmVyYXRpb25DaHVuaywgY29udmVydFRvR2VuZXJhdGl2ZUFJVG9vbHMsIG1hcEdlbmVyYXRlQ29udGVudFJlc3VsdFRvQ2hhdFJlc3VsdCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29tbW9uLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+google-genai@1.0.0_@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76__/node_modules/@langchain/google-genai/dist/utils/common.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+google-genai@1.0.0_@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76__/node_modules/@langchain/google-genai/dist/utils/tools.js":
/*!******************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+google-genai@1.0.0_@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76__/node_modules/@langchain/google-genai/dist/utils/tools.js ***!
  \******************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   convertToolsToGenAI: () => (/* binding */ convertToolsToGenAI)\n/* harmony export */ });\n/* harmony import */ var _zod_to_genai_parameters_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./zod_to_genai_parameters.js */ \"(rsc)/./node_modules/.pnpm/@langchain+google-genai@1.0.0_@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76__/node_modules/@langchain/google-genai/dist/utils/zod_to_genai_parameters.js\");\n/* harmony import */ var _common_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./common.js */ \"(rsc)/./node_modules/.pnpm/@langchain+google-genai@1.0.0_@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76__/node_modules/@langchain/google-genai/dist/utils/common.js\");\n/* harmony import */ var _google_generative_ai__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @google/generative-ai */ \"(rsc)/./node_modules/.pnpm/@google+generative-ai@0.24.1/node_modules/@google/generative-ai/dist/index.mjs\");\n/* harmony import */ var _langchain_core_utils_function_calling__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @langchain/core/utils/function_calling */ \"(rsc)/./node_modules/.pnpm/@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76_/node_modules/@langchain/core/dist/utils/function_calling.js\");\n/* harmony import */ var _langchain_core_language_models_base__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @langchain/core/language_models/base */ \"(rsc)/./node_modules/.pnpm/@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76_/node_modules/@langchain/core/dist/language_models/base.js\");\n\n\n\n\n\n\n//#region src/utils/tools.ts\nfunction convertToolsToGenAI(tools, extra) {\n\tconst genAITools = processTools(tools);\n\tconst toolConfig = createToolConfig(genAITools, extra);\n\treturn {\n\t\ttools: genAITools,\n\t\ttoolConfig\n\t};\n}\nfunction processTools(tools) {\n\tlet functionDeclarationTools = [];\n\tconst genAITools = [];\n\ttools.forEach((tool) => {\n\t\tif ((0,_langchain_core_utils_function_calling__WEBPACK_IMPORTED_MODULE_3__.isLangChainTool)(tool)) {\n\t\t\tconst [convertedTool] = (0,_common_js__WEBPACK_IMPORTED_MODULE_1__.convertToGenerativeAITools)([tool]);\n\t\t\tif (convertedTool.functionDeclarations) functionDeclarationTools.push(...convertedTool.functionDeclarations);\n\t\t} else if ((0,_langchain_core_language_models_base__WEBPACK_IMPORTED_MODULE_4__.isOpenAITool)(tool)) {\n\t\t\tconst { functionDeclarations } = convertOpenAIToolToGenAI(tool);\n\t\t\tif (functionDeclarations) functionDeclarationTools.push(...functionDeclarations);\n\t\t\telse throw new Error(\"Failed to convert OpenAI structured tool to GenerativeAI tool\");\n\t\t} else genAITools.push(tool);\n\t});\n\tconst genAIFunctionDeclaration = genAITools.find((t) => \"functionDeclarations\" in t);\n\tif (genAIFunctionDeclaration) return genAITools.map((tool) => {\n\t\tif (functionDeclarationTools?.length > 0 && \"functionDeclarations\" in tool) {\n\t\t\tconst newTool = { functionDeclarations: [...tool.functionDeclarations || [], ...functionDeclarationTools] };\n\t\t\tfunctionDeclarationTools = [];\n\t\t\treturn newTool;\n\t\t}\n\t\treturn tool;\n\t});\n\treturn [...genAITools, ...functionDeclarationTools.length > 0 ? [{ functionDeclarations: functionDeclarationTools }] : []];\n}\nfunction convertOpenAIToolToGenAI(tool) {\n\treturn { functionDeclarations: [{\n\t\tname: tool.function.name,\n\t\tdescription: tool.function.description,\n\t\tparameters: (0,_zod_to_genai_parameters_js__WEBPACK_IMPORTED_MODULE_0__.removeAdditionalProperties)(tool.function.parameters)\n\t}] };\n}\nfunction createToolConfig(genAITools, extra) {\n\tif (!genAITools.length || !extra) return void 0;\n\tconst { toolChoice, allowedFunctionNames } = extra;\n\tconst modeMap = {\n\t\tany: _google_generative_ai__WEBPACK_IMPORTED_MODULE_2__.FunctionCallingMode.ANY,\n\t\tauto: _google_generative_ai__WEBPACK_IMPORTED_MODULE_2__.FunctionCallingMode.AUTO,\n\t\tnone: _google_generative_ai__WEBPACK_IMPORTED_MODULE_2__.FunctionCallingMode.NONE\n\t};\n\tif (toolChoice && [\n\t\t\"any\",\n\t\t\"auto\",\n\t\t\"none\"\n\t].includes(toolChoice)) return { functionCallingConfig: {\n\t\tmode: modeMap[toolChoice] ?? \"MODE_UNSPECIFIED\",\n\t\tallowedFunctionNames\n\t} };\n\tif (typeof toolChoice === \"string\" || allowedFunctionNames) return { functionCallingConfig: {\n\t\tmode: _google_generative_ai__WEBPACK_IMPORTED_MODULE_2__.FunctionCallingMode.ANY,\n\t\tallowedFunctionNames: [...allowedFunctionNames ?? [], ...toolChoice && typeof toolChoice === \"string\" ? [toolChoice] : []]\n\t} };\n\treturn void 0;\n}\n\n//#endregion\n\n//# sourceMappingURL=tools.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitnb29nbGUtZ2VuYWlAMS4wLjBfQGxhbmdjaGFpbitjb3JlQDEuMC4xX29wZW5haUA2LjcuMF93c0A4LjE4LjNfem9kQDMuMjUuNzZfXy9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvZGlzdC91dGlscy90b29scy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBMEU7QUFDakI7QUFDRztBQUNhO0FBQ0w7O0FBRXBFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSx1RkFBZTtBQUNyQiwyQkFBMkIsc0VBQTBCO0FBQ3JEO0FBQ0EsSUFBSSxTQUFTLGtGQUFZO0FBQ3pCLFdBQVcsdUJBQXVCO0FBQ2xDO0FBQ0E7QUFDQSxJQUFJO0FBQ0osRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRixvRUFBb0UsZ0RBQWdEO0FBQ3BIO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLGNBQWMsdUZBQTBCO0FBQ3hDLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQSxTQUFTLG1DQUFtQztBQUM1QztBQUNBLE9BQU8sc0VBQW1CO0FBQzFCLFFBQVEsc0VBQW1CO0FBQzNCLFFBQVEsc0VBQW1CO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0Esc0VBQXNFO0FBQ3RFLFFBQVEsc0VBQW1CO0FBQzNCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQytCO0FBQy9CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3BlbnJvdXRlci1sYW5nZ3JhcGgvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitnb29nbGUtZ2VuYWlAMS4wLjBfQGxhbmdjaGFpbitjb3JlQDEuMC4xX29wZW5haUA2LjcuMF93c0A4LjE4LjNfem9kQDMuMjUuNzZfXy9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvZGlzdC91dGlscy90b29scy5qcz84YjYxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJlbW92ZUFkZGl0aW9uYWxQcm9wZXJ0aWVzIH0gZnJvbSBcIi4vem9kX3RvX2dlbmFpX3BhcmFtZXRlcnMuanNcIjtcbmltcG9ydCB7IGNvbnZlcnRUb0dlbmVyYXRpdmVBSVRvb2xzIH0gZnJvbSBcIi4vY29tbW9uLmpzXCI7XG5pbXBvcnQgeyBGdW5jdGlvbkNhbGxpbmdNb2RlIH0gZnJvbSBcIkBnb29nbGUvZ2VuZXJhdGl2ZS1haVwiO1xuaW1wb3J0IHsgaXNMYW5nQ2hhaW5Ub29sIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS91dGlscy9mdW5jdGlvbl9jYWxsaW5nXCI7XG5pbXBvcnQgeyBpc09wZW5BSVRvb2wgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL2xhbmd1YWdlX21vZGVscy9iYXNlXCI7XG5cbi8vI3JlZ2lvbiBzcmMvdXRpbHMvdG9vbHMudHNcbmZ1bmN0aW9uIGNvbnZlcnRUb29sc1RvR2VuQUkodG9vbHMsIGV4dHJhKSB7XG5cdGNvbnN0IGdlbkFJVG9vbHMgPSBwcm9jZXNzVG9vbHModG9vbHMpO1xuXHRjb25zdCB0b29sQ29uZmlnID0gY3JlYXRlVG9vbENvbmZpZyhnZW5BSVRvb2xzLCBleHRyYSk7XG5cdHJldHVybiB7XG5cdFx0dG9vbHM6IGdlbkFJVG9vbHMsXG5cdFx0dG9vbENvbmZpZ1xuXHR9O1xufVxuZnVuY3Rpb24gcHJvY2Vzc1Rvb2xzKHRvb2xzKSB7XG5cdGxldCBmdW5jdGlvbkRlY2xhcmF0aW9uVG9vbHMgPSBbXTtcblx0Y29uc3QgZ2VuQUlUb29scyA9IFtdO1xuXHR0b29scy5mb3JFYWNoKCh0b29sKSA9PiB7XG5cdFx0aWYgKGlzTGFuZ0NoYWluVG9vbCh0b29sKSkge1xuXHRcdFx0Y29uc3QgW2NvbnZlcnRlZFRvb2xdID0gY29udmVydFRvR2VuZXJhdGl2ZUFJVG9vbHMoW3Rvb2xdKTtcblx0XHRcdGlmIChjb252ZXJ0ZWRUb29sLmZ1bmN0aW9uRGVjbGFyYXRpb25zKSBmdW5jdGlvbkRlY2xhcmF0aW9uVG9vbHMucHVzaCguLi5jb252ZXJ0ZWRUb29sLmZ1bmN0aW9uRGVjbGFyYXRpb25zKTtcblx0XHR9IGVsc2UgaWYgKGlzT3BlbkFJVG9vbCh0b29sKSkge1xuXHRcdFx0Y29uc3QgeyBmdW5jdGlvbkRlY2xhcmF0aW9ucyB9ID0gY29udmVydE9wZW5BSVRvb2xUb0dlbkFJKHRvb2wpO1xuXHRcdFx0aWYgKGZ1bmN0aW9uRGVjbGFyYXRpb25zKSBmdW5jdGlvbkRlY2xhcmF0aW9uVG9vbHMucHVzaCguLi5mdW5jdGlvbkRlY2xhcmF0aW9ucyk7XG5cdFx0XHRlbHNlIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBjb252ZXJ0IE9wZW5BSSBzdHJ1Y3R1cmVkIHRvb2wgdG8gR2VuZXJhdGl2ZUFJIHRvb2xcIik7XG5cdFx0fSBlbHNlIGdlbkFJVG9vbHMucHVzaCh0b29sKTtcblx0fSk7XG5cdGNvbnN0IGdlbkFJRnVuY3Rpb25EZWNsYXJhdGlvbiA9IGdlbkFJVG9vbHMuZmluZCgodCkgPT4gXCJmdW5jdGlvbkRlY2xhcmF0aW9uc1wiIGluIHQpO1xuXHRpZiAoZ2VuQUlGdW5jdGlvbkRlY2xhcmF0aW9uKSByZXR1cm4gZ2VuQUlUb29scy5tYXAoKHRvb2wpID0+IHtcblx0XHRpZiAoZnVuY3Rpb25EZWNsYXJhdGlvblRvb2xzPy5sZW5ndGggPiAwICYmIFwiZnVuY3Rpb25EZWNsYXJhdGlvbnNcIiBpbiB0b29sKSB7XG5cdFx0XHRjb25zdCBuZXdUb29sID0geyBmdW5jdGlvbkRlY2xhcmF0aW9uczogWy4uLnRvb2wuZnVuY3Rpb25EZWNsYXJhdGlvbnMgfHwgW10sIC4uLmZ1bmN0aW9uRGVjbGFyYXRpb25Ub29sc10gfTtcblx0XHRcdGZ1bmN0aW9uRGVjbGFyYXRpb25Ub29scyA9IFtdO1xuXHRcdFx0cmV0dXJuIG5ld1Rvb2w7XG5cdFx0fVxuXHRcdHJldHVybiB0b29sO1xuXHR9KTtcblx0cmV0dXJuIFsuLi5nZW5BSVRvb2xzLCAuLi5mdW5jdGlvbkRlY2xhcmF0aW9uVG9vbHMubGVuZ3RoID4gMCA/IFt7IGZ1bmN0aW9uRGVjbGFyYXRpb25zOiBmdW5jdGlvbkRlY2xhcmF0aW9uVG9vbHMgfV0gOiBbXV07XG59XG5mdW5jdGlvbiBjb252ZXJ0T3BlbkFJVG9vbFRvR2VuQUkodG9vbCkge1xuXHRyZXR1cm4geyBmdW5jdGlvbkRlY2xhcmF0aW9uczogW3tcblx0XHRuYW1lOiB0b29sLmZ1bmN0aW9uLm5hbWUsXG5cdFx0ZGVzY3JpcHRpb246IHRvb2wuZnVuY3Rpb24uZGVzY3JpcHRpb24sXG5cdFx0cGFyYW1ldGVyczogcmVtb3ZlQWRkaXRpb25hbFByb3BlcnRpZXModG9vbC5mdW5jdGlvbi5wYXJhbWV0ZXJzKVxuXHR9XSB9O1xufVxuZnVuY3Rpb24gY3JlYXRlVG9vbENvbmZpZyhnZW5BSVRvb2xzLCBleHRyYSkge1xuXHRpZiAoIWdlbkFJVG9vbHMubGVuZ3RoIHx8ICFleHRyYSkgcmV0dXJuIHZvaWQgMDtcblx0Y29uc3QgeyB0b29sQ2hvaWNlLCBhbGxvd2VkRnVuY3Rpb25OYW1lcyB9ID0gZXh0cmE7XG5cdGNvbnN0IG1vZGVNYXAgPSB7XG5cdFx0YW55OiBGdW5jdGlvbkNhbGxpbmdNb2RlLkFOWSxcblx0XHRhdXRvOiBGdW5jdGlvbkNhbGxpbmdNb2RlLkFVVE8sXG5cdFx0bm9uZTogRnVuY3Rpb25DYWxsaW5nTW9kZS5OT05FXG5cdH07XG5cdGlmICh0b29sQ2hvaWNlICYmIFtcblx0XHRcImFueVwiLFxuXHRcdFwiYXV0b1wiLFxuXHRcdFwibm9uZVwiXG5cdF0uaW5jbHVkZXModG9vbENob2ljZSkpIHJldHVybiB7IGZ1bmN0aW9uQ2FsbGluZ0NvbmZpZzoge1xuXHRcdG1vZGU6IG1vZGVNYXBbdG9vbENob2ljZV0gPz8gXCJNT0RFX1VOU1BFQ0lGSUVEXCIsXG5cdFx0YWxsb3dlZEZ1bmN0aW9uTmFtZXNcblx0fSB9O1xuXHRpZiAodHlwZW9mIHRvb2xDaG9pY2UgPT09IFwic3RyaW5nXCIgfHwgYWxsb3dlZEZ1bmN0aW9uTmFtZXMpIHJldHVybiB7IGZ1bmN0aW9uQ2FsbGluZ0NvbmZpZzoge1xuXHRcdG1vZGU6IEZ1bmN0aW9uQ2FsbGluZ01vZGUuQU5ZLFxuXHRcdGFsbG93ZWRGdW5jdGlvbk5hbWVzOiBbLi4uYWxsb3dlZEZ1bmN0aW9uTmFtZXMgPz8gW10sIC4uLnRvb2xDaG9pY2UgJiYgdHlwZW9mIHRvb2xDaG9pY2UgPT09IFwic3RyaW5nXCIgPyBbdG9vbENob2ljZV0gOiBbXV1cblx0fSB9O1xuXHRyZXR1cm4gdm9pZCAwO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGNvbnZlcnRUb29sc1RvR2VuQUkgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRvb2xzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+google-genai@1.0.0_@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76__/node_modules/@langchain/google-genai/dist/utils/tools.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+google-genai@1.0.0_@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76__/node_modules/@langchain/google-genai/dist/utils/zod_to_genai_parameters.js":
/*!************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+google-genai@1.0.0_@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76__/node_modules/@langchain/google-genai/dist/utils/zod_to_genai_parameters.js ***!
  \************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   jsonSchemaToGeminiParameters: () => (/* binding */ jsonSchemaToGeminiParameters),\n/* harmony export */   removeAdditionalProperties: () => (/* binding */ removeAdditionalProperties),\n/* harmony export */   schemaToGenerativeAIParameters: () => (/* binding */ schemaToGenerativeAIParameters)\n/* harmony export */ });\n/* harmony import */ var _langchain_core_utils_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/utils/types */ \"(rsc)/./node_modules/.pnpm/@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76_/node_modules/@langchain/core/dist/utils/types/index.js\");\n/* harmony import */ var _langchain_core_utils_json_schema__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/core/utils/json_schema */ \"(rsc)/./node_modules/.pnpm/@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76_/node_modules/@langchain/core/dist/utils/json_schema.js\");\n\n\n\n//#region src/utils/zod_to_genai_parameters.ts\nfunction removeAdditionalProperties(obj) {\n\tif (typeof obj === \"object\" && obj !== null) {\n\t\tconst newObj = { ...obj };\n\t\tif (\"additionalProperties\" in newObj) delete newObj.additionalProperties;\n\t\tif (\"$schema\" in newObj) delete newObj.$schema;\n\t\tif (\"strict\" in newObj) delete newObj.strict;\n\t\tfor (const key in newObj) if (key in newObj) {\n\t\t\tif (Array.isArray(newObj[key])) newObj[key] = newObj[key].map(removeAdditionalProperties);\n\t\t\telse if (typeof newObj[key] === \"object\" && newObj[key] !== null) newObj[key] = removeAdditionalProperties(newObj[key]);\n\t\t}\n\t\treturn newObj;\n\t}\n\treturn obj;\n}\nfunction schemaToGenerativeAIParameters(schema) {\n\tconst jsonSchema = removeAdditionalProperties((0,_langchain_core_utils_types__WEBPACK_IMPORTED_MODULE_0__.isInteropZodSchema)(schema) ? (0,_langchain_core_utils_json_schema__WEBPACK_IMPORTED_MODULE_1__.toJsonSchema)(schema) : schema);\n\tconst { $schema,...rest } = jsonSchema;\n\treturn rest;\n}\nfunction jsonSchemaToGeminiParameters(schema) {\n\tconst jsonSchema = removeAdditionalProperties(schema);\n\tconst { $schema,...rest } = jsonSchema;\n\treturn rest;\n}\n\n//#endregion\n\n//# sourceMappingURL=zod_to_genai_parameters.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitnb29nbGUtZ2VuYWlAMS4wLjBfQGxhbmdjaGFpbitjb3JlQDEuMC4xX29wZW5haUA2LjcuMF93c0A4LjE4LjNfem9kQDMuMjUuNzZfXy9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvZGlzdC91dGlscy96b2RfdG9fZ2VuYWlfcGFyYW1ldGVycy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFpRTtBQUNBOztBQUVqRTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLCtFQUFrQixXQUFXLCtFQUFZO0FBQ3hGLFNBQVMsa0JBQWtCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxrQkFBa0I7QUFDM0I7QUFDQTs7QUFFQTtBQUNvRztBQUNwRyIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW5yb3V0ZXItbGFuZ2dyYXBoLy4vbm9kZV9tb2R1bGVzLy5wbnBtL0BsYW5nY2hhaW4rZ29vZ2xlLWdlbmFpQDEuMC4wX0BsYW5nY2hhaW4rY29yZUAxLjAuMV9vcGVuYWlANi43LjBfd3NAOC4xOC4zX3pvZEAzLjI1Ljc2X18vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vZ29vZ2xlLWdlbmFpL2Rpc3QvdXRpbHMvem9kX3RvX2dlbmFpX3BhcmFtZXRlcnMuanM/YThiZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpc0ludGVyb3Bab2RTY2hlbWEgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL3V0aWxzL3R5cGVzXCI7XG5pbXBvcnQgeyB0b0pzb25TY2hlbWEgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL3V0aWxzL2pzb25fc2NoZW1hXCI7XG5cbi8vI3JlZ2lvbiBzcmMvdXRpbHMvem9kX3RvX2dlbmFpX3BhcmFtZXRlcnMudHNcbmZ1bmN0aW9uIHJlbW92ZUFkZGl0aW9uYWxQcm9wZXJ0aWVzKG9iaikge1xuXHRpZiAodHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIiAmJiBvYmogIT09IG51bGwpIHtcblx0XHRjb25zdCBuZXdPYmogPSB7IC4uLm9iaiB9O1xuXHRcdGlmIChcImFkZGl0aW9uYWxQcm9wZXJ0aWVzXCIgaW4gbmV3T2JqKSBkZWxldGUgbmV3T2JqLmFkZGl0aW9uYWxQcm9wZXJ0aWVzO1xuXHRcdGlmIChcIiRzY2hlbWFcIiBpbiBuZXdPYmopIGRlbGV0ZSBuZXdPYmouJHNjaGVtYTtcblx0XHRpZiAoXCJzdHJpY3RcIiBpbiBuZXdPYmopIGRlbGV0ZSBuZXdPYmouc3RyaWN0O1xuXHRcdGZvciAoY29uc3Qga2V5IGluIG5ld09iaikgaWYgKGtleSBpbiBuZXdPYmopIHtcblx0XHRcdGlmIChBcnJheS5pc0FycmF5KG5ld09ialtrZXldKSkgbmV3T2JqW2tleV0gPSBuZXdPYmpba2V5XS5tYXAocmVtb3ZlQWRkaXRpb25hbFByb3BlcnRpZXMpO1xuXHRcdFx0ZWxzZSBpZiAodHlwZW9mIG5ld09ialtrZXldID09PSBcIm9iamVjdFwiICYmIG5ld09ialtrZXldICE9PSBudWxsKSBuZXdPYmpba2V5XSA9IHJlbW92ZUFkZGl0aW9uYWxQcm9wZXJ0aWVzKG5ld09ialtrZXldKTtcblx0XHR9XG5cdFx0cmV0dXJuIG5ld09iajtcblx0fVxuXHRyZXR1cm4gb2JqO1xufVxuZnVuY3Rpb24gc2NoZW1hVG9HZW5lcmF0aXZlQUlQYXJhbWV0ZXJzKHNjaGVtYSkge1xuXHRjb25zdCBqc29uU2NoZW1hID0gcmVtb3ZlQWRkaXRpb25hbFByb3BlcnRpZXMoaXNJbnRlcm9wWm9kU2NoZW1hKHNjaGVtYSkgPyB0b0pzb25TY2hlbWEoc2NoZW1hKSA6IHNjaGVtYSk7XG5cdGNvbnN0IHsgJHNjaGVtYSwuLi5yZXN0IH0gPSBqc29uU2NoZW1hO1xuXHRyZXR1cm4gcmVzdDtcbn1cbmZ1bmN0aW9uIGpzb25TY2hlbWFUb0dlbWluaVBhcmFtZXRlcnMoc2NoZW1hKSB7XG5cdGNvbnN0IGpzb25TY2hlbWEgPSByZW1vdmVBZGRpdGlvbmFsUHJvcGVydGllcyhzY2hlbWEpO1xuXHRjb25zdCB7ICRzY2hlbWEsLi4ucmVzdCB9ID0ganNvblNjaGVtYTtcblx0cmV0dXJuIHJlc3Q7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsganNvblNjaGVtYVRvR2VtaW5pUGFyYW1ldGVycywgcmVtb3ZlQWRkaXRpb25hbFByb3BlcnRpZXMsIHNjaGVtYVRvR2VuZXJhdGl2ZUFJUGFyYW1ldGVycyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9em9kX3RvX2dlbmFpX3BhcmFtZXRlcnMuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+google-genai@1.0.0_@langchain+core@1.0.1_openai@6.7.0_ws@8.18.3_zod@3.25.76__/node_modules/@langchain/google-genai/dist/utils/zod_to_genai_parameters.js\n");

/***/ })

};
;