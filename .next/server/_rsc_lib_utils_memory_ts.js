"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_rsc_lib_utils_memory_ts";
exports.ids = ["_rsc_lib_utils_memory_ts"];
exports.modules = {

/***/ "(rsc)/./lib/utils/memory.ts":
/*!*****************************!*\
  !*** ./lib/utils/memory.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConversationMemory: () => (/* binding */ ConversationMemory),\n/* harmony export */   getSessionMemory: () => (/* binding */ getSessionMemory)\n/* harmony export */ });\n// In-memory storage (extendable to database later)\nconst sessions = new Map();\n// Configuration\nconst MAX_MESSAGES_BEFORE_SUMMARIZATION = 20;\nconst SUMMARIZATION_INTERVAL_MINUTES = 30;\nclass ConversationMemory {\n    constructor(sessionId){\n        this.sessionId = sessionId;\n        this.initSession();\n    }\n    initSession() {\n        if (!sessions.has(this.sessionId)) {\n            sessions.set(this.sessionId, {\n                sessionId: this.sessionId,\n                messages: [],\n                fileOperations: [],\n                createdAt: new Date(),\n                lastActive: new Date()\n            });\n        } else {\n            const session = sessions.get(this.sessionId);\n            session.lastActive = new Date();\n            sessions.set(this.sessionId, session);\n        }\n    }\n    // Add a message to memory\n    addMessage(role, content) {\n        const message = {\n            id: Date.now().toString(),\n            role,\n            content,\n            timestamp: new Date()\n        };\n        const session = sessions.get(this.sessionId);\n        session.messages.push(message);\n        session.lastActive = new Date();\n        sessions.set(this.sessionId, session);\n        return message;\n    }\n    // Add a file operation to memory\n    addFileOperation(type, filename) {\n        const operation = {\n            type,\n            filename,\n            timestamp: new Date(),\n            sessionId: this.sessionId\n        };\n        const session = sessions.get(this.sessionId);\n        session.fileOperations.push(operation);\n        sessions.set(this.sessionId, session);\n        return operation;\n    }\n    // Get conversation history\n    getMessages(limit) {\n        const session = sessions.get(this.sessionId);\n        if (!session) return [];\n        const messages = session.messages;\n        return limit ? messages.slice(-limit) : messages;\n    }\n    // Get recent file operations\n    getRecentFileOperations(limit = 10) {\n        const session = sessions.get(this.sessionId);\n        if (!session) return [];\n        return session.fileOperations.slice(-limit);\n    }\n    // Get all files created/modified in this session\n    getSessionFiles() {\n        const session = sessions.get(this.sessionId);\n        if (!session) return [];\n        const fileSet = new Set();\n        session.fileOperations.forEach((op)=>{\n            if (op.type !== \"deleted\") {\n                fileSet.add(op.filename);\n            }\n        });\n        return Array.from(fileSet);\n    }\n    // Search messages by content\n    searchMessages(query) {\n        const session = sessions.get(this.sessionId);\n        if (!session) return [];\n        const lowerQuery = query.toLowerCase();\n        return session.messages.filter((msg)=>msg.content.toLowerCase().includes(lowerQuery));\n    }\n    // Get context summary for new requests\n    getContextSummary() {\n        const session = sessions.get(this.sessionId);\n        if (!session) return \"\";\n        const recentMessages = session.messages.slice(-4); // Last 4 messages\n        const recentFiles = this.getSessionFiles();\n        let summary = \"\";\n        // Include summarized history if available\n        if (session.summarizedHistory) {\n            summary += `Previous context (summarized):\\n${session.summarizedHistory}\\n\\n`;\n        }\n        if (recentMessages.length > 0) {\n            summary += `Recent conversation (${recentMessages.length} messages):\\n`;\n            recentMessages.forEach((msg, idx)=>{\n                summary += `${idx + 1}. ${msg.role}: ${msg.content.substring(0, 100)}${msg.content.length > 100 ? \"...\" : \"\"}\\n`;\n            });\n            summary += \"\\n\";\n        }\n        if (recentFiles.length > 0) {\n            summary += `Files created/modified in this session:\\n${recentFiles.join(\"\\n\")}\\n\\n`;\n        }\n        return summary;\n    }\n    // Get compressed context (for token efficiency)\n    async getCompressedContext(maxTokens = 2000) {\n        const session = sessions.get(this.sessionId);\n        if (!session) return \"\";\n        // Check if we need to create/update summarization\n        const shouldSummarize = session.messages.length > MAX_MESSAGES_BEFORE_SUMMARIZATION && (!session.lastSummarizedAt || Date.now() - session.lastSummarizedAt.getTime() > SUMMARIZATION_INTERVAL_MINUTES * 60 * 1000);\n        if (shouldSummarize) {\n            await this.summarizeHistory();\n        }\n        return this.getContextSummary();\n    }\n    // Summarize conversation history to save tokens\n    async summarizeHistory() {\n        const session = sessions.get(this.sessionId);\n        if (!session || session.messages.length < 10) return;\n        // Import summarizer (dynamic to avoid circular dependencies)\n        const { summarizeConversation } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ./summarizer */ \"(rsc)/./lib/utils/summarizer.ts\"));\n        // Keep last 5 messages fresh, summarize the rest\n        const messagesToSummarize = session.messages.slice(0, -5);\n        if (messagesToSummarize.length === 0) return;\n        const { summary } = await summarizeConversation(messagesToSummarize.map((m)=>({\n                role: m.role,\n                content: m.content\n            })), 0 // Summarize all\n        );\n        session.summarizedHistory = summary;\n        session.lastSummarizedAt = new Date();\n        // Remove old messages, keep only recent ones\n        session.messages = session.messages.slice(-5);\n        sessions.set(this.sessionId, session);\n        console.log(`ðŸ“Š Summarized ${messagesToSummarize.length} messages for session ${this.sessionId}`);\n    }\n    // Get token estimate for context\n    getTokenEstimate() {\n        const context = this.getContextSummary();\n        // Rough estimate: 4 chars â‰ˆ 1 token\n        return Math.ceil(context.length / 4);\n    }\n    // Get all active sessions (for debugging/stats)\n    static getAllSessions() {\n        return Array.from(sessions.values());\n    }\n    static getSessionCount() {\n        return sessions.size;\n    }\n    // Cleanup old sessions (older than 24 hours)\n    static cleanupOldSessions() {\n        const oneDayAgo = new Date(Date.now() - 24 * 60 * 60 * 1000);\n        const toDelete = [];\n        sessions.forEach((session, id)=>{\n            if (session.lastActive < oneDayAgo) {\n                toDelete.push(id);\n            }\n        });\n        toDelete.forEach((id)=>sessions.delete(id));\n        return toDelete.length;\n    }\n}\n// Utility to create/get memory instance\nfunction getSessionMemory(sessionId) {\n    return new ConversationMemory(sessionId);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UUFFQTJELFNBQVMzQyxPQUFPLENBQUNoQixDQUFBQSxLQUFNckIsU0FBU2lGLE1BQU0sQ0FBQzVEO1FBQ3ZDLE9BQU8yRCxTQUFTMUIsTUFBTTtJQUN4QjtBQUNGO0FBRUEsd0NBQXdDO0FBQ2pDLFNBQVM0QixpQkFBaUI1RSxTQUFpQjtJQUNoRCxPQUFPLElBQUlGLG1CQUFtQkU7QUFDaEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVucm91dGVyLWxhbmdncmFwaC8uL2xpYi91dGlscy9tZW1vcnkudHM/YTA3ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbnRlcmZhY2UgQ29udmVyc2F0aW9uTWVzc2FnZSB7XG4gIGlkOiBzdHJpbmc7XG4gIHJvbGU6ICd1c2VyJyB8ICdhc3Npc3RhbnQnO1xuICBjb250ZW50OiBzdHJpbmc7XG4gIHRpbWVzdGFtcDogRGF0ZTtcbn1cblxuaW50ZXJmYWNlIEZpbGVPcGVyYXRpb24ge1xuICB0eXBlOiAnY3JlYXRlZCcgfCAnbW9kaWZpZWQnIHwgJ3JlYWQnIHwgJ2RlbGV0ZWQnO1xuICBmaWxlbmFtZTogc3RyaW5nO1xuICB0aW1lc3RhbXA6IERhdGU7XG4gIHNlc3Npb25JZDogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgU2Vzc2lvbk1lbW9yeSB7XG4gIHNlc3Npb25JZDogc3RyaW5nO1xuICBtZXNzYWdlczogQ29udmVyc2F0aW9uTWVzc2FnZVtdO1xuICBmaWxlT3BlcmF0aW9uczogRmlsZU9wZXJhdGlvbltdO1xuICBjcmVhdGVkQXQ6IERhdGU7XG4gIGxhc3RBY3RpdmU6IERhdGU7XG4gIHN1bW1hcml6ZWRIaXN0b3J5Pzogc3RyaW5nOyAvLyBDb21wcmVzc2VkIGNvbnZlcnNhdGlvbiBoaXN0b3J5XG4gIGxhc3RTdW1tYXJpemVkQXQ/OiBEYXRlO1xufVxuXG4vLyBJbi1tZW1vcnkgc3RvcmFnZSAoZXh0ZW5kYWJsZSB0byBkYXRhYmFzZSBsYXRlcilcbmNvbnN0IHNlc3Npb25zID0gbmV3IE1hcDxzdHJpbmcsIFNlc3Npb25NZW1vcnk+KCk7XG5cbi8vIENvbmZpZ3VyYXRpb25cbmNvbnN0IE1BWF9NRVNTQUdFU19CRUZPUkVfU1VNTUFSSVpBVElPTiA9IDIwO1xuY29uc3QgU1VNTUFSSVpBVElPTl9JTlRFUlZBTF9NSU5VVEVTID0gMzA7XG5cbmV4cG9ydCBjbGFzcyBDb252ZXJzYXRpb25NZW1vcnkge1xuICBwcml2YXRlIHNlc3Npb25JZDogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKHNlc3Npb25JZDogc3RyaW5nKSB7XG4gICAgdGhpcy5zZXNzaW9uSWQgPSBzZXNzaW9uSWQ7XG4gICAgdGhpcy5pbml0U2Vzc2lvbigpO1xuICB9XG5cbiAgcHJpdmF0ZSBpbml0U2Vzc2lvbigpIHtcbiAgICBpZiAoIXNlc3Npb25zLmhhcyh0aGlzLnNlc3Npb25JZCkpIHtcbiAgICAgIHNlc3Npb25zLnNldCh0aGlzLnNlc3Npb25JZCwge1xuICAgICAgICBzZXNzaW9uSWQ6IHRoaXMuc2Vzc2lvbklkLFxuICAgICAgICBtZXNzYWdlczogW10sXG4gICAgICAgIGZpbGVPcGVyYXRpb25zOiBbXSxcbiAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICBsYXN0QWN0aXZlOiBuZXcgRGF0ZSgpLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHNlc3Npb24gPSBzZXNzaW9ucy5nZXQodGhpcy5zZXNzaW9uSWQpITtcbiAgICAgIHNlc3Npb24ubGFzdEFjdGl2ZSA9IG5ldyBEYXRlKCk7XG4gICAgICBzZXNzaW9ucy5zZXQodGhpcy5zZXNzaW9uSWQsIHNlc3Npb24pO1xuICAgIH1cbiAgfVxuXG4gIC8vIEFkZCBhIG1lc3NhZ2UgdG8gbWVtb3J5XG4gIGFkZE1lc3NhZ2Uocm9sZTogJ3VzZXInIHwgJ2Fzc2lzdGFudCcsIGNvbnRlbnQ6IHN0cmluZykge1xuICAgIGNvbnN0IG1lc3NhZ2U6IENvbnZlcnNhdGlvbk1lc3NhZ2UgPSB7XG4gICAgICBpZDogRGF0ZS5ub3coKS50b1N0cmluZygpLFxuICAgICAgcm9sZSxcbiAgICAgIGNvbnRlbnQsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgfTtcblxuICAgIGNvbnN0IHNlc3Npb24gPSBzZXNzaW9ucy5nZXQodGhpcy5zZXNzaW9uSWQpITtcbiAgICBzZXNzaW9uLm1lc3NhZ2VzLnB1c2gobWVzc2FnZSk7XG4gICAgc2Vzc2lvbi5sYXN0QWN0aXZlID0gbmV3IERhdGUoKTtcbiAgICBzZXNzaW9ucy5zZXQodGhpcy5zZXNzaW9uSWQsIHNlc3Npb24pO1xuXG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cblxuICAvLyBBZGQgYSBmaWxlIG9wZXJhdGlvbiB0byBtZW1vcnlcbiAgYWRkRmlsZU9wZXJhdGlvbih0eXBlOiBGaWxlT3BlcmF0aW9uWyd0eXBlJ10sIGZpbGVuYW1lOiBzdHJpbmcpIHtcbiAgICBjb25zdCBvcGVyYXRpb246IEZpbGVPcGVyYXRpb24gPSB7XG4gICAgICB0eXBlLFxuICAgICAgZmlsZW5hbWUsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICBzZXNzaW9uSWQ6IHRoaXMuc2Vzc2lvbklkLFxuICAgIH07XG5cbiAgICBjb25zdCBzZXNzaW9uID0gc2Vzc2lvbnMuZ2V0KHRoaXMuc2Vzc2lvbklkKSE7XG4gICAgc2Vzc2lvbi5maWxlT3BlcmF0aW9ucy5wdXNoKG9wZXJhdGlvbik7XG4gICAgc2Vzc2lvbnMuc2V0KHRoaXMuc2Vzc2lvbklkLCBzZXNzaW9uKTtcblxuICAgIHJldHVybiBvcGVyYXRpb247XG4gIH1cblxuICAvLyBHZXQgY29udmVyc2F0aW9uIGhpc3RvcnlcbiAgZ2V0TWVzc2FnZXMobGltaXQ/OiBudW1iZXIpOiBDb252ZXJzYXRpb25NZXNzYWdlW10ge1xuICAgIGNvbnN0IHNlc3Npb24gPSBzZXNzaW9ucy5nZXQodGhpcy5zZXNzaW9uSWQpO1xuICAgIGlmICghc2Vzc2lvbikgcmV0dXJuIFtdO1xuXG4gICAgY29uc3QgbWVzc2FnZXMgPSBzZXNzaW9uLm1lc3NhZ2VzO1xuICAgIHJldHVybiBsaW1pdCA/IG1lc3NhZ2VzLnNsaWNlKC1saW1pdCkgOiBtZXNzYWdlcztcbiAgfVxuXG4gIC8vIEdldCByZWNlbnQgZmlsZSBvcGVyYXRpb25zXG4gIGdldFJlY2VudEZpbGVPcGVyYXRpb25zKGxpbWl0ID0gMTApOiBGaWxlT3BlcmF0aW9uW10ge1xuICAgIGNvbnN0IHNlc3Npb24gPSBzZXNzaW9ucy5nZXQodGhpcy5zZXNzaW9uSWQpO1xuICAgIGlmICghc2Vzc2lvbikgcmV0dXJuIFtdO1xuXG4gICAgcmV0dXJuIHNlc3Npb24uZmlsZU9wZXJhdGlvbnMuc2xpY2UoLWxpbWl0KTtcbiAgfVxuXG4gIC8vIEdldCBhbGwgZmlsZXMgY3JlYXRlZC9tb2RpZmllZCBpbiB0aGlzIHNlc3Npb25cbiAgZ2V0U2Vzc2lvbkZpbGVzKCk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBzZXNzaW9uID0gc2Vzc2lvbnMuZ2V0KHRoaXMuc2Vzc2lvbklkKTtcbiAgICBpZiAoIXNlc3Npb24pIHJldHVybiBbXTtcblxuICAgIGNvbnN0IGZpbGVTZXQgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICBzZXNzaW9uLmZpbGVPcGVyYXRpb25zLmZvckVhY2gob3AgPT4ge1xuICAgICAgaWYgKG9wLnR5cGUgIT09ICdkZWxldGVkJykge1xuICAgICAgICBmaWxlU2V0LmFkZChvcC5maWxlbmFtZSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gQXJyYXkuZnJvbShmaWxlU2V0KTtcbiAgfVxuXG4gIC8vIFNlYXJjaCBtZXNzYWdlcyBieSBjb250ZW50XG4gIHNlYXJjaE1lc3NhZ2VzKHF1ZXJ5OiBzdHJpbmcpOiBDb252ZXJzYXRpb25NZXNzYWdlW10ge1xuICAgIGNvbnN0IHNlc3Npb24gPSBzZXNzaW9ucy5nZXQodGhpcy5zZXNzaW9uSWQpO1xuICAgIGlmICghc2Vzc2lvbikgcmV0dXJuIFtdO1xuXG4gICAgY29uc3QgbG93ZXJRdWVyeSA9IHF1ZXJ5LnRvTG93ZXJDYXNlKCk7XG4gICAgcmV0dXJuIHNlc3Npb24ubWVzc2FnZXMuZmlsdGVyKG1zZyA9PlxuICAgICAgbXNnLmNvbnRlbnQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhsb3dlclF1ZXJ5KVxuICAgICk7XG4gIH1cblxuICAvLyBHZXQgY29udGV4dCBzdW1tYXJ5IGZvciBuZXcgcmVxdWVzdHNcbiAgZ2V0Q29udGV4dFN1bW1hcnkoKTogc3RyaW5nIHtcbiAgICBjb25zdCBzZXNzaW9uID0gc2Vzc2lvbnMuZ2V0KHRoaXMuc2Vzc2lvbklkKTtcbiAgICBpZiAoIXNlc3Npb24pIHJldHVybiAnJztcblxuICAgIGNvbnN0IHJlY2VudE1lc3NhZ2VzID0gc2Vzc2lvbi5tZXNzYWdlcy5zbGljZSgtNCk7IC8vIExhc3QgNCBtZXNzYWdlc1xuICAgIGNvbnN0IHJlY2VudEZpbGVzID0gdGhpcy5nZXRTZXNzaW9uRmlsZXMoKTtcblxuICAgIGxldCBzdW1tYXJ5ID0gJyc7XG5cbiAgICAvLyBJbmNsdWRlIHN1bW1hcml6ZWQgaGlzdG9yeSBpZiBhdmFpbGFibGVcbiAgICBpZiAoc2Vzc2lvbi5zdW1tYXJpemVkSGlzdG9yeSkge1xuICAgICAgc3VtbWFyeSArPSBgUHJldmlvdXMgY29udGV4dCAoc3VtbWFyaXplZCk6XFxuJHtzZXNzaW9uLnN1bW1hcml6ZWRIaXN0b3J5fVxcblxcbmA7XG4gICAgfVxuXG4gICAgaWYgKHJlY2VudE1lc3NhZ2VzLmxlbmd0aCA+IDApIHtcbiAgICAgIHN1bW1hcnkgKz0gYFJlY2VudCBjb252ZXJzYXRpb24gKCR7cmVjZW50TWVzc2FnZXMubGVuZ3RofSBtZXNzYWdlcyk6XFxuYDtcbiAgICAgIHJlY2VudE1lc3NhZ2VzLmZvckVhY2goKG1zZywgaWR4KSA9PiB7XG4gICAgICAgIHN1bW1hcnkgKz0gYCR7aWR4ICsgMX0uICR7bXNnLnJvbGV9OiAke21zZy5jb250ZW50LnN1YnN0cmluZygwLCAxMDApfSR7bXNnLmNvbnRlbnQubGVuZ3RoID4gMTAwID8gJy4uLicgOiAnJ31cXG5gO1xuICAgICAgfSk7XG4gICAgICBzdW1tYXJ5ICs9ICdcXG4nO1xuICAgIH1cblxuICAgIGlmIChyZWNlbnRGaWxlcy5sZW5ndGggPiAwKSB7XG4gICAgICBzdW1tYXJ5ICs9IGBGaWxlcyBjcmVhdGVkL21vZGlmaWVkIGluIHRoaXMgc2Vzc2lvbjpcXG4ke3JlY2VudEZpbGVzLmpvaW4oJ1xcbicpfVxcblxcbmA7XG4gICAgfVxuXG4gICAgcmV0dXJuIHN1bW1hcnk7XG4gIH1cblxuICAvLyBHZXQgY29tcHJlc3NlZCBjb250ZXh0IChmb3IgdG9rZW4gZWZmaWNpZW5jeSlcbiAgYXN5bmMgZ2V0Q29tcHJlc3NlZENvbnRleHQobWF4VG9rZW5zOiBudW1iZXIgPSAyMDAwKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBjb25zdCBzZXNzaW9uID0gc2Vzc2lvbnMuZ2V0KHRoaXMuc2Vzc2lvbklkKTtcbiAgICBpZiAoIXNlc3Npb24pIHJldHVybiAnJztcblxuICAgIC8vIENoZWNrIGlmIHdlIG5lZWQgdG8gY3JlYXRlL3VwZGF0ZSBzdW1tYXJpemF0aW9uXG4gICAgY29uc3Qgc2hvdWxkU3VtbWFyaXplID0gXG4gICAgICBzZXNzaW9uLm1lc3NhZ2VzLmxlbmd0aCA+IE1BWF9NRVNTQUdFU19CRUZPUkVfU1VNTUFSSVpBVElPTiAmJlxuICAgICAgKCFzZXNzaW9uLmxhc3RTdW1tYXJpemVkQXQgfHxcbiAgICAgICAgRGF0ZS5ub3coKSAtIHNlc3Npb24ubGFzdFN1bW1hcml6ZWRBdC5nZXRUaW1lKCkgPiBTVU1NQVJJWkFUSU9OX0lOVEVSVkFMX01JTlVURVMgKiA2MCAqIDEwMDApO1xuXG4gICAgaWYgKHNob3VsZFN1bW1hcml6ZSkge1xuICAgICAgYXdhaXQgdGhpcy5zdW1tYXJpemVIaXN0b3J5KCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuZ2V0Q29udGV4dFN1bW1hcnkoKTtcbiAgfVxuXG4gIC8vIFN1bW1hcml6ZSBjb252ZXJzYXRpb24gaGlzdG9yeSB0byBzYXZlIHRva2Vuc1xuICBwcml2YXRlIGFzeW5jIHN1bW1hcml6ZUhpc3RvcnkoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IHNlc3Npb25zLmdldCh0aGlzLnNlc3Npb25JZCk7XG4gICAgaWYgKCFzZXNzaW9uIHx8IHNlc3Npb24ubWVzc2FnZXMubGVuZ3RoIDwgMTApIHJldHVybjtcblxuICAgIC8vIEltcG9ydCBzdW1tYXJpemVyIChkeW5hbWljIHRvIGF2b2lkIGNpcmN1bGFyIGRlcGVuZGVuY2llcylcbiAgICBjb25zdCB7IHN1bW1hcml6ZUNvbnZlcnNhdGlvbiB9ID0gYXdhaXQgaW1wb3J0KCcuL3N1bW1hcml6ZXInKTtcblxuICAgIC8vIEtlZXAgbGFzdCA1IG1lc3NhZ2VzIGZyZXNoLCBzdW1tYXJpemUgdGhlIHJlc3RcbiAgICBjb25zdCBtZXNzYWdlc1RvU3VtbWFyaXplID0gc2Vzc2lvbi5tZXNzYWdlcy5zbGljZSgwLCAtNSk7XG4gICAgXG4gICAgaWYgKG1lc3NhZ2VzVG9TdW1tYXJpemUubGVuZ3RoID09PSAwKSByZXR1cm47XG5cbiAgICBjb25zdCB7IHN1bW1hcnkgfSA9IGF3YWl0IHN1bW1hcml6ZUNvbnZlcnNhdGlvbihcbiAgICAgIG1lc3NhZ2VzVG9TdW1tYXJpemUubWFwKG0gPT4gKHsgcm9sZTogbS5yb2xlLCBjb250ZW50OiBtLmNvbnRlbnQgfSkpLFxuICAgICAgMCAvLyBTdW1tYXJpemUgYWxsXG4gICAgKTtcblxuICAgIHNlc3Npb24uc3VtbWFyaXplZEhpc3RvcnkgPSBzdW1tYXJ5O1xuICAgIHNlc3Npb24ubGFzdFN1bW1hcml6ZWRBdCA9IG5ldyBEYXRlKCk7XG4gICAgXG4gICAgLy8gUmVtb3ZlIG9sZCBtZXNzYWdlcywga2VlcCBvbmx5IHJlY2VudCBvbmVzXG4gICAgc2Vzc2lvbi5tZXNzYWdlcyA9IHNlc3Npb24ubWVzc2FnZXMuc2xpY2UoLTUpO1xuICAgIFxuICAgIHNlc3Npb25zLnNldCh0aGlzLnNlc3Npb25JZCwgc2Vzc2lvbik7XG5cbiAgICBjb25zb2xlLmxvZyhg8J+TiiBTdW1tYXJpemVkICR7bWVzc2FnZXNUb1N1bW1hcml6ZS5sZW5ndGh9IG1lc3NhZ2VzIGZvciBzZXNzaW9uICR7dGhpcy5zZXNzaW9uSWR9YCk7XG4gIH1cblxuICAvLyBHZXQgdG9rZW4gZXN0aW1hdGUgZm9yIGNvbnRleHRcbiAgZ2V0VG9rZW5Fc3RpbWF0ZSgpOiBudW1iZXIge1xuICAgIGNvbnN0IGNvbnRleHQgPSB0aGlzLmdldENvbnRleHRTdW1tYXJ5KCk7XG4gICAgLy8gUm91Z2ggZXN0aW1hdGU6IDQgY2hhcnMg4omIIDEgdG9rZW5cbiAgICByZXR1cm4gTWF0aC5jZWlsKGNvbnRleHQubGVuZ3RoIC8gNCk7XG4gIH1cblxuICAvLyBHZXQgYWxsIGFjdGl2ZSBzZXNzaW9ucyAoZm9yIGRlYnVnZ2luZy9zdGF0cylcbiAgc3RhdGljIGdldEFsbFNlc3Npb25zKCk6IFNlc3Npb25NZW1vcnlbXSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20oc2Vzc2lvbnMudmFsdWVzKCkpO1xuICB9XG5cbiAgc3RhdGljIGdldFNlc3Npb25Db3VudCgpOiBudW1iZXIge1xuICAgIHJldHVybiBzZXNzaW9ucy5zaXplO1xuICB9XG5cbiAgLy8gQ2xlYW51cCBvbGQgc2Vzc2lvbnMgKG9sZGVyIHRoYW4gMjQgaG91cnMpXG4gIHN0YXRpYyBjbGVhbnVwT2xkU2Vzc2lvbnMoKSB7XG4gICAgY29uc3Qgb25lRGF5QWdvID0gbmV3IERhdGUoRGF0ZS5ub3coKSAtIDI0ICogNjAgKiA2MCAqIDEwMDApO1xuICAgIGNvbnN0IHRvRGVsZXRlOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgc2Vzc2lvbnMuZm9yRWFjaCgoc2Vzc2lvbiwgaWQpID0+IHtcbiAgICAgIGlmIChzZXNzaW9uLmxhc3RBY3RpdmUgPCBvbmVEYXlBZ28pIHtcbiAgICAgICAgdG9EZWxldGUucHVzaChpZCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0b0RlbGV0ZS5mb3JFYWNoKGlkID0+IHNlc3Npb25zLmRlbGV0ZShpZCkpO1xuICAgIHJldHVybiB0b0RlbGV0ZS5sZW5ndGg7XG4gIH1cbn1cblxuLy8gVXRpbGl0eSB0byBjcmVhdGUvZ2V0IG1lbW9yeSBpbnN0YW5jZVxuZXhwb3J0IGZ1bmN0aW9uIGdldFNlc3Npb25NZW1vcnkoc2Vzc2lvbklkOiBzdHJpbmcpOiBDb252ZXJzYXRpb25NZW1vcnkge1xuICByZXR1cm4gbmV3IENvbnZlcnNhdGlvbk1lbW9yeShzZXNzaW9uSWQpO1xufVxuIl0sIm5hbWVzIjpbInNlc3Npb25zIiwiTWFwIiwiTUFYX01FU1NBR0VTX0JFRk9SRV9TVU1NQVJJWkFUSU9OIiwiU1VNTUFSSVpBVElPTl9JTlRFUlZBTF9NSU5VVEVTIiwiQ29udmVyc2F0aW9uTWVtb3J5IiwiY29uc3RydWN0b3IiLCJzZXNzaW9uSWQiLCJpbml0U2Vzc2lvbiIsImhhcyIsInNldCIsIm1lc3NhZ2VzIiwiZmlsZU9wZXJhdGlvbnMiLCJjcmVhdGVkQXQiLCJEYXRlIiwibGFzdEFjdGl2ZSIsInNlc3Npb24iLCJnZXQiLCJhZGRNZXNzYWdlIiwicm9sZSIsImNvbnRlbnQiLCJtZXNzYWdlIiwiaWQiLCJub3ciLCJ0b1N0cmluZyIsInRpbWVzdGFtcCIsInB1c2giLCJhZGRGaWxlT3BlcmF0aW9uIiwidHlwZSIsImZpbGVuYW1lIiwib3BlcmF0aW9uIiwiZ2V0TWVzc2FnZXMiLCJsaW1pdCIsInNsaWNlIiwiZ2V0UmVjZW50RmlsZU9wZXJhdGlvbnMiLCJnZXRTZXNzaW9uRmlsZXMiLCJmaWxlU2V0IiwiU2V0IiwiZm9yRWFjaCIsIm9wIiwiYWRkIiwiQXJyYXkiLCJmcm9tIiwic2VhcmNoTWVzc2FnZXMiLCJxdWVyeSIsImxvd2VyUXVlcnkiLCJ0b0xvd2VyQ2FzZSIsImZpbHRlciIsIm1zZyIsImluY2x1ZGVzIiwiZ2V0Q29udGV4dFN1bW1hcnkiLCJyZWNlbnRNZXNzYWdlcyIsInJlY2VudEZpbGVzIiwic3VtbWFyeSIsInN1bW1hcml6ZWRIaXN0b3J5IiwibGVuZ3RoIiwiaWR4Iiwic3Vic3RyaW5nIiwiam9pbiIsImdldENvbXByZXNzZWRDb250ZXh0IiwibWF4VG9rZW5zIiwic2hvdWxkU3VtbWFyaXplIiwibGFzdFN1bW1hcml6ZWRBdCIsImdldFRpbWUiLCJzdW1tYXJpemVIaXN0b3J5Iiwic3VtbWFyaXplQ29udmVyc2F0aW9uIiwibWVzc2FnZXNUb1N1bW1hcml6ZSIsIm1hcCIsIm0iLCJjb25zb2xlIiwibG9nIiwiZ2V0VG9rZW5Fc3RpbWF0ZSIsImNvbnRleHQiLCJNYXRoIiwiY2VpbCIsImdldEFsbFNlc3Npb25zIiwidmFsdWVzIiwiZ2V0U2Vzc2lvbkNvdW50Iiwic2l6ZSIsImNsZWFudXBPbGRTZXNzaW9ucyIsIm9uZURheUFnbyIsInRvRGVsZXRlIiwiZGVsZXRlIiwiZ2V0U2Vzc2lvbk1lbW9yeSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/utils/memory.ts\n");

/***/ })

};
;